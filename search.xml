<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Vueæºç åˆ†æžâ€”â€”ä»Žnew Vue()åˆ°åˆ°å®žä¾‹æŒ‚è½½]]></title>
    <url>%2F2020%2F04%2F28%2Fvue-code-2-mount%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä»‹ç»äº†ä»Žnew Vue()åˆå§‹åŒ–åˆ°æŒ‚è½½Vueå®žä¾‹çš„è¿‡ç¨‹ï¼Œå…¶ä¸­è¦†ç›–äº†new Vue()ã€initState()ã€$mountç­‰ç­‰ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥æ­å¼€ new Vue() çš„ç¥žç§˜é¢çº±ã€‚ new Vue()çœ‹åˆ° new Vue()ï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°ï¼Œnew æ“ä½œç¬¦ä»£è¡¨ç€å®žä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™é‡Œçš„Vueï¼Œå®žé™…ä¸Šå°±æ˜¯ä¸€ä¸ªç±»ï¼Œæƒ³çŸ¥é“ new Vue() æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ‰¾åˆ°Vueçš„å®šä¹‰ï¼Œå› ä¸º runtime-compiler ç‰ˆæœ¬æ¯” runtime-only ç‰ˆæœ¬å¤šäº†ä¸€æ­¥æ¨¡æ¿ç¼–è¯‘ï¼Œæ‰€ä»¥æœ¬ç¯‡é€‰æ‹©åˆ†æž runtime-compiler ç‰ˆæœ¬ï¼Œå…¥å£æ–‡ä»¶ä¸ºentry-runtime-with-compilerã€‚ å…¥å£123456789101112// entry-runtime-with-compiler.js......import Vue from './runtime/index'......// è¿™ä¸ªæ–‡ä»¶æœ€ç»ˆå¯¼å‡ºäº†ä¸€ä¸ªVueå¯¹è±¡ï¼Œè¿™ä¸ªVueå¼•å…¥è‡ª'./runtime/index'export default Vue å½“æˆ‘ä»¬æ‰“å¼€./runtime/indexçš„æ—¶å€™ä¼šå‘çŽ°ï¼Œè¿™é‡Œçš„Vueæ˜¯å¼•å…¥è‡ªcore/indexçš„ï¼Œæˆ‘ä»¬ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ï¼Œæœ€ç»ˆåœ¨src/core/instance/index.jsé‡Œæ‰¾åˆ°äº†Vueçš„å®šä¹‰ã€‚123456789101112131415161718192021222324252627// src/core/instance/index.jsimport &#123; initMixin &#125; from './init'import &#123; stateMixin &#125; from './state'import &#123; renderMixin &#125; from './render'import &#123; eventsMixin &#125; from './events'import &#123; lifecycleMixin &#125; from './lifecycle'import &#123; warn &#125; from '../util/index'function Vue (options) &#123; if (process.env.NODE_ENV !== 'production' &amp;&amp; !(this instanceof Vue) ) &#123; // è­¦å‘Š vueå¿…é¡»è¦é€šè¿‡newçš„æ–¹æ³•åŽ»å®žä¾‹åŒ–å®ƒ warn('Vue is a constructor and should be called with the `new` keyword') &#125; this._init(options) // è¿™ä¸ª_initæ˜¯åœ¨initMixinä¸­å®šä¹‰çš„, ç”¨æ¥åˆå§‹åŒ–Vue&#125;// é€šè¿‡è¿™äº›Mixinå¾€Vueç±»ä¸ŠæŒ‚è½½äº†è®¸å¤šåŽŸåž‹æ–¹æ³•ï¼Œæœ¬ç¯‡é‡ç‚¹çœ‹ä¸€ä¸‹initMixin()initMixin(Vue)stateMixin(Vue)eventsMixin(Vue)lifecycleMixin(Vue)renderMixin(Vue)export default Vue åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠVueç†è§£ä¸ºæ˜¯ç”¨å‡½æ•°å®žçŽ°çš„ä¸€ä¸ªç±»ï¼Œç±»ä¸Šé€šè¿‡Mixinæ–¹æ³•ç»™Vueçš„åŽŸåž‹æŒ‚è½½äº†å¾ˆå¤šåŽŸåž‹æ–¹æ³•ã€‚é™¤äº†Mixinï¼Œåœ¨runtime/index.jsé‡Œæˆ–è€…entry-runtime-with-compilerä¸­ ä¹Ÿå®šä¹‰äº†å¾ˆå¤šåŽŸåž‹æ–¹æ³•ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨åˆšåˆšçš„core/indexæ–‡ä»¶ä¸­ï¼ŒVueè¿˜ä¼šé€šè¿‡initGlobalAPI(Vue)ç»™VueæŒ‚è½½äº†è®¸å¤šé™æ€å±žæ€§ä¸Žæ–¹æ³•ï¼Œåœ¨å­¦ä¹ initMixin(Vue)ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹initGlobalAPI(Vue)éƒ½åšäº†äº›ä»€ä¹ˆã€‚ initGlobalAPI()12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485// global-api/index.jsimport config from '../config'import &#123; initUse &#125; from './use'import &#123; initMixin &#125; from './mixin'import &#123; initExtend &#125; from './extend'import &#123; initAssetRegisters &#125; from './assets'import &#123; set, del &#125; from '../observer/index'import &#123; ASSET_TYPES &#125; from 'shared/constants'import builtInComponents from '../components/index'import &#123; observe &#125; from 'core/observer/index'import &#123; warn, extend, nextTick, mergeOptions, defineReactive&#125; from '../util/index'export function initGlobalAPI (Vue: GlobalAPI) &#123; // config const configDef = &#123;&#125; configDef.get = () =&gt; config // configDefæ¥æº if (process.env.NODE_ENV !== 'production') &#123; configDef.set = () =&gt; &#123; // è­¦å‘Šä¸è¦æ›¿æ¢Vue.configå¯¹è±¡ï¼Œè¯·è®¾ç½®å•ç‹¬çš„å­—æ®µã€‚ warn( 'Do not replace the Vue.config object, set individual fields instead.' ) &#125; &#125; // å¾€vueçš„configä¸Šå®šä¹‰äº†configDef Object.defineProperty(Vue, 'config', configDef) // Vueæºç ä¸­çš„æ³¨é‡Š â†“â†“ // exposed util methods. // NOTE: these are not considered part of the public API - avoid relying on // them unless you are aware of the risk. // ç¿»è¯‘è¿‡æ¥å°±æ˜¯å®šä¹‰äº†ä¸€äº›æš´éœ²å‡ºåŽ»çš„utilæ–¹æ³•ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•å¹¶ä¸å±žäºŽå…¬å…±APIï¼Œæ‰€ä»¥vueå®˜æ–¹å¹¶ä¸å»ºè®®åŽ»ä½¿ç”¨è¿™äº›utilæ–¹æ³•ï¼Œå› ä¸ºå†…éƒ¨å®žçŽ°ä¸ç¨³å®šï¼Œæœ‰é£Žé™©ï¼ˆå¯èƒ½ä¼šæ”¹å˜å®žçŽ°æ–¹æ³•ï¼‰ã€‚ Vue.util = &#123; warn, extend, mergeOptions, defineReactive &#125; // å¾€vueä¸Šæ·»åŠ äº†set/delete/nextTickæ–¹æ³• Vue.set = set Vue.delete = del Vue.nextTick = nextTick // observable API è¿™ä¸ªobservableæ˜¯2.6æ–°å¢žçš„APIï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹ä¸€ä¸‹æ–‡æ¡£ Vue.observable = &lt;T&gt;(obj: T): T =&gt; &#123; observe(obj) return obj &#125; &lt;/T&gt; // options å¯ä»¥ç”¨æ¥åˆå¹¶ä¸€äº›æ–¹æ³• Vue.options = Object.create(null) // export const ASSET_TYPES = ['component', 'directive', 'filter']; // ASSET_TYPESçš„å®šä¹‰åœ¨shared/constants.jsä¸­ï¼Œè¿™ä¸€æ­¥å°±æ˜¯æŠŠcomponentï¼Œdirectiveï¼ŒfilteræŒ‚è½½åˆ°optionsä¸Šé¢ ASSET_TYPES.forEach(type =&gt; &#123; Vue.options[type + 's'] = Object.create(null) &#125;) // _baseè¢«ç”¨æ¥æ ‡è¯†åŸºæœ¬æž„é€ å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯Vueï¼‰ï¼Œä»¥ä¾¿åœ¨å¤šåœºæ™¯ä¸‹æ·»åŠ ç»„ä»¶æ‰©å±• Vue.options._base = Vue // builtInComponentsæ˜¯ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œè¯¦è§components/indexï¼Œè¿™ä¸ªæ–‡ä»¶å¯¼å‡ºäº†KeepAliveï¼Œç”±æ­¤å¯ä»¥çœ‹å‡ºKeepAliveå…¶å®žæ˜¯Vueçš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œå®ƒé€šè¿‡extendæ–¹æ³•æ‰©å±•åˆ°Vue.options.componentsä¸‹é¢ã€‚ extend(Vue.options.components, builtInComponents) // åˆå§‹åŒ–Vue.use()æ–¹æ³• initUse(Vue) // åˆå§‹åŒ–å…¨å±€mixinæ–¹æ³• initMixin(Vue) // åˆå§‹åŒ–vueçš„extendæ–¹æ³• initExtend(Vue) // æŠŠcomponentã€directiveã€filterå®šä¹‰åˆ°å…¨å±€ initAssetRegisters(Vue)&#125; åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œvueå®Œæˆäº†å…¨å±€æ–¹æ³•çš„å®šä¹‰ï¼Œåªæœ‰æŠŠè¿™äº›æ–¹æ³•å®šä¹‰äº†ä»¥åŽï¼Œæ‰èƒ½åœ¨ä»£ç ä¸­ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚ vueçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼š æ‰¾åˆ°Vueçš„å®šä¹‰ã€‚ ç„¶åŽåœ¨Vueä¸‹é¢é€šè¿‡Mixinæ–¹æ³•ç»™åŽŸåž‹æŒ‚è½½äº†å¾ˆå¤šåŽŸåž‹æ–¹æ³•ã€‚ åˆé€šè¿‡initGlobalApi()ç»™vueæŒ‚è½½äº†å¾ˆå¤šé™æ€æ–¹æ³•ã€‚ æœ€åŽå°±å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨äº†ã€‚ initMixin()åœ¨æž„å»ºVueå®žä¾‹çš„æ—¶å€™ï¼Œä½¿ç”¨äº†this._init(options),è¿™é‡Œé¢çš„_initæ–¹æ³•æ˜¯åœ¨initMixinä¸­å®šä¹‰çš„ï¼Œè¿™ä¹Ÿæ˜¯initMixinåšçš„å”¯ä¸€çš„ä¸€ä»¶äº‹ï¼Œåœ¨æž„é€ Vueå®žä¾‹çš„æ—¶å€™ä¼šè°ƒç”¨_initæ–¹æ³•æ¥åˆå§‹åŒ–Vueï¼Œæ¥çœ‹ä¸€ä¸‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475// src/core/instance/init.jsexport function initMixin (Vue: Class&lt;Component&gt;) &#123; Vue.prototype._init = function (options?: Object) &#123; const vm: Component = this vm._uid = uid++ let startTag, endTag if (process.env.NODE_ENV !== 'production' &amp;&amp; config.performance &amp;&amp; mark) &#123; startTag = `vue-perf-start:$&#123;vm._uid&#125;` endTag = `vue-perf-end:$&#123;vm._uid&#125;` mark(startTag) &#125; vm._isVue = true if (options &amp;&amp; options._isComponent) &#123; initInternalComponent(vm, options) &#125; else &#123; /* è¿™é‡ŒæŠŠæˆ‘ä»¬ä¼ å…¥çš„optionsæœ€åŽéƒ½åˆå¹¶åˆ°$optionsä¸Š ä¾‹å¦‚ï¼Œvm.$options.el å…¶å®žå°±æ˜¯ new Vue(&#123; el: è¿™é‡Œçš„el data: vm.$options.data &#125;) */ vm.$options = mergeOptions( resolveConstructorOptions(vm.constructor), options || &#123;&#125;, vm ) &#125; if (process.env.NODE_ENV !== 'production') &#123; initProxy(vm) // _renderProxy è¿™ä¸ªä¹‹åŽåœ¨renderéƒ¨åˆ†ä¼šåˆ†æž &#125; else &#123; vm._renderProxy = vm &#125; vm._self = vm /* åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸï¼Œä¸ºå½“å‰å®žä¾‹æ·»åŠ ä¸€äº›ç”Ÿå‘½å‘¨æœŸæ ‡è¯†ä¸Žå±žæ€§ã€‚ ä¾‹å¦‚$parentã€$childrenã€$refsã€_isMountedã€_isDestroyedç­‰ã€‚ */ initLifecycle(vm) // åˆå§‹åŒ–äº‹ä»¶ initEvents(vm) // åˆå§‹åŒ–renderï¼Œè¿™ä¸ªä¹Ÿä¼šåœ¨ä¹‹åŽçš„renderéƒ¨åˆ†åˆ†æž initRender(vm) // è°ƒç”¨beforeCreateé’©å­å‡½æ•° callHook(vm, 'beforeCreate') // åˆå§‹åŒ–inject initInjections(vm) // resolve injections before data/props // åˆå§‹åŒ–propsã€methodsã€dataã€computedä¸Žwatch initState(vm) // åˆå§‹åŒ–provide initProvide(vm) // è°ƒç”¨createdé’©å­å‡½æ•° callHook(vm, 'created') if (process.env.NODE_ENV !== 'production' &amp;&amp; config.performance &amp;&amp; mark) &#123; // æ ¼å¼åŒ–ç»„ä»¶å vm._name = formatComponentName(vm, false) mark(endTag) measure(`vue $&#123;vm._name&#125; init`, startTag, endTag) &#125; // åˆå§‹åŒ–ç»“æŸ åˆ¤æ–­æœ‰æ²¡æœ‰el if (vm.$options.el) &#123; /* åœ¨$mountä¹‹åŽè½¬åŒ–ä¸ºDOMå¯¹è±¡ è¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œï¼Œdomä¼šç«‹åˆ»å‘ç”Ÿå˜åŒ– é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯æŒ‚è½½ç»„ä»¶ */ vm.$mount(vm.$options.el) &#125; &#125;&#125; ä»Žä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚çš„çœ‹å‡ºVueåˆå§‹åŒ–çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œä¹Ÿäº†è§£åˆ°ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨createdé˜¶æ®µä¸èƒ½è®¿é—®DOMï¼Œå› ä¸ºDOMçš„æŒ‚è½½æ˜¯åœ¨vm.$mountæ—¶æ‰æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹initState()ï¼Œå…¶ä»–å‡ ä¸ªä¼šåœ¨ä¹‹åŽçš„ç¯‡ç« åˆ†æžï¼Œæœ¬ç« ä¸åšå…·ä½“ä»‹ç»ã€‚ initState()1234567891011121314151617181920212223// state.jsexport function initState (vm: Component) &#123; vm._watchers = [] const opts = vm.$options // åˆ¤æ–­optionsï¼Œå¦‚æžœå®šä¹‰äº†propsï¼Œå°±ä¼šåˆå§‹åŒ–props if (opts.props) initProps(vm, opts.props) // åˆ¤æ–­methodsï¼Œå¦‚æžœå®šä¹‰äº†methodsï¼Œå°±ä¼šåˆå§‹åŒ–methods if (opts.methods) initMethods(vm, opts.methods) // åˆ¤æ–­dataï¼Œå¦‚æžœå®šä¹‰äº†dataï¼Œå°±ä¼šåˆå§‹åŒ–data if (opts.data) &#123; initData(vm) &#125; else &#123; // æ²¡æœ‰dataçš„æ—¶å€™ç»‘å®šä¸€ä¸ªç©ºå¯¹è±¡ observe(vm._data = &#123;&#125;, true /* asRootData */) &#125; // åˆå§‹åŒ–computed if (opts.computed) initComputed(vm, opts.computed) // åˆå§‹åŒ–watcher if (opts.watch &amp;&amp; opts.watch !== nativeWatch) &#123; initWatch(vm, opts.watch) &#125;&#125; æˆ‘ä»¬åœ¨åˆå§‹åŒ–dataçš„æ—¶å€™è°ƒç”¨äº†initDataæ–¹æ³•, æ¥çœ‹ä¸€ä¸‹initData()éƒ½åšäº†äº›ä»€ä¹ˆã€‚ initData()123456789101112131415161718192021222324252627282930313233343536373839404142434445464748function initData (vm: Component) &#123; let data = vm.$options.data // åˆ¤æ–­æ˜¯ä¸æ˜¯functionï¼Œå¹¶èµ‹å€¼ç»™äº†vm._data data = vm._data = typeof data === 'function' ? getData(data, vm) // èŽ·å–dataæ•°æ® : data || &#123;&#125; // åˆ¤æ–­dataæ˜¯å¦éžå¯¹è±¡ï¼Œå¦‚æžœéžå¯¹è±¡å°±è¿”å›žè­¦å‘Š if (!isPlainObject(data)) &#123; data = &#123;&#125; process.env.NODE_ENV !== 'production' &amp;&amp; warn( 'data functions should return an object:\n' + 'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function', vm ) &#125; // éåŽ†dataå¯¹è±¡ const keys = Object.keys(data) const props = vm.$options.props const methods = vm.$options.methods let i = keys.length // éåŽ†dataä¸­çš„keys while (i--) &#123; const key = keys[i] if (process.env.NODE_ENV !== 'production') &#123; // ä¿è¯ä¸ä¸Žpropsä¸Žmethodsé‡Œçš„keyé‡å¤ï¼Œå¦‚æžœæœ‰é‡å¤åˆ™çˆ†å‡ºè­¦å‘Šï¼Œè¿™ä¸ªè­¦å‘Šæˆ‘ä»¬åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ if (methods &amp;&amp; hasOwn(methods, key)) &#123; warn( `Method "$&#123;key&#125;" has already been defined as a data property.`, vm ) &#125; &#125; if (props &amp;&amp; hasOwn(props, key)) &#123; process.env.NODE_ENV !== 'production' &amp;&amp; warn( `The data property "$&#123;key&#125;" is already declared as a prop. ` + `Use prop default value instead.`, vm ) &#125; else if (!isReserved(key)) &#123; // åˆ¤æ–­æ˜¯å¦æ˜¯éžä¿ç•™å­—æ®µ // èƒ½åœ¨vueé‡Œå¯ä»¥ä½¿ç”¨thisäº’ç›¸è°ƒç”¨dataæˆ–è€…methodsç­‰ç­‰ï¼Œå°±æ˜¯é€šè¿‡è¿™ä¸ªä»£ç† proxy(vm, `_data`, key) &#125; &#125; // observe data observe(data, true /* asRootData */)&#125; åœ¨initData()ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¾ªçŽ¯åˆ¤æ–­äº†æ˜¯å¦ä½¿ç”¨äº†é‡å¤çš„é”®åï¼Œå‡å¦‚dataé‡Œä½¿ç”¨äº†msgè¿™ä¸ªå­—æ®µ, é‚£ä¹ˆpropsé‡Œæˆ–methodsé‡Œç­‰ç­‰å°±ä¸å¯ä»¥å†ç”¨äº†ã€‚ä¸èƒ½ä½¿ç”¨é‡å¤çš„é”®åæ˜¯å› ä¸ºæ— è®ºæ˜¯dataã€propsã€è¿˜æ˜¯methodsç­‰ï¼Œæœ€ç»ˆéƒ½ä¼šæŒ‚è½½åˆ°vmå®žä¾‹ä¸Šï¼Œä¸€ä¸ªå®žä¾‹ä¸Šæ‹¥æœ‰é‡å¤çš„keyæ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚ å½“ä¸€ç³»åˆ—çš„åˆ¤æ–­é€šè¿‡åŽï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨proxy()æ¥é‡æ–°ä»£ç†vmï¼Œä½¿æˆ‘ä»¬å¯ä»¥ç”¨æ›´ç®€å•çš„æ–¹å¼åŽ»è®¿é—®å±žæ€§ï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸‹ã€‚ proxy() 123456789101112131415161718192021222324 // state.js const sharedPropertyDefinition = &#123; enumerable: true, configurable: true, get: noop, set: noop &#125;// å‚æ•°å¯¹åº”initData()ä¸­çš„proxy(vm, `_data`, key)export function proxy (target: Object, sourceKey: string, key: string) &#123; // å®šä¹‰getã€setæ–¹æ³•ã€‚ sharedPropertyDefinition.get = function proxyGetter () &#123; return this[sourceKey][key] // this._data.key &#125; sharedPropertyDefinition.set = function proxySetter (val) &#123; this[sourceKey][key] = val &#125; /* é€šè¿‡Object.definePropertyå¯¹target.keyçš„è®¿é—®å¢žåŠ äº†getå’Œset targetå…¶å®žå°±æ˜¯ä¼ å…¥çš„vm, æ‰€ä»¥vm.key.getå°±ä¼šæ‰§è¡ŒproxyGetter() */ Object.defineProperty(target, key, sharedPropertyDefinition)&#125; å½“æˆ‘ä»¬åŽ»è®¿é—®vm.dataçš„æ—¶å€™ï¼Œå®žé™…ä¸Šå°±ä¼šåŽ»è®¿é—®this[sourceKey][key], ç­‰åŒäºŽvm._data.keyã€‚ æ‰€ä»¥è¯´ï¼Œproxyå®žé™…ä¸Šå°±æ˜¯å°†æ•°æ®ä»£ç†åˆ°æˆ‘ä»¬çš„vmä¸Šï¼Œè®©æˆ‘ä»¬å¯ä»¥é€šè¿‡this._data.keyè®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡this.keyè¿™ç§æ–¹å¼è®¿é—®ã€‚ â—ï¸ä¸å»ºè®®ä½¿ç”¨_dataè¿™ç§æ–¹å¼ï¼Œå› ä¸ºåœ¨jsçš„ä¸–ç•Œä¸­ï¼Œå¸¦_çš„å˜é‡é»˜è®¤éƒ½æ˜¯ç§æœ‰çš„ã€‚ æœ€åŽæ¥çœ‹ä¸€ä¸‹$mountã€‚ $mount1234567891011121314// src/platforms/web/entry-runtime-with-compiler.js// ç”¨mountå¸¸é‡ä¿å­˜ä¸‹æ¥vueåŽŸåž‹çš„$mountæ–¹æ³•ï¼Œåœ¨ä¸‹é¢ä¼šè°ƒç”¨const mount = Vue.prototype.$mount// é‡æ–°å®šä¹‰$mountæ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸€å—çš„é€»è¾‘æ˜¯ç»™ runtime-compiler ç‰ˆæœ¬ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯å¸¦æ¨¡æ¿ç¼–è¯‘çš„ç‰ˆæœ¬ï¼Œè€Œruntime-onlyç‰ˆæœ¬æ²¡æœ‰ä¸‹é¢è¿™å—é€»è¾‘ã€‚Vue.prototype.$mount = function ( el?: string | Element, hydrating?: boolean): Component &#123; el = el &amp;&amp; query(el)...... elæœ€ç»ˆä¼šå¾—åˆ°query(el)çš„è¿”å›žå€¼ï¼Œæ‰€ä»¥å…ˆæ¥çœ‹ä¸€ä¸‹query()éƒ½åšäº†äº›ä»€ä¹ˆ query()12345678910111213141516171819// platforms/web/util/index.jsexport function query (el: string | Element): Element &#123; // å¦‚æžœå‚æ•°æ˜¯å­—ç¬¦ä¸²å°±è°ƒç”¨querySelectorå¯»æ‰¾è¿™ä¸ªå…ƒç´  if (typeof el === 'string') &#123; const selected = document.querySelector(el) // å¦‚æžœæ‰¾ä¸åˆ°å°±æŠ¥é”™ï¼Œè¿”å›žç©ºdiv if (!selected) &#123; process.env.NODE_ENV !== 'production' &amp;&amp; warn( 'Cannot find element: ' + el ) return document.createElement('div') &#125; return selected &#125; else &#123; // å¦‚æžœå‚æ•°æ˜¯ä¸€ä¸ªDOMå¯¹è±¡å°±ç›´æŽ¥è¿”å›ž return el &#125;&#125; ç”±æ­¤å¯çŸ¥ï¼Œquery() å°±æ˜¯è¿”å›žä¸€ä¸ªDOMçš„å®žä¾‹å¯¹è±¡ï¼Œæˆ‘ä»¬å›žåˆ°Vue.prototype.$mountï¼Œç»§ç»­é˜…è¯»æŽ¥ä¸‹æ¥çš„ä»£ç ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071// entry-runtime-with-compiler.jsel = el &amp;&amp; query(el);/* æ‹¿åˆ°elåŽï¼Œæ­¤æ—¶çš„elå·²ç»æ˜¯ä¸€ä¸ªDOMå¯¹è±¡ï¼Œç„¶åŽå†æ¬¡åšä¸€æ¬¡åˆ¤æ–­ã€‚ åˆ¤æ–­elæ˜¯å¦æ˜¯bodyæˆ–è€…æ˜¯æ–‡æ¡£æ ‡ç­¾ï¼ˆhtmlï¼‰ å¦‚æžœæ˜¯å°±ä¼šæŠ¥ä¸€ä¸ªé”™, æ„æ€æ˜¯è¯´â€œä½ çš„vueä¸å¯ä»¥ç›´æŽ¥æŒ‚è½½åˆ°bodyæˆ–htmlä¸Šâ€ å› ä¸ºæˆ‘ä»¬æŒ‚è½½èŠ‚ç‚¹æ—¶ä¼šè¦†ç›–èŠ‚ç‚¹ï¼Œè€Œæˆ‘ä»¬å¦‚æžœè¦†ç›–äº†bodyæˆ–htmlè‚¯å®šæ˜¯ä¸æ­£ç¡®çš„ã€‚ è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆé€šå¸¸ä½¿ç”¨div#appè¿™ç§æ–¹å¼åŽ»åšVueçš„æ ¹èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ç›´æŽ¥æŒ‚è½½åˆ°bodyæˆ–htmlä¸Šçš„åŽŸå› ã€‚ */if (el === document.body || el === document.documentElement) &#123; process.env.NODE_ENV !== 'production' &amp;&amp; warn( `Do not mount Vue to &lt;html&gt; or &lt;body&gt; - mount to normal elements instead.` ) return this&#125;// èŽ·å–$optionsconst options = this.$options/* è¿™é‡Œä¼šåˆ¤æ–­æœ‰æ²¡æœ‰æ‰‹å†™renderæ–¹æ³•ï¼Œä¾‹å¦‚ â†“â†“ new Vue(&#123; el: '#app', render(h) &#123; return h(App) &#125; &#125;) */// åœ¨renderä¸å­˜åœ¨çš„æ—¶å€™æ‰ä¼šç¼–è¯‘templateï¼Œå¦åˆ™ä¼˜å…ˆè°ƒç”¨renderif (!options.render) &#123; let template = options.template // ç´§æŽ¥ç€åˆ¤æ–­new vueä¸­æœ‰æ²¡æœ‰template if (template) &#123; // å½“templateæ˜¯å­—ç¬¦ä¸²æ—¶ if (typeof template === 'string') &#123; // åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥id(#)ä¸ºå…ƒç´ é€‰æ‹©å™¨ if (template.charAt(0) === '#') &#123; // idToTemplateæ–¹æ³•å†…éƒ¨é€šè¿‡query()èŽ·å–è½¬åŒ–åŽçš„å…ƒç´ ï¼Œå¦‚æžœè½¬åŒ–æˆåŠŸåˆ™è¿”å›žå…ƒç´ å†…çš„innerHTML template = idToTemplate(template) // å¦‚æžœæ²¡æœ‰é€šè¿‡idé€‰æ‹©å™¨èŽ·å–åˆ°å¯¹åº”çš„å…ƒç´ ï¼Œåˆ™ä¼šæŠ¥ä¸€ä¸ªè­¦å‘Š if (process.env.NODE_ENV !== 'production' &amp;&amp; !template) &#123; warn( `Template element not found or is empty: $&#123;options.template&#125;`, this ) &#125; &#125; &#125; else if (template.nodeType) &#123; /* templateä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªdomå¯¹è±¡ï¼Œä¾‹å¦‚ â†“â†“ new Vue(&#123; el: '#app', template: document.querySelector('#app'), &#125;) å¦‚æžœtemplateæ˜¯domå¯¹è±¡å°±ä¼šåŽ»å–innerHTML */ template = template.innerHTML &#125; else &#123; // æ—¢ä¸å­—ç¬¦ä¸²ä¹Ÿä¸æ˜¯domçš„è¯ä¼šæŠ›å‡ºè­¦å‘Š if (process.env.NODE_ENV !== 'production') &#123; warn('invalid template option:' + template, this) &#125; return this &#125; &#125; else if (el) &#123; // æ²¡æœ‰templateæƒ…å†µï¼Œå°±è°ƒç”¨getOuterHTMLï¼Œè¿™ä¸ªæ–¹æ³•æœ€ç»ˆè¿”å›žä¸€ä¸ªå­—ç¬¦ä¸² template = getOuterHTML(el) &#125; æ¥çœ‹ä¸€ä¸‹getOuterHTMLæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å…¶å®žå’Œå®ƒçš„åå­—ä¸€æ ·ï¼Œå°±æ˜¯æ‹¿åˆ°DOMå¯¹è±¡çš„outerHTMLã€‚ getOuterHTML()12345678910111213141516// entry-runtime-with-compiler.js/** * Get outerHTML of elements, taking care * of SVG elements in IE as well. */function getOuterHTML (el: Element): string &#123; if (el.outerHTML) &#123; return el.outerHTML &#125; else &#123; // ä»Žæºç ä¸Šçš„æ³¨é‡Šä¸Šæ¥çœ‹ï¼ŒIEä¸­çš„SVGæ— ç´ å°±èŽ·å–ä¸åˆ°outerHTMLï¼Œæ‰€ä»¥ï¼Œå¦‚æžœæ²¡æœ‰outerHTMLçš„è¯å°±åœ¨å¤–é¢åŒ…ä¸€å±‚å†æ‰§è¡ŒinnerHTML, è¿™æ ·ç­‰åŒäºŽæ‹¿åˆ°äº†outerHTMLã€‚ const container = document.createElement('div') container.appendChild(el.cloneNode(true)) return container.innerHTML &#125;&#125; åˆšåˆšæ— è®ºä½¿ç”¨äº†ä»€ä¹ˆæ–¹æ³•ï¼Œæˆ‘ä»¬éƒ½å·²ç»èŽ·å–åˆ°äº†templateï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ¨¡æ¿ï¼ˆtemplateï¼‰ç¼–è¯‘éƒ¨åˆ†ã€‚1234567891011121314151617181920212223242526272829 // entry-runtime-with-compiler.js if (template) &#123; /* istanbul ignore if */ if (process.env.NODE_ENV !== 'production' &amp;&amp; config.performance &amp;&amp; mark) &#123; mark('compile') &#125; // é€šè¿‡compileToFunctionsç”Ÿæˆrenderå‡½æ•°ä»¥åŠstaticRenderFns(é™æ€renderå‡½æ•°)ï¼ŒstaticRenderFnsä¸éœ€è¦åœ¨VNodeæ›´æ–°æ—¶å†è¿›è¡Œpatchï¼Œæ­¤å¤„å±žäºŽæ€§èƒ½ä¼˜åŒ–ã€‚ const &#123; render, staticRenderFns &#125; = compileToFunctions(template, &#123; outputSourceRange: process.env.NODE_ENV !== 'production', shouldDecodeNewlines, shouldDecodeNewlinesForHref, delimiters: options.delimiters, comments: options.comments &#125;, this) // åˆ†åˆ«èµ‹å€¼ç»™options.render ä¸Ž options.staticRenderFns options.render = render options.staticRenderFns = staticRenderFns /* istanbul ignore if */ if (process.env.NODE_ENV !== 'production' &amp;&amp; config.performance &amp;&amp; mark) &#123; mark('compile end') measure(`vue $&#123;this._name&#125; compile`, 'compile', 'compile end') &#125; &#125; &#125; // å¦‚æžœæœ‰renderå‡½æ•°å°±å¯ä»¥ç›´æŽ¥è°ƒç”¨mountæ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰å°±ä¼šæŠŠæ¨¡æ¿è½¬åŒ–ï¼Œç¼–è¯‘ç”Ÿæˆrender()ï¼Œç„¶åŽè°ƒç”¨ â†“â†“ return mount.call(this, el, hydrating) // è¿™ä¸ªmountå°±æ˜¯ä¸€å¼€å§‹ç¼“å­˜çš„Vue.prototype.$mount&#125; åœ¨çœ‹mount.call(this, el, hydrating)çš„ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ€»ç»“ä¸€ä¸‹ã€‚ åœ¨æ‰§è¡Œ$mountçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå¯¹elåšä¸€ä¸ªè§£æžï¼Œåˆ¤æ–­elæ˜¯å¦æ˜¯bodyæˆ–htmlï¼Œå¦‚æžœåˆ¤æ–­é€šè¿‡ï¼Œä¼šå†åˆ¤æ–­æ˜¯å¦å­˜åœ¨renderæ–¹æ³•ï¼Œå¦‚æžœä¸å­˜åœ¨å°±è½¬åŒ–ä¸ºä¸€ä¸ªtemplateï¼Œè¿™ä¸ªtemplateæœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆrenderã€‚ å¯ä»¥çœ‹å‡ºï¼Œæ— è®ºç”¨ä»€ä¹ˆæ–¹æ³•ï¼ŒVueæœ€ç»ˆåªè®¤renderå‡½æ•°ï¼Œå¹¶ä¸”ï¼Œå¦‚æžœæœ‰renderå‡½æ•°ä¼šç›´æŽ¥è°ƒç”¨mountæ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰å°±é€šè¿‡æ¨¡æ¿ç¼–è¯‘ç”Ÿæˆrenderå‡½æ•°ï¼Œæœ‰äº†renderå‡½æ•°ä¹‹åŽå†åŽ»è°ƒç”¨mountã€‚ æˆ–è®¸ä½ ä¼šå¯¹ runtime-compiler ç‰ˆæœ¬é‡æ–°å®šä¹‰ $mount æ–¹æ³•æœ‰æ‰€ç–‘é—®ï¼Œé‚£æ˜¯å› ä¸º runtime-compiler åœ¨æŒ‚è½½ç»„ä»¶ä¹‹å‰ï¼Œéœ€è¦æ‰§è¡Œä¸€éæŠŠç»„ä»¶å¯¹è±¡ä¸­å¯èƒ½å®šä¹‰çš„ template ç¼–è¯‘ç”Ÿæˆ render å‡½æ•°çš„è¿‡ç¨‹ã€‚è€Œ runtime-only ç‰ˆæœ¬åªæ”¯æŒåœ¨ç»„ä»¶å¯¹è±¡ä¸­å®šä¹‰ render å‡½æ•°ã€‚ ä¹Ÿå°±æ˜¯è¯´ runtime-compiler ç‰ˆæœ¬çš„ $mount ä¼šå¤šåšä¸€æ­¥ç¼–è¯‘æ¨¡æ¿ï¼Œè€Œruntime-onlyä¸éœ€è¦è€ƒè™‘æ¨¡æ¿ç¼–è¯‘çš„äº‹æƒ…ã€‚é™¤äº†æ¨¡æ¿ç¼–è¯‘ï¼Œå®ƒä»¬ä¹‹åŽçš„æµç¨‹éƒ½ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯ä»¥å¤ç”¨åŽé¢çš„ mount é€»è¾‘ã€‚ å¥½äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸Šé¢æåˆ°çš„å¯å¤ç”¨çš„é€»è¾‘éƒ¨åˆ†â€”â€”è¢«ç¼“å­˜èµ·äº†æ¥$mountéƒ½åšäº†äº›ä»€ä¹ˆã€‚ 1234567891011121314// runtime/index.jsVue.prototype.$mount = function ( el?: string | Element, // å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯DOM hydrating?: boolean): Component &#123; /* å› ä¸ºåœ¨runtime-onlyç‰ˆæœ¬ä¼šç›´æŽ¥èµ°åˆ°è¿™é‡Œï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦å¯¹elåšä¸€å±‚åˆ¤æ–­ åŽé¢çš„inBrowseråˆ¤æ–­æ˜¯å¦æ˜¯æµè§ˆå™¨çŽ¯å¢ƒ */ el = el &amp;&amp; inBrowser ? query(el) : undefined // æŒ‚è½½ç»„ä»¶ï¼Œæ³¨æ„æ­¤å¤„çš„elå·²ç»æ˜¯é€šè¿‡query(el)è½¬åŒ–åŽçš„dom return mountComponent(this, el, hydrating)&#125; mountComponent123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687// lifecycle.jsexport function mountComponent ( vm: Component, el: ?Element, hydrating?: boolean ): Component &#123; // æŠŠelç”¨vm.$elåšç¼“å­˜ vm.$el = el // åˆ¤æ–­renderå‡½æ•°ï¼ˆå¹¶æ²¡æœ‰å†™renderå‡½æ•°å¹¶ä¸”templateæ²¡æœ‰æ­£ç¡®è½¬åŒ–renderå‡½æ•°çš„æƒ…å†µï¼‰ if (!vm.$options.render) &#123; // é‚£ä¹ˆå°±ä¼šä½¿ç”¨createEmptyVNodeåˆ›å»ºä¸€ä¸ªç©ºvnode vm.$options.render = createEmptyVNode /* æŠ›å‡ºè­¦å‘Šã€‚ è¿™ä¸ªé”™è¯¯å…¶å®žå°±æ˜¯ä½¿ç”¨äº†runtime-onlyç‰ˆæœ¬ï¼Œç„¶åŽåˆå†™äº†templateè€Œä¸æ˜¯å†™renderå‡½æ•°ã€‚ æˆ–è€…è¯´å†™äº†templateä½†æ˜¯æ²¡æœ‰ä½¿ç”¨runtime-compilerç‰ˆæœ¬ã€‚ */ if (process.env.NODE_ENV !== 'production') &#123; /* istanbul ignore if */ if ((vm.$options.template &amp;&amp; vm.$options.template.charAt(0) !== '#') || vm.$options.el || el) &#123; warn( 'You are using the runtime-only build of Vue where the template ' + 'compiler is not available. Either pre-compile the templates into ' + 'render functions, or use the compiler-included build.', vm ) &#125; else &#123; // è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æ²¡æœ‰å†™templateä¹Ÿæ²¡æœ‰å†™renderå‡½æ•° warn( 'Failed to mount component: template or render function not defined.', vm ) &#125; &#125; &#125; // è§¦å‘beforeMounté’©å­ callHook(vm, 'beforeMount') // å®šä¹‰updateComponentï¼Œæœ€ç»ˆå°†ä½œä¸ºWatcherå¯¹è±¡çš„getterå‡½æ•°ï¼Œç”¨æ¥æ”¶é›†ä¾èµ– let updateComponent // åœ¨å¼€å‘çŽ¯å¢ƒå¹¶ä¸”é…ç½®äº†performanceå’Œmarkï¼Œæ€§èƒ½åŸ‹ç‚¹ç›¸å…³ if (process.env.NODE_ENV !== 'production' &amp;&amp; config.performance &amp;&amp; mark) &#123; updateComponent = () =&gt; &#123; const name = vm._name const id = vm._uid const startTag = `vue-perf-start:$&#123;id&#125;` const endTag = `vue-perf-end:$&#123;id&#125;` mark(startTag) const vnode = vm._render() mark(endTag) measure(`vue $&#123;name&#125; render`, startTag, endTag) mark(startTag) vm._update(vnode, hydrating) mark(endTag) measure(`vue $&#123;name&#125; patch`, startTag, endTag) &#125; &#125; else &#123; updateComponent = () =&gt; &#123; // å®šä¹‰vm._updateï¼Œ_updateçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é€šè¿‡vm._renderç”Ÿæˆçš„ä¸€ä¸ªvnodeï¼Œç¬¬äºŒä¸ªå‚æ•°hydratingæ˜¯æœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å°±æ˜¯æœ€ç»ˆæŒ‚è½½doméœ€è¦ç”¨çš„å‡½æ•°ã€‚ vm._update(vm._render(), hydrating) &#125; &#125; // è°ƒç”¨äº†ä¸€ä¸ªnew Watcheræ‰§è¡ŒupdateComponent new Watcher(vm, updateComponent, noop, &#123; before () &#123; if (vm._isMounted &amp;&amp; !vm._isDestroyed) &#123; callHook(vm, 'beforeUpdate') &#125; &#125; &#125;, true /* isRenderWatcher */) hydrating = false // manually mounted instance, call mounted on self // mounted is called for render-created child components in its inserted hook if (vm.$vnode == null) &#123; // ä»£è¡¨ç»„ä»¶å·²æŒ‚è½½çš„æ ‡å¿—ä½ vm._isMounted = true // è§¦å‘mountedé’©å­ callHook(vm, 'mounted') &#125; return vm&#125; é€šè¿‡ Watcher ä½¿ç”¨ updateComponent æ˜¯å› ä¸º updateComponent æ–¹æ³•å®žé™…ä¸Šå°±æ˜¯æ‰§è¡Œäº†ä¸€æ¬¡çœŸå®žçš„æ¸²æŸ“ã€‚è€ŒçœŸå®žçš„æ¸²æŸ“è¿‡ç¨‹é™¤äº†é¦–æ¬¡æ¸²æŸ“ï¼Œä¹‹åŽåœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™è¿˜æ˜¯ä¼šè§¦å‘æ¸²æŸ“ Watcherï¼Œå†æ¬¡æ‰§è¡Œ updateComponent æ–¹æ³•ï¼Œè€Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–è§†å›¾ä¿®æ”¹æ—¶ï¼Œå…¥å£ä¹Ÿæ˜¯ updateComponent æ–¹æ³•ï¼Œçœ‹ä¸€ä¸‹ Watcher çš„å®šä¹‰ã€‚ Watcher1234567891011121314151617181920212223242526272829303132333435363738394041// watcher.jsexport default class Watcher &#123; ... ... constructor ( vm: Component, // vueå®žä¾‹ expOrFn: string | Function, // expression or function è¡¨è¾¾å¼æˆ–å‡½æ•° cb: Function, // callbackå›žè°ƒ options?: ?Object, // é…ç½®å¯¹è±¡ isRenderWatcher?: boolean // æ˜¯å¦æ˜¯æ¸²æŸ“watcherçš„booleanå€¼, åˆšåˆšæˆ‘ä»¬ä¼ äº†true, æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ¸²æŸ“watcherã€‚ ) &#123; this.vm = vm if (isRenderWatcher) &#123; // å¦‚æžœæ˜¯æ¸²æŸ“watcherçš„è¯åœ¨vmä¸ŠåŠ ä¸€ä¸ª_watcher vm._watcher = this &#125; vm._watchers.push(this) ... ... // åˆ¤æ–­expOrFnå¦‚æžœæ˜¯å‡½æ•°ï¼Œå¦‚æžœæ˜¯å°±æŠŠgetterèµ‹å€¼ç»™è¿™ä¸ªå‡½æ•°ï¼Œæ­¤å¤„å¯¹åº”åˆšåˆšä¼ å…¥çš„updateComponentæ–¹æ³•ã€‚ if (typeof expOrFn === 'function') &#123; this.getter = expOrFn &#125; else &#123; // è°ƒç”¨parsePathè½¬åŒ–ä¸€ä¸‹expOrFn this.getter = parsePath(expOrFn) ... ... get () &#123; pushTarget(this) let value const vm = this.vm try &#123; // åœ¨è¿™é‡Œè°ƒç”¨getterï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œä¼ å…¥updateComponentçš„æ–¹æ³• value = this.getter.call(vm, vm) &#125; å›žåˆ°lifecycle.jsï¼Œæ‰§è¡Œ updateComponentã€‚ 12345678// lifecycle.js updateComponent = () =&gt; &#123; vm._update(vm._render(), hydrating) /* å¼€å§‹æ‰§è¡Œ vm._update(vm._render(), hydrating) vm._updateã€vm._render()è¿™ä¸¤ä¸ªå‡½æ•°å°±æ˜¯æœ€ç»ˆæŒ‚è½½doméœ€è¦ç”¨çš„å‡½æ•° å…ˆæ‰§è¡Œrender, renderç”Ÿæˆä¸€ä¸ªvnodeï¼Œç„¶åŽè°ƒupdateï¼ŒæŠŠvnodeä¼ å…¥è¿›åŽ» */ &#125; Watcher çš„ getter ä¸º updateComponent å‡½æ•°ï¼Œç”¨äºŽè§¦å‘æ‰€æœ‰æ¸²æŸ“æ‰€éœ€è¦ç”¨åˆ°çš„æ•°æ®çš„ getterï¼Œè¿›è¡Œä¾èµ–æ”¶é›†ï¼Œè¯¥ Watcher å®žä¾‹ä¼šå­˜åœ¨æ‰€æœ‰æ¸²æŸ“æ‰€éœ€æ•°æ®çš„é—­åŒ…Depä¸­ã€‚ æ€»ç»“ä¸€ä¸‹ $mount çš„å®žçŽ°ï¼Œå¦‚æžœåœ¨ runtime-compiler ç‰ˆæœ¬çš„è¯ï¼Œä¼šå…ˆå¯¹elåšä¸€äº›å¤„ç†ï¼Œå¦‚æžœæ²¡æœ‰å®šä¹‰ render å‡½æ•°çš„è¯ï¼Œå°±ä¼šåŽ»å°è¯•èŽ·å– render å‡½æ•°ï¼ˆæŠŠtemplateé€šè¿‡ä¸€ç³»åˆ—çš„é€»è¾‘åˆ¤æ–­ï¼Œå°è¯•æŠŠtemplateè½¬åŒ–ä¸ºrenderå‡½æ•°ï¼Œå› ä¸ºtemplateæ”¯æŒå¾ˆå¤šå†™æ³•ï¼Œä¾‹å¦‚ç›´æŽ¥å†™templateï¼Œæˆ–è€…templateæ˜¯ä¸€ä¸ªdomï¼Œä¸å†™çš„è¯ä¹Ÿå¯ä»¥é€šè¿‡elåŽ»èŽ·å–templateï¼Œæœ€åŽæŠŠtemplateé€šè¿‡ç¼–è¯‘çš„æ‰‹æ®µåŽ»è½¬åŒ–ä¸ºrenderå‡½æ•°ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ$mount åœ¨ runtime-compiler ç‰ˆæœ¬ä¸­ï¼Œé¦–å…ˆè¦æ‹¿åˆ° render å‡½æ•°ï¼Œç„¶åŽè°ƒç”¨ mountComponent æ–¹æ³•ã€‚ mountComponent ä¸­ï¼Œå®šä¹‰äº† updateComponent æ–¹æ³•ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªæ¸²æŸ“watcherï¼Œä¹‹æ‰€ä»¥é€šè¿‡watcherï¼Œæ˜¯å› ä¸ºupdateComponent æ–¹æ³•å®žé™…ä¸Šå°±æ˜¯æ‰§è¡Œäº†ä¸€æ¬¡æ¸²æŸ“ï¼Œè¿™ä¸ªæ¸²æŸ“è¿‡ç¨‹é™¤äº†é¦–æ¬¡ï¼Œä¹‹åŽåœ¨æ›´æ–°æ•°æ®æ—¶ï¼Œè¿˜æ˜¯ä¼šè§¦å‘è¿™ä¸ªæ¸²æŸ“watcherï¼Œå†æ¬¡æ‰§è¡Œ updateComponent æ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªç›‘å¬â†’æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå½“ç›‘å¬æ•°æ®å‘ç”Ÿå˜åŒ–ã€è§†å›¾ä¿®æ”¹ï¼Œå…¥å£ä¹Ÿæ˜¯ updateComponent æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ¸²æŸ“watcheråšçš„äº‹æƒ…ã€‚ å…¶å®žå¾ˆå¤šåˆ†æžåœ¨ä»£ç ä¸­å’Œæ€»ç»“ä¸­éƒ½è¯´äº†ä¸€éï¼Œè™½ç„¶æœ‰ç‚¹å” å¨ï¼Œä½†æ˜¯ä¸»è¦ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†åŠ æ·±è®°å¿†ã€‚èƒ½çœ‹åˆ°è¿™é‡Œéƒ½æ¯”è¾ƒè¾›è‹¦ï¼Œæ‰€ä»¥å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¤šå°‘å¯¹ä½ æœ‰ç‚¹å¸®åŠ©ã€‚æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡è¯»Vueæºç ï¼Œå¦‚æžœæœ‰å¯¹å“ªé‡Œæœ‰ç–‘é—®æˆ–è€…æœ‰é—®é¢˜çš„åœ°æ–¹ï¼Œè¿˜å¸Œæœ›å¯ä»¥æŒ‡å‡ºæ¥ï¼Œå¤§å®¶å¤šå¤šäº¤æµã€‚ ç¢Žç¢Žå¿µåˆ›å»ºè¿™ç¯‡æ–‡ç« çš„æ—¶å€™æ˜¯4æœˆ28æ—¥ï¼Œä»Šå¤©æ˜¯5æœˆ28æ—¥ï¼Œä¸€æ™ƒåˆæ‹–äº†ä¸€ä¸ªæœˆï¼Œè‚¯å®šä¸æ˜¯æˆ‘æ‹–ï¼Œå—¯ï¼Œæ˜¯è¿™ç¯‡æ–‡ç« å¤ªé•¿äº†ã€‚ åŒ—äº¬æœ€è¿‘çš„å¤©æ°”å¥½çš„ä¸åƒè¯ï¼Œä¸Šå‘¨æœ«çš„æ—¶å€™å¤©æ°”å°±å¥½å¾—æƒŠäººï¼Œé‚£å¤©æœ¬æ¥æƒ³åŽ»åŒ—æµ·å…¬å›­è½¬è½¬ï¼Œç»“æžœå½“å¤©å› ä¸ºç–«æƒ…æœŸé—´åŽ»å…¬å›­çš„è¯éœ€è¦æå‰é¢„çº¦å¯¼è‡´æ²¡åŽ»æˆï¼Œè¿˜éƒé—·äº†å¥½ä¹…ï¼Œä¸è¿‡çŽ°åœ¨æ¥çœ‹æ¥è¿™å‘¨æœ«è¿˜æ˜¯å¯ä»¥åŽ»çš„ï¼Œæˆ‘çœŸæ˜¯è¢«ä¸Šå¤©å® çˆ±çš„äººå•Šï¼Œå“ˆå“ˆå“ˆ ~ æœ‰æ—¶å€™äººå¿«ä¹èµ·æ¥çœŸçš„å¾ˆç®€å•ï¼Œæœ‰ä¸€ä¸ªå¥½å¤©æ°”å°±å¤Ÿäº†ã€‚]]></content>
      <tags>
        <tag>vue</tag>
        <tag>notes</tag>
        <tag>source-code</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vueæºç åˆ†æžâ€”â€”ç›®å½•ä¸Žæž„å»ºæµç¨‹]]></title>
    <url>%2F2020%2F04%2F05%2Fvue-source-code-1-build%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç»ˆäºŽå¼€å§‹è®°å½•vueæºç å•¦ ~ æœ¬ç¯‡æ˜¯Vueæºç ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œè€Œä¸”è¿™ç¯‡æ–‡ç« ç«Ÿç„¶æ‹–äº†æ•´æ•´20å¤©ï¼ˆç¬‘ï¼‰ï¼Œå› ä¸ºåŽŸæœ¬æ‰“ç®—æŠŠrenderã€createElmç­‰ç­‰éƒ½å†™åœ¨ä¸€ç¯‡æ–‡ç« é‡Œï¼ŒåŽæ¥æƒ³æƒ³æžœç„¶å†™åšå®¢ä¹Ÿè¯¥éµå¾ªä¸‹ç»„ä»¶åŒ–æ€æƒ³ï¼Œè¿˜æ˜¯åˆ†å¼€ç»´æŠ¤çš„å¥½ðŸ˜‚ï¼Œä¸åºŸè¯äº†ï¼Œå…ˆæ¥çœ‹çœ‹æºç ç›®å½•ã€‚ vueæºç ç›®å½•1234567891011121314151617181920212223â”œâ”€benchmarks # æ€§èƒ½æµ‹è¯•ç›¸å…³demoâ”œâ”€dist # é¡¹ç›®æž„å»ºåŽä¸åŒç‰ˆæœ¬çš„vueæ–‡ä»¶â”œâ”€examples # ç”¨vueå†™çš„ä¸€äº›å°demoâ”œâ”€flow # flowç±»åž‹å£°æ˜Žæ–‡ä»¶ã€å®šä¹‰å…¨å±€æ–¹æ³•ã€å˜é‡ç±»åž‹â”œâ”€packages # ä¸€äº›npmåŒ…ï¼Œå¯ä»¥é€šè¿‡npm installå•ç‹¬ä½¿ç”¨ã€‚â”œâ”€scripts # é¡¹ç›®æž„å»ºç›¸å…³çš„è„šæœ¬å’Œé…ç½®æ–‡ä»¶â”œâ”€src # vueæ ¸å¿ƒæºç â”‚ â”œâ”€complier # æ¨¡æ¿ç¼–è¯‘ç›¸å…³ä»£ç â”‚ â”œâ”€core # vueæ ¸å¿ƒä¸­çš„æ ¸å¿ƒä»£ç â”‚ â”‚ â”œâ”€components # å†…ç½®ç»„ä»¶çš„ä»£ç (keep-alive)â”‚ â”‚ â”œâ”€global-api # å…¨å±€api(å¦‚extendã€mixin)â”‚ â”‚ â”œâ”€instance # å®žä¾‹åŒ–ç›¸å…³ï¼ˆæ¸²æŸ“ã€åˆå§‹åŒ–ã€ç”Ÿå‘½å‘¨æœŸç­‰ï¼‰â”‚ â”‚ â”œâ”€observe # å“åº”å¼ç›¸å…³ä»£ç â”‚ â”‚ â”œâ”€util # ä¸€äº›å·¥å…·æ–¹æ³•â”‚ â”‚ â””â”€vdom # virtual domç›¸å…³ä»£ç ï¼ˆcreate-elementã€create-elementç­‰ï¼‰â”‚ â”œâ”€platforms # è·¨å¹³å°å…¼å®¹ï¼ˆä¾‹å¦‚weex)â”‚ â”‚ â”œâ”€web # æµè§ˆå™¨å¹³å°ï¼ˆæ—¥å¸¸å¼€å‘)â”‚ â”‚ â””â”€weex # ç±»ä¼¼rnçš„è·¨ç«¯åº”ç”¨â”‚ â”œâ”€server # æœåŠ¡å™¨SSRæ¸²æŸ“ç›¸å…³ä»£ç â”‚ â”œâ”€sfc # è§£é‡Šå™¨ï¼Œå¯ä»¥æŠŠå•æ–‡ä»¶(*.vue)ç¼–è¯‘æˆä¸€ä¸ªjså¯¹è±¡â”‚ â””â”€shared # è¾…åŠ©æ–¹æ³•ï¼Œå¯ä»¥è¢«coreæˆ–cpmpilerç­‰ç­‰ä¸Žplatformsç›®å½•å…±äº«çš„ä¸€äº›è¾…åŠ©æ–¹æ³•ä¼šæ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹â”œâ”€test # é¡¹ç›®æµ‹è¯•ç”¨ä¾‹â””â”€types # æ–°ç‰ˆæœ¬vueæ”¯æŒtypescriptï¼Œæ­¤å¤„ä¸ºtypescriptç›¸å…³å£°æ˜Žæ–‡ä»¶ package.jsonæˆ‘ä»¬å…ˆä»Žæž„å»ºçš„å…¥å£çœ‹èµ·ï¼Œæ‰“å¼€vueçš„package.jsonã€‚ 123456789101112131415161718192021// package.jsonconst vue = &#123; "name": "vue", //npmåŒ…åå­— "version": "2.6.11", // ç‰ˆæœ¬ "description": "Reactive, component-oriented view layer for modern web interfaces.", // åŒ…çš„æè¿° "main": "dist/vue.runtime.common.js", // å…¥å£ï¼Œæˆ‘ä»¬åœ¨import vueçš„æ—¶å€™ä¼šé€šè¿‡mainåŽ»æŸ¥æ‰¾å…¥å£ "module": "dist/vue.runtime.esm.js", // ç±»ä¼¼mainï¼Œåœ¨webpack2ä»¥ä¸Šä¼šæŠŠmoduleåšé»˜è®¤å…¥å£ ... ... // scriptså®šä¹‰äº†è®¸å¤šè„šæœ¬ï¼Œæ¯ä¸ªè„šæœ¬éƒ½æ˜¯ä¸€ä¸ªä»»åŠ¡ é€šè¿‡npm run ** å°±å¯ä»¥æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ "scripts": &#123; "dev": "rollup -w -c scripts/config.js --environment TARGET:web-full-dev", ... &#125; &quot;dev&quot;: &quot;rollup -w -c scripts/config.js --environment TARGET:web-full-dev&quot; åœ¨ä»‹ç»è¿™æ¡å‘½ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹rollupæ˜¯ä½•æ–¹ç¥žåœ£ã€‚ Rollupä¸ŽWebpackæˆ‘ç›¸ä¿¡å¤§å®¶åœ¨å¹³æ—¶æŠ€æœ¯é€‰åž‹çš„æ—¶å€™ï¼Œå¤§æ¦‚çŽ‡éƒ½ä¼šé€‰æ‹©webpackä½œä¸ºæž„å»ºå·¥å…·ï¼Œå› ä¸ºæˆ‘ä»¬æ·±çŸ¥webpackçš„å¼ºå¤§ï¼Œå¯ä¸ºä»€ä¹ˆvueå´é€‰æ‹©rollupä½œä¸ºæž„å»ºå·¥å…·å‘¢ï¼Œéš¾é“webpackä¸é¦™å—ï¼Ÿ webpackå¯ä»¥æŠŠå„ç§å„æ ·çš„é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€cssç­‰ï¼‰éƒ½ç¼–è¯‘æˆjsï¼Œè€Œrollupåªå¤„ç†jséƒ¨åˆ†ï¼Œä¸å¤„ç†å…¶ä»–èµ„æºã€‚ webpackå®žçŽ°äº†ä»£ç åˆ†å‰²ï¼Œå®ƒå°†æˆ‘ä»¬çš„é¡¹ç›®åˆ†å‰²æˆäº†å¤šä¸ªæ˜“äºŽç®¡ç†çš„æ¨¡å—ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®žçŽ°æŒ‰éœ€åŠ è½½ï¼Œå†ä¹Ÿä¸å¿…ç­‰å¾…æ•´ä¸ªåº”ç”¨è¢«ä¸‹è½½å¹¶è§£æžå®Œæˆæ‰å¯ä»¥ä½¿ç”¨ï¼Œè¿™æ— ç–‘ä¼šè®©æˆ‘ä»¬çš„ç”¨æˆ·æœ‰æ›´æ„‰å¿«çš„äº¤äº’ä½“éªŒï¼Œè€Œrollupå¹¶ä¸èƒ½åšåˆ°ä»£ç åˆ†å‰²ã€‚ rollçš„è®¾è®¡ç†å¿µæ˜¯æƒ³æ‰“é€ ä¸€ä¸ªå°½å¯èƒ½é«˜æ•ˆåœ°æž„å»ºã€ç²¾ç®€æ˜“åˆ†å‘çš„jsåº“ã€‚åœ¨å¤„ç†ä»£ç æ—¶ï¼Œrollupä¼šæŠŠä»£ç æ”¾åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œå¹¶ä¸”ä¼šåœ¨ä¸€èµ·è¿›è¡Œå¤„ç†ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æœ€ç»ˆå°†å¾—åˆ°æ›´åŠ ç²¾ç®€çš„ä»£ç ã€ä»¥åŠæ›´å¿«çš„è¿è¡Œé€Ÿåº¦ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œè™½ç„¶rollupæ²¡æœ‰webpacké‚£ä¹ˆå¼ºå¤§ï¼Œä½†rollupå´æ›´åŠ è½»é‡ï¼Œç¼–è¯‘åŽçš„ä»£ç ä¹Ÿæ›´åŠ å‹å¥½ï¼Œæ›´é€‚åˆå¤„ç†jsåº“ï¼Œè¿™ä¹Ÿæ­£æ˜¯Vueé€‰æ‹©rollupçš„åŽŸå› ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒVuexã€Vue-routeråŒæ ·ä½¿ç”¨äº†rollupï¼Œç”šè‡³Reactåœ¨2017å¹´ä¹Ÿå°†webpackæ›´æ¢æˆäº†rollupã€‚ å›žåˆ°åˆšåˆšçš„devå‘½ä»¤ã€‚ &quot;dev&quot;: &quot;rollup -w -c scripts/config.js --environment TARGET:web-full-dev&quot; -wï¼ˆwatchï¼‰è¡¨ç¤ºç›‘å¬æ–‡ä»¶ï¼Œä»–ä»£è¡¨åœ¨æ–‡ä»¶å‘ç”Ÿæ”¹å˜æ—¶é‡æ–°æž„å»ºã€‚ cè¡¨ç¤ºä½¿ç”¨configé…ç½®æ–‡ä»¶æ¥æ‰“åŒ…ï¼Œå¦‚æžœæ²¡æœ‰é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œå°±ä¼šä½¿ç”¨rollup.config.jsåŽ»æ‰“åŒ…ï¼Œä¸è¿‡æˆ‘ä»¬å·²ç»åŽé¢å·²ç»æŒ‡å®šäº†ä½¿ç”¨scripts/config.jsæ¥é…ç½®æ‰“åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ‰§è¡Œdevå‘½ä»¤æ—¶ï¼Œä¼šä½¿ç”¨scripts/config.jsåŽ»é…ç½®rollup â€”environmentè®¾ç½®çŽ¯å¢ƒå˜é‡ï¼ŒåŽé¢çš„TARGETè¡¨ç¤ºçŽ¯å¢ƒå˜é‡åï¼Œweb-full-devè¡¨ç¤ºçŽ¯å¢ƒå‚æ•°ã€‚ å½“ç„¶ï¼Œæœ¬ç¯‡é‡ç‚¹ä»‹ç»æž„å»ºæµç¨‹ï¼Œè€ŒVueçš„æž„å»ºï¼Œå°±æ˜¯é€šè¿‡scripté‡Œä¸Žbuildç›¸å…³çš„ä»»åŠ¡ã€‚123456789101112131415"scripts": &#123; "dev": "rollup -w -c scripts/config.js --environment TARGET:web-full-dev", ... // æž„å»ºç›¸å…³çš„ä»»åŠ¡ // build webå¹³å°çš„ä¸€äº›js "build": "node scripts/build.js", // build è¾“å‡ºserve-renderç›¸å…³ "build:ssr": "npm run build -- web-runtime-cjs,web-server-renderer", // build è¾“å‡ºweexç›¸å…³ "build:weex": "npm run build -- weex", &#125;,&#125; åœ¨æˆ‘ä»¬æ‰§è¡Œæž„å»ºçš„æ—¶å€™ï¼Œå®žé™…ä¸Šä¹Ÿå°±æ˜¯é€šè¿‡nodejsåŽ»æ‰§è¡Œä¸€äº›è„šæœ¬ï¼Œæ‹¿â€buildâ€æ¥è¯´ï¼Œå°±æ˜¯æ‰§è¡Œäº†scripts/build.jsã€‚ æž„å»ºæµç¨‹å…ˆæ¥çœ‹ä¸€ä¸‹å¤§ä½“çš„æž„å»ºæµç¨‹ï¼Œè¿›å…¥scripts/build.jsæ–‡ä»¶ã€‚ 1234567891011121314151617181920212223242526272829303132// build.js// å®šä¹‰ä¾èµ–æ¨¡å—const fs = require('fs')const path = require('path')const zlib = require('zlib')const rollup = require('rollup')const terser = require('terser')// åˆ¤æ–­æ˜¯å¦æœ‰distæ–‡ä»¶ï¼Œå¦‚æžœä¸å­˜åœ¨å°±åˆ›å»ºã€‚if (!fs.existsSync('dist')) &#123; fs.mkdirSync('dist')&#125;// ä»Žconfig.jsé‡Œæ‹¿åˆ°è¦æž„å»ºçš„æ‰€æœ‰çš„é…ç½®let builds = require('./config').getAllBuilds()// ç„¶åŽå¯¹é…ç½®åšä¸€å±‚è¿‡æ»¤ if (process.argv[2]) &#123; const filters = process.argv[2].split(',') builds = builds.filter(b =&gt; &#123; return filters.some(f =&gt; b.output.file.indexOf(f) &gt; -1 || b._name.indexOf(f) &gt; -1) &#125;)&#125; else &#123; // filter out weex builds by default builds = builds.filter(b =&gt; &#123; return b.output.file.indexOf('weex') === -1 &#125;)&#125;// æœ€ç»ˆè°ƒç”¨buildå‡½æ•°åšçœŸæ­£çš„æž„å»ºè¿‡ç¨‹build(builds) fs æ¨¡å—æ˜¯Node.jsæä¾›çš„ä¸€ç»„ç”¨äºŽä¸Žæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼ˆä»¥ç±»ä¼¼äºŽæ ‡å‡† POSIX å‡½æ•°çš„æ–¹å¼ï¼‰çš„ APIã€‚ å‚è€ƒï¼šfs.existsSync(path)fs.mkdirSync(path[, options]) èŽ·å–é…ç½®let builds = require(&#39;./config&#39;).getAllBuilds()ç„¶åŽæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹config.jsï¼Œçœ‹ä¸€ä¸‹ç©¶ç«Ÿæ˜¯å¦‚ä½•æ‹¿åˆ°çš„é…ç½®ã€‚ 12345678910111213// config.js...if (process.env.TARGET) &#123; // è¿™è¾¹å¯¹åº”åˆšåˆšpackage.jsoné‡Œçš„"dev"ä»»åŠ¡ä¼ æ¥çš„çŽ¯å¢ƒå˜é‡ï¼Œå¦‚æžœæ˜¯æ‰§è¡Œnpm run devï¼Œç›´æŽ¥æ‰§è¡Œåˆ°è¿™é‡Œã€‚ module.exports = genConfig(process.env.TARGET)&#125; else &#123; // æˆ‘ä»¬æ‰§è¡Œbuildçš„æ—¶å€™æ²¡æœ‰ä¼ TARGETè¿™ä¸ªçŽ¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°è¿™é‡ŒåŽ»å–æž„å»ºæ‰€éœ€çš„é…ç½®ã€‚ exports.getBuild = genConfig // é€šè¿‡Object.keys(builds)æ‹¿åˆ°ä¸€ä¸ªkeyçš„æ•°ç»„ï¼Œç„¶åŽé€šè¿‡mapæ–¹æ³•è°ƒç”¨genConfigå‡½æ•° exports.getAllBuilds = () =&gt; Object.keys(builds).map(genConfig)&#125; exports.getAllBuilds = () =&gt; Object.keys(builds).map(genConfig)æ¥çœ‹ä¸€ä¸‹Object.keys(builds) ä¸­çš„ builds buildså¯¹è±¡123456789101112131415161718// config.js// æ¯ä¸ªkeyéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œbuildså…¶å®žå°±æ˜¯ä¸åŒç‰ˆæœ¬vuejsçš„ç¼–è¯‘é…ç½®é›†åˆã€‚const builds = &#123; 'web-runtime-cjs-dev': &#123; /* * entry(å…¥å£) * é€šè¿‡resolveä¼ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™é‡Œé¢çš„webæ˜¯ä½œä¸ºå‡½æ•°ä¸­baseã€‚ */ entry: resolve('web/entry-runtime.js'), // destï¼ˆç›®æ ‡ï¼‰ dest: resolve('dist/vue.runtime.common.dev.js'), format: 'cjs', env: 'development', banner &#125;,&#125; å¯ä»¥çœ‹åˆ°ï¼Œentryä¸Ždestä¸­éƒ½ä½¿ç”¨äº†resolveï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸‹resolveå‡½æ•°ç©¶ç«Ÿéƒ½åšäº†äº›ä»€ä¹ˆï¼Ÿ resolve()123456789101112131415// config.jsconst aliases = require('./alias')const resolve = p =&gt; &#123; // é¦–å…ˆæŽ¥å—ä¸€ä¸ªå‚æ•°pï¼Œç„¶åŽé€šè¿‡splitæ‹¿åˆ°ç¬¬ä¸€ä¸ªå€¼ï¼Œæ‹¿resolve('web/entry-runtime.js')ä¸¾ä¾‹æ¥è¯´ï¼Œæœ€ç»ˆå¾—åˆ°çš„baseå°±æ˜¯web const base = p.split('/')[0] // ç´§æŽ¥ç€ï¼ŒåŽ»alias.jså¯»æ‰¾baseå¯¹åº”çš„alias if (aliases[base]) &#123; return path.resolve(aliases[base], p.slice(base.length + 1)) &#125; else &#123; return path.resolve(__dirname, '../', p) &#125;&#125; 1234567891011121314151617181920212223// alias.jsconst path = require('path')/* * nodejsæä¾›çš„ä¸€ä¸ªè·¯å¾„è§£æžæ–¹æ³•ï¼Œ__dirnameä¸ºå½“å‰ç›®å½•ï¼Œæ­¤å¤„ä¸ºalias.jsæ‰€åœ¨çš„ç›®å½•ã€‚ * '../' ä»£è¡¨å¾€ä¸ŠåŽ»å¯»æ‰¾ä¸€çº§ï¼Œæ­¤å¤„æ‰¾åˆ°äº†vueå¤§ç›®å½• * é€šè¿‡ä¼ å‚ï¼ˆp)æ‰¾åˆ°æœ€ç»ˆæ–‡ä»¶ */ const resolve = p =&gt; path.resolve(__dirname, '../', p)// æœ€ç»ˆå¯¼å‡ºä¸€ä¸ªå¯¹è±¡module.exports = &#123; vue: resolve('src/platforms/web/entry-runtime-with-compiler'), compiler: resolve('src/compiler'), core: resolve('src/core'), shared: resolve('src/shared'), web: resolve('src/platforms/web'), weex: resolve('src/platforms/weex'), server: resolve('src/server'), sfc: resolve('src/sfc')&#125;// aliaså…¶å®žå°±æ˜¯æä¾›äº†ä¸€ä¸ªåˆ°æœ€ç»ˆçœŸå®žæ–‡ä»¶åœ°å€çš„ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œé€šè¿‡keyçš„æ–¹å¼èŽ·å–ã€‚ 12345678910111213141516171819// config.jsconst aliases = require('./alias')const resolve = p =&gt; &#123; const base = p.split('/')[0] // åˆšåˆšæˆ‘ä»¬é€šè¿‡ resolve('web/entry-runtime.js') èŽ·å–åˆ°å€¼ä¸º'web'çš„baseï¼Œæ‰€ä»¥è¯´ï¼Œé€šè¿‡aliases[base]æ‰¾åˆ°çš„å°±æ˜¯web: resolve('src/platforms/web')è¿™ä¸ªåœ°å€ã€‚è¿™ä¸ªåœ°å€å­˜åœ¨ï¼Œæ‰€ä»¥è¿›å…¥ifæ¡ä»¶ã€‚ if (aliases[base]) &#123; return path.resolve(aliases[base], p.slice(base.length + 1)) // p.slice(base.length + 1) å®žé™…ä¸Šå°±æ˜¯resolve('web/entry-runtime.js')ä¸­çš„'entry-runtime.js'ã€‚ &#125; else &#123; return path.resolve(__dirname, '../', p) &#125;&#125; 12345678910111213// config.jsconst builds = &#123; 'web-runtime-cjs-dev': &#123; entry: resolve('web/entry-runtime.js'), // deståŒæ ·ä½¿ç”¨äº†resolveå‡½æ•°ï¼Œæ‰€ä»¥baseå€¼ä¸ºdist, ä½†æ˜¯aliasé‡Œæ²¡æœ‰é…ç½®dist, æ‰€ä»¥ä¼šèµ°resolveå‡½æ•°çš„elseé€»è¾‘ã€‚ dest: resolve('dist/vue.runtime.common.dev.js'), // formatæ˜¯æž„å»ºå‡ºçš„æ–‡ä»¶æ ¼å¼ï¼ˆdistç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä¾‹å¦‚vue.runtime.common.dev.js ï¼‰ã€‚ format: 'cjs', env: 'development', banner &#125;,&#125; æ¥çœ‹ä¸€ä¸‹æ‰“åŒ…å‡ºçš„æ–‡ä»¶ç»“å°¾ã€‚ 123456// vue.runtime.common.dev.js......module.exports = Vue; 123456// vue.runtime.esm......export default Vue; 12345678// vue.runtime.js ... ... return Vue;&#125;)); formatè¡¨ç¤ºæž„å»ºçš„æ ¼å¼ï¼Œé€šè¿‡ä¸åŒçš„æ ¼å¼æž„å»ºå‡ºä¸åŒçš„ç‰ˆæœ¬ï¼ˆå¯¼å‡ºä¸åŒæ ¼å¼çš„jsï¼‰ï¼Œâ€cjsâ€è¡¨ç¤ºéµå¾ªCommonjsè§„èŒƒã€â€umdâ€è¡¨ç¤ºéµå¾ªUMDè§„èŒƒï¼Œâ€esâ€è¡¨ç¤ºéµå¾ªES Moduleè§„èŒƒã€‚ æœ€åŽæ¥çœ‹ä¸‹bannerã€‚ 12345678910// config.js// bannerå®šä¹‰æ³¨é‡Š åº“çš„ç‰ˆæœ¬ è°åˆ›å»ºçš„ ç­‰ç­‰const banner = '/*!\n' + ` * Vue.js v$&#123;version&#125;\n` + ` * (c) 2014-$&#123;new Date().getFullYear()&#125; Evan You\n` + ' * Released under the MIT License.\n' + ' */' éšä¾¿çœ‹ä¸€ä¸ªæ‰“åŒ…å¥½çš„æ–‡ä»¶ã€‚12345678910// vue.esm.js// æ­¤å¤„å°±æ˜¯bannerç”Ÿæˆçš„ â†“â†“/*! * Vue.js v2.6.11 * (c) 2014-2019 Evan You * Released under the MIT License. *//* */ exports.getAllBuilds = () =&gt; Object.keys(builds).map(genConfig)åˆšåˆšçœ‹å®Œäº†buildsï¼Œæˆ‘ä»¬çŽ°åœ¨æ¥çœ‹ä¸€ä¸‹genConfigéƒ½åšäº†äº›ä»€ä¹ˆã€‚ genConfig()1234567891011121314151617181920212223242526272829303132333435// config.js...// é€šè¿‡object.keys(builds)æ‹¿åˆ°æ‰€æœ‰keyçš„ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åŽè°ƒç”¨genconfigå‡½æ•°ï¼Œä¹‹åŽgenConfigå°±æ‹¿åˆ°äº†æ¯ä¸ªkeyfunction genConfig (name) &#123; // optsæ˜¯é€šè¿‡builds[name]æ‹¿åˆ°ä¸€ä¸ªå¯¹è±¡ã€‚ const opts = builds[name] // ç„¶åŽé€šè¿‡optsæž„é€ å‡ºä¸€ä¸ªæ–°çš„configå¯¹è±¡ï¼Œå› ä¸ºè¿™ä¸ªconfigå¯¹è±¡çš„æ•°æ®ç»“æž„æ‰æ˜¯rollupæ‰€å¯¹åº”çš„é…ç½®ç»“æž„ï¼Œä¾‹å¦‚entryåªæ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ï¼Œä½†æ˜¯rollupé‡Œå«inputï¼Œæ‰€ä»¥éœ€è¦è½¬æ¢ã€‚ const config = &#123; input: opts.entry, external: opts.external, plugins: [ flow(), alias(Object.assign(&#123;&#125;, aliases, opts.alias)) ].concat(opts.plugins || []), output: &#123; file: opts.dest, format: opts.format, banner: opts.banner, name: opts.moduleName || 'Vue' &#125;, onwarn: (msg, warn) =&gt; &#123; if (!/Circular/.test(msg)) &#123; warn(msg) &#125; &#125; &#125; ... ... return config&#125; å…¶å®žgenConfigå°±æ˜¯æŠŠbuildsçš„é…ç½®é€šè¿‡ä¸€å±‚æ˜ å°„å’Œè½¬åŒ–ç”Ÿæˆç»ˆrollupæ‰€éœ€è¦çš„é…ç½®ï¼ˆæ•°ç»„ï¼‰ï¼Œè¿”å›žåˆ°build.jsçš„ä¸‹é¢ã€‚ å†™å…¥æ–‡ä»¶build()ã€buildEntry()ã€write()1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889// build.js// ä¹Ÿå°±æ˜¯è¯´buildæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªæ•°ç»„ã€‚let builds = require('./config').getAllBuilds()// å› ä¸ºæˆ‘ä»¬ä¼šç¼–è¯‘ç”Ÿæˆä¸åŒçš„vuejsï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šæ ¹æ®æˆ‘ä»¬ä¼ çš„å‚æ•°ä¸åŒï¼Œå¾—åˆ°æœ€ç»ˆéœ€è¦ç¼–è¯‘çš„buildsif (process.argv[2]) &#123; // è¿™é‡Œå¯¹åº”çš„å°±æ˜¯--weex --webè¿™äº›å‚æ•° // å¦‚æžœæœ‰è¿™äº›å‚æ•°ï¼Œå®ƒå°±ä¼šæ ¹æ®ä¼ çš„å‚æ•°é€šè¿‡filtersæŠŠä¸éœ€è¦çš„æ‰“åŒ…çš„ç»™è¿‡æ»¤æŽ‰ï¼Œå¦‚æžœæ²¡æœ‰å‚æ•°çš„è¯å°±æŠŠweexç»™è¿‡æ»¤æŽ‰ï¼ˆä¹Ÿå°±æ˜¯æ‰“åŒ…webå¹³å°ï¼‰ const filters = process.argv[2].split(',') builds = builds.filter(b =&gt; &#123; return filters.some(f =&gt; b.output.file.indexOf(f) &gt; -1 || b._name.indexOf(f) &gt; -1) &#125;)&#125; else &#123; // é»˜è®¤è¿‡æ»¤weex builds = builds.filter(b =&gt; &#123; return b.output.file.indexOf('weex') === -1 &#125;)&#125;// æœ€ç»ˆå¾—åˆ°æˆ‘ä»¬éœ€è¦ç¼–è¯‘çš„ï¼Œç„¶åŽè°ƒç”¨buildå‡½æ•°ã€‚build(builds)function build (builds) &#123; let built = 0 // è®¡æ•°å™¨ const total = builds.length // å®šä¹‰äº†ä¸€ä¸ªnextæ–¹æ³•ï¼Œå½“nextæ‰§è¡Œæ—¶å°±è°ƒç”¨buildEntry const next = () =&gt; &#123; buildEntry(builds[built]).then(() =&gt; &#123; built++ if (built &lt; total) &#123; next() &#125; &#125;).catch(logError) &#125; next()&#125;// æ­¤å¤„çš„configå‚æ•°å°±æ˜¯builds[built]ï¼Œä¹Ÿå°±æ˜¯ä½œä¸ºæœ€ç»ˆrollupæ‰€ç¼–è¯‘éœ€è¦çš„configfunction buildEntry (config) &#123; const output = config.output const &#123; file, banner &#125; = output const isProd = /(min|prod)\.js$/.test(file) // å‡ºå£æ–‡ä»¶ï¼ˆdestï¼‰æ˜¯å¦ä»¥minæˆ–prod.jsç»“å°¾ï¼ˆæ˜¯å¦æ˜¯ç”Ÿäº§çŽ¯å¢ƒï¼‰ return rollup.rollup(config) .then(bundle =&gt; bundle.generate(output)) // configç¼–è¯‘å®ŒåŽæ‹¿åˆ°bundle, bundleé€šè¿‡generateç”Ÿæˆoutput .then((&#123; output: [&#123; code &#125;] &#125;) =&gt; &#123; // outputå¯¹åº”æˆ‘ä»¬ç”Ÿæˆçš„ç›®æ ‡ if (isProd) &#123; // å¦‚æžœæ˜¯ç”Ÿäº§çŽ¯å¢ƒå°±å†åšä¸€æ¬¡åŽ‹ç¼© // å¯èƒ½ä¼šå¯¹codeåšä¸€äº›ä¿®æ”¹ï¼Œæ¯”å¦‚è¯´åˆ¤æ–­æ˜¯å¦éœ€è¦åŽ‹ç¼© const minified = (banner ? banner + '\n' : '') + terser.minify(code, &#123; toplevel: true, output: &#123; ascii_only: true &#125;, compress: &#123; pure_funcs: ['makeMap'] &#125; &#125;).code // æœ€ç»ˆè°ƒç”¨write return write(file, minified, true) &#125; else &#123; return write(file, code) &#125; &#125;)&#125;function write (dest, code, zip) &#123; return new Promise((resolve, reject) =&gt; &#123; function report (extra) &#123; // ç”Ÿæˆè¿‡ç¨‹ä¸­å¯ä»¥æ‰“å°ä¸€äº›logä¿¡æ¯ console.log(blue(path.relative(process.cwd(), dest)) + ' ' + getSize(code) + (extra || '')) resolve() &#125; // ç”Ÿæˆæ–‡ä»¶åˆ°distç›®å½•ä¸‹ fs.writeFile(dest, code, err =&gt; &#123; if (err) return reject(err) if (zip) &#123; zlib.gzip(code, (err, zipped) =&gt; &#123; if (err) return reject(err) report(' (gzipped: ' + getSize(zipped) + ')') &#125;) &#125; else &#123; report() &#125; &#125;) &#125;)&#125; å‚è€ƒï¼šprocess.argvfs.writeFile(file, data[, options], callback) Runtime Only ä¸Ž Runtime Compileré€šå¸¸ä½¿ç”¨vue-cliè„šæ‰‹æž¶åŽ»åˆå§‹åŒ–é¡¹ç›®çš„æ—¶å€™å°±ä¼šè¯¢é—®æˆ‘ä»¬æ˜¯ä½¿ç”¨Runtime Onlyç‰ˆæœ¬ï¼Œè¿˜æ˜¯ Runtime Compilerç‰ˆæœ¬ã€‚ Runtime Only åœ¨ä½¿ç”¨Runtime Onlyç‰ˆæœ¬æ—¶ï¼Œé€šå¸¸è¦å€ŸåŠ©webpackä¸Žvue-loaderæŠŠvueæ–‡ä»¶ç¼–è¯‘æˆJavaScriptï¼ˆå› ä¸ºåœ¨æµè§ˆå™¨ç«¯æ˜¯ä¸è®¤è¯†.vueæ–‡ä»¶çš„ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¸€æ¬¡ç¼–è¯‘ï¼‰ã€‚ åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠtemplateæ¨¡æ¿ç¼–è¯‘æˆrenderå‡½æ•°ï¼Œæ‰€ä»¥è¯´ï¼Œæœ€ç»ˆç¼–è¯‘åŽçš„æ˜¯ä¸€ä¸ªrenderå‡½æ•°ç‰ˆæœ¬ã€‚ å› ä¸ºè¿™äº›è¡Œä¸ºéƒ½æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œçš„ï¼Œç¼–è¯‘è¡Œä¸ºä¹Ÿæ˜¯åœ¨ç¦»çº¿æ—¶åšçš„ï¼Œæ‰€ä»¥Runtime OnlyåªåŒ…æ‹¬è¿è¡Œæ—¶çš„Vue.jsä»£ç ï¼Œç›¸æ¯”Runtime Compilerä½“ç§¯æ›´åŠ è½»é‡ã€‚ Runtime Compiler Runtime Compilerä¸å¯¹ä»£ç åšé¢„ç¼–è¯‘ï¼Œæ‰€ä»¥å½“ä½¿ç”¨Runtime Compilerç‰ˆæœ¬æ—¶ï¼Œè‡ªç„¶ä¸å¯ä»¥ç”¨.vueæ–‡ä»¶ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç é‡Œä½¿ç”¨templateæ¨¡æ¿ã€‚ çŽ°åœ¨çš„Vue(2.x)ï¼Œæœ€ç»ˆæ¸²æŸ“éƒ½æ˜¯é€šè¿‡renderå‡½æ•°ï¼Œæ‰€ä»¥å¦‚æžœæˆ‘ä»¬ä½¿ç”¨äº†templateå±žæ€§ï¼ŒVueåœ¨è¿è¡Œæ—¶å°±ä¼šåŠ¨æ€åœ°æŠŠæ¨¡æ¿ç¼–è¯‘æˆrenderå‡½æ•°ã€‚ 123456789101112// éœ€è¦ç¼–è¯‘new Vue(&#123; template: '&lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;'&#125;)// ä¸éœ€è¦new Vue(&#123; render(h) &#123; return h('div', this.message) &#125;&#125;) å› ä¸ºç¼–è¯‘è¿‡ç¨‹è‚¯å®šä¼šæœ‰ä¸€äº›æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥é€šå¸¸åœ¨å¼€å‘é˜¶æ®µéƒ½æŽ¨èç”¨runtime onlyç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯ä¸ºäº†è¿è¡Œæ—¶çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¸€ä¸ªæ˜¯ç¼–è¯‘å‡ºçš„vuejsä½“ç§¯ä¹Ÿä¼šå°å¾ˆå¤šã€‚ çŒ«ç‰‡ç¦åˆ©]]></content>
      <tags>
        <tag>vue</tag>
        <tag>notes</tag>
        <tag>source-code</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‘†è„±å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„ææƒ§å§ï¼èµ°è¿› JavaScript ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼]]></title>
    <url>%2F2020%2F04%2F02%2FRegExp%2F</url>
    <content type="text"><![CDATA[æˆ‘ç›¸ä¿¡æ¯ä¸ªæˆç†Ÿç¨³å¥çš„ç¨‹åºå‘˜ï¼ˆæ»‘ç¨½ï¼‰ï¼Œéƒ½æœ‰ä¸€æ®µä¸Žæ­£åˆ™ç›¸çˆ±ç›¸æ€çš„ç»åŽ†ã€‚åœ¨æˆ‘ç¬¬ä¸€æ¬¡æŽ¥è§¦æ­£åˆ™çš„æ—¶å€™ï¼Œå®ƒåœ¨æˆ‘çœ¼ä¸­å°±æ˜¯ä¸€ä¸²ä¹±ç ï¼Œå®Œå…¨ä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½†æ˜¯å½“ä½ ä½ äº†è§£æ­£åˆ™è¡¨è¾¾å¼çš„å¥—è·¯ä¹‹åŽï¼Œå…¶å®žæ­£åˆ™å°±æ˜¯ä¸€ç§ç”¨æ¥æ£€ç´¢æˆ–æŸ¥æ‰¾å­—ç¬¦çš„æ–‡å­—æ¨¡æ¿ã€‚ç®€å•æ¥è¯´ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°†æŸä¸ªå­—ç¬¦ä¸²æ¨¡å¼å°†æ‰€æœç´¢çš„å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æžœåŒ¹é…æˆåŠŸï¼Œå®ƒæ‰€åŒ¹é…åˆ°çš„å†…å®¹ä¸€å®šæ˜¯å­—ç¬¦ä¸²ä¸­çš„å†…å®¹ã€‚ â—ï¸æ­£åˆ™è¡¨è¾¾å¼çš„æ¦‚å¿µå¹¶ä¸æ˜¯JavaScriptä¸­ç‹¬æœ‰çš„ï¼Œä¾‹å¦‚Javaã€PHPç­‰ç­‰ï¼Œæœ¬æ–‡åªæŽ¢è®¨JavaScriptä¸­çš„æ­£åˆ™ã€‚ èµ°è¿›æ­£åˆ™ä¸ŽArrayã€Objectç­‰ç±»ä¼¼ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ä¸¤ç§å½¢å¼åŽ»å†™æ­£åˆ™ï¼Œä¸€ç§æ˜¯ä½¿ç”¨å­—é¢é‡å½¢å¼ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨æž„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚ å­—é¢é‡å†™æ³•123const str = 'Boom Shakalaka';const pattern = /Boom/;console.log(pattern.test(str)); // true æž„é€ å‡½æ•°å†™æ³•123const str = 'Boom Shakalaka';const pattern = new RegExp('Boom');console.log(pattern.test(str)); // true æˆ‘ä»¬æƒ³æ£€æµ‹â€™Boom Shakalakaâ€™è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«â€™Boomâ€™è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†test()æ–¹æ³•ï¼Œtest()æ–¹æ³•æ‰§è¡Œä¸€ä¸ªæ£€ç´¢ï¼Œç”¨æ¥æŸ¥çœ‹æ­£åˆ™è¡¨è¾¾å¼ä¸ŽæŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ã€‚è¿”å›ž true æˆ– falseã€‚å¾ˆæ˜¾ç„¶ï¼Œâ€™Boom Shakalakaâ€™ä¸­åŒ…å«äº†â€™Boomâ€™ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰“å°å‡ºçš„å€¼ä¸ºtrueã€‚ æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨exec()æ–¹æ³•æ¥è¿›è¡Œæ£€æµ‹ï¼Œexec() æ–¹æ³•è¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œå®Œå…¨åŒ¹é…æˆåŠŸçš„æ–‡æœ¬å°†ä½œä¸ºè¿”å›žæ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼Œä»Žç¬¬äºŒé¡¹èµ·ï¼ŒåŽç»­æ¯é¡¹éƒ½å¯¹åº”æ­£åˆ™è¡¨è¾¾å¼å†…æ•èŽ·æ‹¬å·é‡ŒåŒ¹é…æˆåŠŸçš„æ–‡æœ¬ã€‚1234const str = 'Boom Shakalaka';const pattern = new RegExp('Boom');console.log(pattern.exec(str));// ["Boom", index: 0, input: "Boom Shakalaka", groups: undefined] æ¨¡å¼ä¿®é¥°ç¬¦è¿˜æ˜¯åˆšåˆšé‚£ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åšä¸€ç‚¹å°æ”¹åŠ¨ï¼ŒæŠŠBoomæ”¹æˆboomã€‚123const str = 'Boom Shakalaka';const pattern = /boom/;console.log(pattern.test(str)); // false, æ­¤æ—¶å¹¶æ²¡æœ‰åŒ¹é…åˆ°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³ä¸åŒºåˆ†å¤§å°å†™åŽ»åŒ¹é…å­—ç¬¦çš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨æ­£åˆ™ä¸­çš„æ¨¡å¼ä¿®é¥°ç¬¦ã€‚123const str = 'Boom Shakalaka';const pattern = /boom/i;console.log(pattern.test(str)); // true è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†æ¨¡å¼ä¿®é¥°ç¬¦â€œiâ€, iè¡¨ç¤ºignore case, ä¹Ÿå°±æ˜¯å¿½ç•¥å¤§å°å†™ï¼Œå…¶ä½™çš„æ¨¡å¼ä¿®é¥°ç¬¦è¿˜æœ‰g: global å…¨å±€åŒ¹é…ï¼Œm: multiline å¤šè¡ŒåŒ¹é…ã€‚ â­ï¸è¿™ä¸‰ä¸ªå­—ç¬¦å¯ä»¥éšæ„è¿›è¡Œç»„åˆã€‚ æž„é€ å‡½æ•°å†™æ³•123const str = 'Boom Shakalaka';const pattern = new RegExp('boom', 'i');console.log(pattern.test(str)); // true å­—ç¬¦ç±»åœ¨ä¹‹å‰æˆ‘ä»¬æ‰€æŽ¥è§¦çš„ä¾‹å­ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªå­—ç¬¦å¯¹åº”äº†å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³åœ¨â€™fsaxcvbnâ€™ä¸­é€‰å‡ºâ€™abcâ€™ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦çš„è¯ï¼Œæ›¿æ¢æˆâ€œ*â€å·ï¼Œè¿™æ ·çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—ç¬¦ç±»æ¥å®žçŽ°ã€‚123const str = 'fsaxcvbn';const pattern = /[abc]/g; // ç”¨åˆ°äº†æ¨¡æ¿ä¿®é¥°ç¬¦ä¸­çš„å…¨å±€åŒ¹é…console.log(str.replace(pattern, '*')); // fs*x*v*n åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨[]æ¥æž„å»ºä¸€ä¸ªç®€å•çš„ç±»ï¼Œç±»ä¸­æŠŠa/b/cå½’ä¸ºäº†ä¸€ç±»ï¼Œä»£è¡¨å¯ä»¥åŒ¹é…è¿™ä¸€ç±»ä¸­çš„å­—ç¬¦ï¼Œç”±æ­¤å¯è§ï¼Œæ‰€è°“ç±»æ˜¯æŒ‡ç¬¦åˆæŸäº›ç‰¹æ€§çš„ä¸€ä¸ªæ³›æŒ‡ï¼Œè€Œä¸æ˜¯ç‰¹æŒ‡æŸä¸€ä¸ªå­—ç¬¦ã€‚ åå‘å­—ç¬¦ç±»æˆ‘ä»¬å¯ä»¥åœ¨ç±»çš„å¼€å¤´åŠ ä¸€ä¸ªâ€œ^â€ç¬¦å·ï¼Œæ¥è¡¨ç¤ºåŒ¹é…é™¤å½“å‰å­—ç¬¦ç±»ä»¥å¤–çš„å­—ç¬¦ã€‚123const str = 'fsaxcvbn';const pattern = /[^abc]/g; // ç”¨åˆ°äº†æ¨¡æ¿ä¿®é¥°ç¬¦ä¸­çš„å…¨å±€åŒ¹é…console.log(str.replace(pattern, '*')); // **a*c*b* èŒƒå›´ç±»å¦‚æžœæˆ‘ä»¬æƒ³åŒ¹é…å…¨éƒ¨çš„å­—æ¯ï¼Œæ¥è½¬åŒ–ä¸ºâ€œ*â€ç¬¦åˆï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å­—ç¬¦ç±»ä¸­å°±è¦è¾“å…¥26ä¸ªå­—æ¯ï¼Œé‚£æ ·çš„è¯æœªå…ä¹Ÿå¤ªé•¿äº†ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŒƒå›´ç±»åŽ»ç»™å®šä¸€ä¸ªèŒƒå›´ï¼Œä»£è¡¨æˆ‘ä»¬è¦åŒ¹é…è¿™ä¸ªèŒƒå›´å†…çš„æ–‡å­—ã€‚123const str = 'DIOï¼šæˆ‘ä¸åšäººäº†JOJO';const pattern = /[a-z]/gi;console.log(str.replace(pattern, '*')); // ***ï¼šæˆ‘ä¸åšäººäº†**** å½“ç„¶ï¼Œ[A-Z][c-e][0-9][\u4e00-\u9fa5]æˆ–è€…ç»„åˆä½¿ç”¨[a-z0-9@_]éƒ½æ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡ä½¿ç”¨èŒƒå›´ç±»æœ‰ä¸€ä¸ªåŽŸåˆ™ï¼Œå°±æ˜¯å‰é¢çš„èŒƒå›´èµ·ç‚¹ä¸€å®šè¦å°äºŽç­‰äºŽåŽé¢çš„èŒƒå›´ç»ˆç‚¹ï¼ˆä¾‹å¦‚[z-a]ï¼‰ï¼Œä¸ç„¶å°±ä¼šæŠ¥é”™ã€‚ å…ƒå­—ç¬¦æ­£åˆ™ä¸­æœ‰ä¸€ç§å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ï¼Œå«ä½œå…ƒå­—ç¬¦ï¼Œä¾‹å¦‚^/b/wï¼Œå¾ˆå¤šäººåˆšæŽ¥è§¦æ­£åˆ™æ—¶è§‰å¾—ä¸€è„¸æ‡µ*å¤§æ¦‚çŽ‡éƒ½æ˜¯å…ƒå­—ç¬¦çš„é”…ã€‚ æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥ç”¨å…ƒå­—ç¬¦\wæ¥ä»£æ›¿ï¼Œä¸Žä¹‹ç›¸å¯¹ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³åŒ¹é…é™¤å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨\wçš„åä¹‰\WåŽ»åŒ¹é…ã€‚ ä¸‹é¢æ¥çœ‹ä¸€äº›å¸¸ç”¨çš„å…ƒå­—ç¬¦ã€‚ å…ƒå­—ç¬¦ æè¿° . åŒ¹é…é™¤æ¢è¡Œç¬¦å’Œè¡Œç»“æŸç¬¦ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ \w åŒ¹é…0-9ã€a-zã€A-Z \W ä¸Ž\wç›¸åï¼ŒåŒ¹é…éž0-9ã€a-zã€A-Zçš„å­—ç¬¦ \d åŒ¹é…0-9ï¼Œç­‰åŒäºŽ[0-9] \D åŒ¹é…é™¤0-9ä»¥å¤–çš„å­—ç¬¦ï¼Œç­‰åŒäºŽ0-9 \n åŒ¹é…æ¢è¡Œç¬¦ \s åŒ¹é…ç©ºæ ¼ä¸Žåˆ¶è¡¨ç¬¦ \S åŒ¹é…é™¤ç©ºæ ¼ä¸Žåˆ¶è¡¨ç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦ \t åŒ¹é…åˆ¶è¡¨ç¬¦ \b åŒ¹é…å•è¯è¾¹ç•Œ \B åŒ¹é…éžå•è¯è¾¹ç•Œ ^ åŒ¹é…å­—ç¬¦ä¸²èµ·å§‹ä½ç½® $ åŒ¹é…å­—ç¬¦ä¸²ç»“æŸä½ç½® \xnn ç”±16è¿›åˆ¶æ•°nnæŒ‡å®šçš„æ‹‰ä¸å­—ç¬¦(eg.\x0A&lt;=&gt;\n) \uxxxx ç”±16è¿›åˆ¶æ•°xxxxæŒ‡å®šçš„Unicodeå­—ç¬¦(eg.\u0009&lt;=&gt;\t); å¸¸ç”¨æ¥åŒ¹é…æ±‰å­— æ³¨æ„æ­¤å¤„çš„^ä¸Žä¸­çš„^æ„æ€ä¸åŒï¼Œæ­¤å¤„çš„^æŒ‡ä»£å­—ç¬¦ä¸²èµ·ç‚¹ã€‚ä¸­æ–‡å­—ç¬¦çš„å…ƒå­—ç¬¦èŒƒå›´æ˜¯[\u4e00-\u9fa5]ã€‚ æ¥çœ‹ä¸€ä¸ªä½¿ç”¨å…ƒå­—ç¬¦çš„ç®€å•ä¾‹å­ã€‚ 123const str = ' 1å“ˆå“ˆå“ˆ';const pattern = /[\s\d]/g //å…¨å±€åŒ¹é…ç©ºæ ¼æˆ–æ•°å­—console.log(str.replace(pattern, '~')); // ~~å“ˆå“ˆå“ˆ å­—ç¬¦è½¬ä¹‰å…ƒå­—ç¬¦å…¶å®žå°±æ˜¯è¢«èµ‹äºˆäº†ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³è¦åŽ»åŒ¹é…å…ƒå­—ç¬¦æœ¬èº«çš„å­—ç¬¦ï¼Œæ¯”å¦‚â€œ.â€ï¼Œå°±æ²¡æ³•ä½¿ç”¨â€œ.â€æ¥åŒ¹é…äº†ï¼Œå®ƒä¼šè¢«è§£é‡Šæˆåˆ«çš„æ„æ€ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨è½¬ä¹‰å­—ç¬¦â€œ/â€æ¥å–æ¶ˆè¿™ç±»ç‰¹æ®Šå­—ç¬¦çš„æ„ä¹‰ï¼Œæˆ‘ä»¬è¯¥åŽ»ç”¨â€œ/.â€åŽ»æŸ¥æ‰¾â€œ.â€ã€‚å½“ç„¶ï¼Œå¦‚æžœæƒ³æŸ¥æ‰¾â€œ/â€æœ¬èº«ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ç”¨â€œ//â€ã€‚ 123const str = 'å¥½å§...';const pattern = /\.+/console.log(str.replace(pattern, 'ðŸ˜­')); // å¥½å§ðŸ˜­ æˆ‘ä»¬ä¸Šé¢çš„â€œâ€¦â€è¢«æ›¿æ¢æˆäº†emojiè¡¨æƒ…ï¼Œå˜æˆäº†â€œå¥½å§ðŸ˜­â€ï¼Œæˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œæ­£åˆ™ä¸­çš„ä¸€ä¸ªå­—ç¬¦å¯¹åº”äº†å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥å¯ä»¥æŠŠä¸‰ä¸ªâ€œ.â€æ›¿æ¢æˆä¸€ä¸ªâ€œðŸ˜­â€ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„é™å®šç¬¦â€œ+â€ã€‚ é‡å¤ï¼ˆé™å®šç¬¦ï¼‰é¡¾åæ€ä¹‰ï¼Œé™å®šç¬¦å°±æ˜¯ç”¨æ¥é™å®šæ­£åˆ™è¡¨è¾¾å¼æ‰€åŒ¹é…çš„å­—ç¬¦å‡ºçŽ°äº†å¤šå°‘æ¬¡æ‰èƒ½åŒ¹é…æˆåŠŸçš„å­—ç¬¦ã€‚ é™å®šç¬¦ æè¿° {n} é‡å¤næ¬¡ {n,} é‡å¤næ¬¡æˆ–é‡å¤å¤§äºŽnæ¬¡ {n,m} é‡å¤nåˆ°mæ¬¡ + é‡å¤ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰åŒä¸Ž{1,} ï¼Ÿ é‡å¤0æ¬¡æˆ–1æ¬¡ï¼Œç­‰åŒä¸Ž{0,1} * é‡å¤ä»»æ„æ¬¡ï¼ˆ0æˆ–å¤šæ¬¡ï¼‰ï¼Œç­‰åŒä¸Ž{0,} 12345678910111213141516171819202122232425const str = '0123456789';const pattern = /\d&#123;3&#125;/ // åŒ¹é…3æ¬¡console.log(pattern.exec(str));// ["012", index: 0, input: "0123456789", groups: undefined]const pattern2 = /\d&#123;1,&#125;/ // åŒ¹é…1æ¬¡æˆ–ä»¥ä¸Šconsole.log(pattern2.exec(str));// ["0123456789", index: 0, input: "0123456789", groups: undefined]const pattern3 = /\d&#123;3,5&#125;/ // åŒ¹é…3-5æ¬¡console.log(pattern3.exec(str));// ["01234", index: 0, input: "0123456789", groups: undefined]const pattern4 = /\d?/; //åŒ¹é…0æ¬¡æˆ–1æ¬¡ /\d&#123;0,1&#125;/console.log(pattern4.exec(str));// ["0", index: 0, input: "0123456789", groups: undefined]const pattern5 = /\d+/; //è‡³å°‘åŒ¹é…1æ¬¡ /\d&#123;1,&#125;/console.log(pattern5.exec(str));// ["0123456789", index: 0, input: "0123456789", groups: undefined]const pattern6 = /\d*/; //é›¶æ¬¡æˆ–æ›´å¤šconsole.log(pattern6.exec(str));// ["0123456789", index: 0, input: "0123456789", groups: undefined] æœ€è¿‘å› ä¸ºç–«æƒ…åœ¨å®¶ä¸€ç›´åœ¨åƒå¤–å–ï¼Œæˆ‘ä»¬å†™ä¸ªå°ä¾‹å­æ¥å°è¯•åŒ¹é…ä¸‹å¤–å–çš„ä»·æ ¼ã€‚1234const str = 'å¤–å–å¥—é¤: $15.5';const pattern = /\d+\.?\d*/console.log(pattern.exec(str));// ["15.5", index: 7, input: "å¤–å–å¥—é¤: $15.5", groups: undefined] æˆ‘ä»¬æ¥åˆ†æžä¸‹è¿™æ®µæ­£åˆ™ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åŒ¹é…1ä½ä»¥ä¸Šçš„æ•°å­—ï¼Œæ‰€ä»¥ç”¨/d+ï¼Œå¹¶ä¸”ä»·æ ¼ä¸ä¸€å®šæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å°æ•°ï¼Œæ‰€ä»¥ç”¨è½¬ä¹‰å­—ç¬¦åŠ ä¸Šå°æ•°ç‚¹â€œ.â€ï¼ŒåŽè·Ÿä¸Šâ€œ?â€è¡¨ç¤º0æ¬¡è´§æˆ–1æ¬¡ï¼Œç´§æŽ¥ç€è·Ÿå°æ•°ç‚¹åŽnä½æ•°å­—ï¼Œè¿™ä¸ªæ•°å­—æœ‰å¯èƒ½æ˜¯0ä½ä¹Ÿæœ‰å¯èƒ½æ˜¯å¤šä½ï¼Œæ‰€ä»¥ç”¨â€œ\d*â€ã€‚ ä¸Šé¢è¿™æ®µæ­£åˆ™ç­‰ä»·äºŽ â†“â†“1const pattern = /\d&#123;1,&#125;\.&#123;0,1&#125;\d&#123;0,&#125;/; éžè´ªå©ªçš„é‡å¤æ­£åˆ™åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯è´ªå©ªçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ¡ä»¶å…è®¸ï¼Œæ­£åˆ™éƒ½ä¼šå°½å¯èƒ½å¤šçš„åŽ»åŒ¹é…ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³å°½å¯èƒ½å°‘åŽ»åŒ¹é…ï¼Œå°±éœ€è¦ä½¿ç”¨ä¸€ä¸ªâ€œ?â€æŠŠæ­£åˆ™è½¬åŒ–æˆéžè´ªå©ªåŒ¹é…ã€‚ çœ‹ä¸€ä¸ªå°ä¾‹å­ã€‚12345678910const domStr='&lt;td&gt;&lt;p&gt;a&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;b&lt;/p&gt;&lt;/td&gt;';const patternDom = /&lt;td&gt;.*&lt;\/td&gt;/;console.log(patternDom.exec(domStr));// ä¼šä¸€ç›´åŒ¹é…åˆ°æœ€åŽ// ["&lt;td&gt;&lt;p&gt;a&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;b&lt;/p&gt;&lt;/td&gt;", index: 0, input: "&lt;td&gt;&lt;p&gt;a&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;b&lt;/p&gt;&lt;/td&gt;", groups: undefined]const patternDom2 = /&lt;td&gt;.*?&lt;\/td&gt;/;console.log(patternDom2.exec(domStr));// å˜æˆäº†å°½å¯èƒ½å°‘çš„åŒ¹é…// ["&lt;td&gt;&lt;p&gt;a&lt;/p&gt;&lt;/td&gt;", index: 0, input: "&lt;td&gt;&lt;p&gt;a&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;b&lt;/p&gt;&lt;/td&gt;", groups: undefined] é€‰æ‹©ã€åˆ†ç»„ä¸Žåå‘å¼•ç”¨é€‰æ‹©æ­£åˆ™é‡Œçš„é€‰æ‹©ï¼ˆä¹Ÿå¯ä»¥å«åˆ†æ”¯æ¡ä»¶ï¼‰è¡¨ç¤ºçš„æ˜¯æˆ‘ä»¬ç»™å‡ºå‡ ç§ä¸åŒçš„è§„åˆ™ï¼Œå½“ç¬¦åˆä»»æ„ä¸€ç§è§„åˆ™æ—¶ï¼Œéƒ½ç®—ä½œåŒ¹é…æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç®¡é“ç¬¦â€œ|â€åˆ’åˆ†è§„åˆ™ã€‚1234const str = 'Hello world';const pattern = /universe|world/console.log(pattern.exec(str));// ["world", index: 6, input: "Hello world", groups: undefined] åˆ†ç»„å¦‚æžœè¯´é™å®šç¬¦å¯ä»¥é‡å¤å•ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆä½¿ç”¨ç²‰ç»„ä»¶å°±å¯ä»¥é‡å¤å¤šä¸ªå­—ç¬¦ã€‚1234const str = 'abab';const pattern = /(ab)+/;console.log(pattern.exec(str));// ["abab", "ab", index: 0, input: "abab", groups: undefined] æ­¤æ—¶æˆ‘ä»¬å‘çŽ°åŒ¹é…åˆ°äº†â€œababâ€ï¼Œå¹¶ä¸”è¿”å›žæ•°ç»„çš„ç¬¬äºŒä¸ªç´¢å¼•ä½ç½®ä¸ºâ€œabâ€ï¼Œæˆ‘ä»¬ä¸Šæ–‡æœ‰è®²è¿‡ï¼Œexec()æ–¹æ³•è¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œå®Œå…¨åŒ¹é…æˆåŠŸçš„æ–‡æœ¬å°†ä½œä¸ºè¿”å›žæ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼Œä»Žç¬¬äºŒé¡¹èµ·ï¼ŒåŽç»­æ¯é¡¹éƒ½å¯¹åº”æ­£åˆ™è¡¨è¾¾å¼å†…æ•èŽ·æ‹¬å·é‡ŒåŒ¹é…æˆåŠŸçš„æ–‡æœ¬ã€‚æ­¤å¤„çš„æ•èŽ·æ‹¬å·ï¼ŒæŒ‡çš„å°±æ˜¯åˆ†ç»„ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªç´¢å¼•è¿”å›žçš„æ˜¯åˆ†ç»„é‡Œçš„â€œabâ€ã€‚ éžæ•èŽ·åˆ†ç»„ä½†æœ‰äº›æ—¶å€™æˆ‘ä»¬ä¸å¸Œæœ›åˆ†ç»„å†…çš„ä¸œè¥¿è¢«æ•èŽ·åˆ°ï¼Œè¿™ç§æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨éžæ•èŽ·æ€§åˆ†ç»„(?:)ï¼Œç„¶åŽå¯¹ç€æ‹¬å·é‡Œçš„å­—ç¬¦è¯´ä¸€å¥â€œä½ ä¸é…ã€‚â€1234const str = 'abcd';const pattern = /(?:ab)c/;console.log(pattern.exec(str));// ["abc", index: 0, input: "abcd", groups: undefined] ç”±æ­¤å¯è§ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰åŒ¹é…åˆ†ç»„ä¸­çš„abã€‚ åµŒå¥—åˆ†ç»„1234const str = 'abcd';const pattern = /(a(b(c)))/;console.log(pattern.exec(str));// ["abc", "abc", "bc", "c", index: 0, input: "abcd", groups: undefined] æˆ‘ä»¬å¯èƒ½ä¼šé‡ä¸Šåˆ†ç»„é‡Œå†æ¬¡è¿›è¡Œåˆ†ç»„çš„æ­£åˆ™ï¼Œè¿™ç§æ­£åˆ™å«ä½œåµŒå¥—åˆ†ç»„ï¼ŒåµŒå¥—åˆ†ç»„ä¹ä¸€çœ‹å¾ˆä¹±ï¼Œä¸è¿‡åªè¦ä»Žå·¦å¼€å§‹æ•°å·¦æ‹¬å·å°±å¯ä»¥äº†ã€‚ åå‘å¼•ç”¨åœ¨æˆ‘ä»¬ä½¿ç”¨()æŒ‡å®šä¸€ç»„åˆ†ç»„æ—¶ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåˆ†ç»„éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªç»„å·ï¼Œç»„å¥½ä»¥1ä¸ºèµ·ç‚¹ï¼Œä»Žå·¦å¾€å³æ•°ï¼Œç¬¬ä¸€ä¸ªåˆ†ç»„çš„ç»„å·ä¸º1ï¼Œç¬¬äºŒä¸ªä¸º2ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»„å·åŽ»å¼•ç”¨å®ƒå¯¹åº”çš„åˆ†ç»„ã€‚ å‡å®šæˆ‘ä»¬è¦åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªæœ‰åµŒå¥—å…³ç³»çš„HTMLæ ‡ç­¾å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚1&lt;div&gt;&lt;p&gt;Hi ~~&lt;/p&gt;&lt;/div&gt; ä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“æœ€å¤–å±‚çš„æ ‡ç­¾æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬è¯¥æ€Žæ ·åŽ»å†™è¿™ä¸ªæ­£åˆ™å‘¢ï¼Ÿ1const pattern = /&lt;([a-zA-Z]+)&gt;(.*)&lt;\/([a-zA-Z]+)&gt;/; é¦–å…ˆï¼Œæˆ‘ä»¬å†™ä¸Š&lt;&gt;, æ ‡ç­¾å¯èƒ½æ˜¯å¤§å†™ä¹Ÿå¯èƒ½æ˜¯å°å†™ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨äº†ä¸€ä¸ªå­—ç¬¦ç±»[a-zA-z]æ¥åŒ¹é…ï¼Œå¹¶ä¸”ç”¨é™å®šç¬¦â€œ+â€åŒ¹é…1ä½åŠä»¥ä¸Šçš„å­—æ¯ï¼Œç„¶åŽç”¨ç¬¬äºŒä¸ªåˆ†ç»„(.*)æ¥è¡¨ç¤ºä¹‹é—´çš„æ‰€æœ‰å†…å®¹ï¼Œè¯æ˜Žæœ‰0ä¸ªæˆ–å¤šä¸ªé™¤æ¢è¡Œç¬¦å’Œç©ºæ ¼ä»¥å¤–çš„å­—ç¬¦ï¼Œæœ€åŽä½¿ç”¨è½¬ä¹‰å­—ç¬¦ç»“å°¾ã€‚ åœ¨ä¸Šé¢é‚£ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åŒä¸€ä¸ªåˆ†ç»„([a-zA-Z]+)åœ¨æ­£åˆ™ä¸­å†™äº†ä¸¤æ¬¡ï¼Œè¿™ç§è™½ç„¶å¯ä»¥åŒ¹é…ä¸Šï¼Œä½†æ˜¯ä¸ç¾Žè§‚ï¼Œä¹Ÿæ›´å®¹æ˜“å‡ºé”™ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆšåˆšæèµ·çš„å¼•ç”¨æ¥æ”¹å†™ä¸€ä¸‹ã€‚1const pattern = /&lt;([a-zA-Z]+)&gt;(.*)&lt;\/\1&gt;/; æ­¤å¤„ä½¿ç”¨äº†å¼•ç”¨ç¬¦å·â€œ\1ï¼ˆéœ€è¦è½¬ä¹‰å­—ç¬¦ï¼‰â€æ¥åŒ¹é…ä¸Žç¬¬ä¸€ä¸ªåˆ†ç»„ç›¸åŒçš„å­—ç¬¦ï¼Œæ­¤æ—¶ç»“å°¾å¤„æ‰€åŒ¹é…ä¸Šçš„å­—ç¬¦ä¸€å®šç­‰åŒäºŽç¬¬ä¸€ä¸ªåˆ†ç»„æ‰€åŒ¹é…åˆ°çš„å­—ç¬¦ã€‚ é›¶å®½æ–­è¨€ä¸Žè´Ÿå‘é›¶å®½æ–­è¨€é›¶å®½æ–­è¨€ç”¨äºŽæŸ¥æ‰¾åœ¨æŸäº›å†…å®¹(ä½†å¹¶ä¸åŒ…æ‹¬è¿™äº›å†…å®¹)ä¹‹å‰æˆ–ä¹‹åŽçš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬åƒ\b,^,$é‚£æ ·ç”¨äºŽæŒ‡å®šä¸€ä¸ªä½ç½®ï¼Œè¿™ä¸ªä½ç½®åº”è¯¥æ»¡è¶³ä¸€å®šçš„æ¡ä»¶(å³æ–­è¨€)ï¼Œå› æ­¤å®ƒä»¬ä¹Ÿè¢«ç§°ä¸ºé›¶å®½æ–­è¨€ã€‚æ­£å‘é›¶å®½æ–­è¨€(é›¶å®½åº¦æ­£é¢„æµ‹å…ˆè¡Œæ–­è¨€)ä¸Žè´Ÿå‘é›¶å®½æ–­è¨€(é›¶å®½åº¦æ­£å›žé¡¾åŽå‘æ–­è¨€)ä¹Ÿå«å‰çž»æ€§åŒ¹é…ä¸Žè´Ÿå‘å‰çž»æ€§åŒ¹é…ï¼Œè¿™äº›åå­—æŒ‘ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„å«å§ï¼Œå› ä¸ºæˆ‘ä¹Ÿè®°ä¸ä½é‚£ä¹ˆå¤šï¼Œå“ˆå“ˆå“ˆ ~ã€‚ æ­£å‘é›¶å®½æ–­è¨€æ­£å‘é›¶å®½æ–­è¨€ç”¨(?=)æ¥è¡¨ç¤ºåŒ¹é…åŽé¢è·Ÿxxå­—ç¬¦çš„å‰å­—ç¬¦ï¼Œå¬ç€æœ‰ç‚¹ä¹±æ˜¯ä¸æ˜¯ï¼Œæ¥çœ‹ä¸€ä¸ªå°ä¾‹å­ã€‚1234const str='java javascript';const pattern = /java(?=script)/;console.log(pattern.exec(str));// ["java", index: 5, input: "java javascript", groups: undefined] æˆ‘ä»¬åŒ¹é…åˆ°äº†javaï¼Œä½†æˆ‘ä»¬åŒ¹é…åˆ°çš„javaå¹¶ä¸æ˜¯ç¬¬ä¸€ä¸ªjavaï¼Œè€Œæ˜¯javascriptä¸­çš„â€œjavaâ€ï¼ŒåŒ¹é…ä»¥â€œscriptâ€ç»“å°¾çš„â€œjavaâ€ã€‚ å±å¹•å‰çš„å°æœºçµé¬¼ï¼Œå°±æ˜¯ä½ ï¼æ­¤åˆ»è‚¯å®šæƒ³åˆ°äº†ä¸Žä¹‹ç›¸åçš„å°±æ˜¯è´Ÿå‘é›¶å®½æ–­è¨€ï¼Œä½ çŒœå¯¹äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚ è´Ÿå‘é›¶å®½æ–­è¨€è´Ÿå‘çš„é›¶å®½æ–­è¨€ç”¨(?!)æ¥è¡¨ç¤ºï¼ŒåŒ¹é…åŽé¢ä¸æŽ¥xxå­—ç¬¦çš„å‰å­—ç¬¦ã€‚1234const str='java javascript';const pattern = /java(?!script)/;console.log(pattern.exec(str));// ["java", index: 5, input: "java javascript", groups: undefined] æ­¤æ—¶åŒ¹é…åˆ°çš„javaæ˜¯ç¬¬ä¸€ä¸ªjavaï¼Œä¸å†æ˜¯javascriptä¸­çš„javaäº†ã€‚ RegExpå¯¹è±¡çš„å®žä¾‹å±žæ€§1234567const str='Hello world Hello';const pattern=/hello/ig;console.log(pattern.ignoreCase); // åˆ¤æ–­æœ‰æ²¡æœ‰iconsole.log(pattern.global); // åˆ¤æ–­æœ‰æ²¡æœ‰gconsole.log(pattern.multiline); // åˆ¤æ–­æœ‰æ²¡æœ‰mconsole.log(pattern.source); // è¿”å›žå­—é¢é‡å¯¹åº”å½¢å¼å¯¹åº”çš„å­—ç¬¦ä¸²console.log(pattern.lastIndex); // è¿”å›žå­—é¢é‡å¯¹åº”å½¢å¼å¯¹åº”çš„å­—ç¬¦ä¸² lastIndexå±žæ€§æˆ‘ä»¬å¯èƒ½ä¼šå¯¹lastIndexæœ‰ä¸€ç‚¹ç–‘é—®ï¼Œå½“æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ â€œgâ€ ä¿®é¥°ç¬¦æ—¶ï¼Œå¯ä»¥å¤šæ¬¡æ‰§è¡Œ exec()æ–¹æ³•æ¥æŸ¥æ‰¾åŒä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æˆåŠŸåŒ¹é…ã€‚å½“ä½ è¿™æ ·åšæ—¶ï¼ŒæŸ¥æ‰¾å°†ä»Žæ­£åˆ™è¡¨è¾¾å¼çš„ lastIndex å±žæ€§æŒ‡å®šçš„ä½ç½®å¼€å§‹ã€‚ï¼ˆtest() ä¹Ÿä¼šæ›´æ–° lastIndex å±žæ€§ï¼‰ã€‚æ³¨æ„ï¼Œå³ä½¿å†æ¬¡æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ä¸æ˜¯åŽŸæŸ¥æ‰¾å­—ç¬¦ä¸²æ—¶ï¼ŒlastIndex ä¹Ÿä¸ä¼šè¢«é‡ç½®ï¼Œå®ƒä¾æ—§ä¼šä»Žè®°å½•çš„ lastIndex å¼€å§‹ã€‚ ç¿»è¯‘ä¸€ä¸‹ï¼Œå°±æ˜¯å½“æˆ‘ä»¬åœ¨éžå…¨å±€åŒ¹é…çš„æ¨¡å¼ä¸‹ï¼Œexec()æ–¹æ³•åªä¼šåŒ¹é…ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å­—ç¬¦ï¼Œä½†æ˜¯ï¼Œå¦‚æžœæˆ‘ä»¬åœ¨å…¨å±€åŒ¹é…ä¸‹ï¼Œåˆ™å¯ä»¥å¾ªçŽ¯ä½¿ç”¨exec()æ–¹æ³•æ¥å¾—åˆ°æ‰€æœ‰çš„åŒ¹é…ï¼Œç›´åˆ°exec()çš„è¿”å›žå€¼å˜ä¸ºnullä¸ºæ­¢ï¼Œå†æ¬¡ä½¿ç”¨exec()ä¼šæ‰§è¡Œæ–°ä¸€è½®çš„æŸ¥æ‰¾åŒ¹é…ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥å¯ä»¥ä½¿ç”¨exec()æ–¹æ³•å¾ªçŽ¯åŒ¹é…ï¼Œé çš„å°±æ˜¯lastIndexçš„å€¼ï¼Œå› ä¸ºå¸¦å…¨å±€ä¿®é¥°ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼æ¯æ¬¡åŒ¹é…åŽéƒ½ä¼šæ›´æ–°lastIndexçš„å€¼ä½œä¸ºä¸‹æ¬¡æŸ¥æ‰¾åŒ¹é…çš„èµ·ç‚¹ï¼Œå³ä½¿æˆ‘ä»¬æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å‘ç”Ÿæ”¹å˜ï¼ŒlastIndexä¹Ÿä¸ä¼šè¢«é‡ç½®ã€‚ 1234567891011121314151617181920212223242526272829303132333435let str='js js js';const pattern=/js/g; //å…¨å±€console.log(pattern.exec(str));console.log(pattern.lastIndex);// ["js", index: 0, input: "js js js", groups: undefined]// 2// indexä¸º0è¡¨ç¤ºä»Žç´¢å¼•ä¸º0çš„ä½ç½®åŒ¹é…åˆ°â€œjsâ€, 2è¡¨ç¤ºä¸‹æ¬¡æŸ¥æ‰¾çš„èµ·ç‚¹ç´¢å¼•// ä»¥æ­¤ç±»æŽ¨console.log(pattern.exec(str));console.log(pattern.lastIndex);// ["js", index: 3, input: "js js js", groups: undefined]// 5console.log(pattern.exec(str));console.log(pattern.lastIndex);// ["js", index: 6, input: "js js js", groups: undefined]// 8console.log(pattern.exec(str));console.log(pattern.lastIndex);// null// 0// æ²¡æœ‰æ‰¾åˆ°ï¼Œé‡ç½®lastIndexconsole.log(pattern.exec(str));console.log(pattern.lastIndex);// ["js", index: 0, input: "js js js", groups: undefined]// 2str='js Hello js'; // æ”¹å˜å­—ç¬¦ä¸²console.log(pattern.exec(str));console.log(pattern.lastIndex);// ["js", index: 9, input: "js Hello js js", groups: undefined]// 11 ç´¢å¼•å¹¶æœªé‡ç½® æž„é€ å‡½æ•°å±žæ€§ä¸ŽRegExpå¯¹è±¡çš„å®žä¾‹å±žæ€§ä¸åŒï¼Œæž„é€ å‡½æ•°å±žæ€§ä¸å¸¸ç”¨ï¼Œå­˜åœ¨ä¸€å®šçš„å…¼å®¹é—®é¢˜ï¼Œè¿™è¾¹äº†è§£å³å¯ã€‚ â—ï¸æ³¨æ„ï¼Œæž„é€ å‡½æ•°å±žæ€§ä¸€å®šè¦æ˜¯è°ƒç”¨äº†exec()æˆ–è€…testæ–¹æ³•ï¼Œæˆ‘ä»¬çš„æž„é€ å‡½æ•°å±žæ€§æ‰ä¼šæœ‰å€¼ã€‚1234567891011121314const str='js js js';const patternFn=/(j)s/;patternFn.exec(str);console.log(RegExp.input);console.log(RegExp.$_); // ç­‰äºŽinputconsole.log(RegExp.lastMatch);// æœ€åŽä¸€æ¬¡åŒ¹é…åˆ°çš„å­—ç¬¦console.log(RegExp['$&amp;']); // lastIndexçš„åˆ«å ,ä½†æ˜¯å› ä¸ºä¸ç¬¦åˆæ ‡è¯†ç¬¦è§„åˆ™(å­—æ¯/_/$å¼€å¤´,åŽé¢å¯ä»¥å­—æ¯/_/$/æ•°å­—),æ‰€ä»¥åªèƒ½ç”¨è¿™ç§å½¢å¼console.log(RegExp.leftContext); // ä¸Šä¸€æ¬¡åŒ¹é…å·¦è¾¹å‰©ä½™çš„å­—ç¬¦console.log(RegExp['$`']); //â†‘åˆ«åconsole.log(RegExp.rightContext); // ä¸Šä¸€æ¬¡åŒ¹é…å³è¾¹å‰©ä½™çš„å­—ç¬¦console.log(RegExp["$'"]); // â†‘åˆ«åconsole.log(RegExp.lastParen); // åˆ†ç»„æ•èŽ·å†…å®¹console.log(RegExp['$+']); // â†‘åˆ«åconsole.log(RegExp.$1); // åˆ†ç»„å­—ç¬¦ === /\1\2/ Stringå¯¹è±¡ä¸­çš„æ­£åˆ™åŒ¹é…Stringå¯¹è±¡ä¸ºæˆ‘ä»¬æä¾›äº†4ç§æ–¹æ³•ç”¨äºŽåŒ¹é…æ­£åˆ™ï¼Œåˆ†åˆ«æ˜¯replace()ã€search()ã€match()ã€split()ã€‚ replace() replace() æ–¹æ³•è¿”å›žä¸€ä¸ªç”±æ›¿æ¢å€¼ï¼ˆreplacementï¼‰æ›¿æ¢ä¸€äº›æˆ–æ‰€æœ‰åŒ¹é…çš„æ¨¡å¼ï¼ˆpatternï¼‰åŽçš„æ–°å­—ç¬¦ä¸²ã€‚æ¨¡å¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ›¿æ¢å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ¯æ¬¡åŒ¹é…éƒ½è¦è°ƒç”¨çš„å›žè°ƒå‡½æ•°ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ç”¨replace()æ–¹æ³•æŠŠåŽŸå­—ç¬¦ä¸²ä¸­åŒ¹é…åˆ°çš„å­—ç¬¦è½¬æ¢æˆä½ éœ€è¦çš„å­—ç¬¦ï¼Œå¹¶ä¸”replace()æ–¹æ³•è¿”å›žè¿™ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè¯ä¸å¤šè¯´ï¼Œæ¥çœ‹ä¾‹å­ã€‚ æ¨¡å¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ â†“â†“123456const str = 'I love JOJO, jojo, JoJo';const pattern = /JOJO/ig;console.log(str.replace(pattern, 'DIO'));// I love DIO, DIO, DIOconsole.log(str.replace('JOJO', 'DIO'));// I love DIO, jojo, JoJo æ›¿æ¢å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œæ›¿æ¢çº¸æ˜¯å­—ç¬¦ä¸²çš„ä¾‹å­æˆ‘ä»¬ä¸Šé¢å·²ç»çœ‹è¿‡äº†ï¼Œæ¥çœ‹ä¸€ä¸‹å›žè°ƒå‡½æ•°çš„å†™æ³•ã€‚æž„é€ å‡½æ•°æŽ¥æ”¶4ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯match(åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²)ï¼Œp1,p2..ï¼ˆå¯¹åº”çš„åˆ†ç»„å­—ç¬¦ï¼‰ï¼Œoffset(åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²åœ¨åŽŸå­—ç¬¦ä¸­çš„åç§»é‡)ï¼Œstringï¼ˆè¢«åŒ¹é…çš„åŽŸå­—ç¬¦ä¸²ï¼‰ã€‚1234567const str = 'I love JOJO';const pattern = /(J)OJO/;str.replace(pattern, (match, p1, offset, string) =&gt; &#123; console.log(match, p1, offset, string); // JOJO J 7 I love JOJO return 'DIO'&#125;); â—ï¸æ³¨æ„ï¼ŒåŽŸå­—ç¬¦ä¸²è¿˜æ˜¯â€™I love JOJOâ€™, replace()å¹¶ä¸ä¼šæ”¹å˜åŽŸå­—ç¬¦ä¸²ã€‚ search()search()æ–¹æ³•å¯ä»¥ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒè¿”å›žåŒ¹é…åˆ°çš„ä½ç½®ï¼Œ-1ä¸ºæœªåŒ¹é…åˆ°ã€‚1234const str = 'I love JoJO, jojo, JoJo';const pattern = /JOJO/ig;console.log(str.search(pattern));// 7 æˆ‘ä»¬å‘çŽ°ï¼Œsearch()æ–¹æ³•åªåŒ¹é…äº†ç¬¬ä¸€ä¸ªâ€œJOJOâ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºæœ‰æ²¡æœ‰å…¨å±€ä¿®é¥°ç¬¦â€œgâ€ï¼Œå¯¹search()æ–¹æ³•éƒ½æ²¡æœ‰å½±å“ï¼Œsearch()æ–¹æ³•åªè¦æ‰¾åˆ°ä¸€ä¸ªå¯¹åº”çš„åŒ¹é…å°±ä¼šç«‹åˆ»è¿”å›žã€‚å¦‚æžœæˆ‘ä»¬ä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²ï¼Œsearch()æ–¹æ³•ä¼šä½¿ç”¨ new RegExp(obj) éšå¼åœ°å°†å…¶è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡å†è¿›è¡ŒåŒ¹é…ã€‚ match()match()æ–¹æ³•ä¸Žexec()æ–¹æ³•æ¯”è¾ƒç±»ä¼¼ï¼Œéƒ½ä¼šè¿”å›žä¸€ä¸ªæ•°ç»„ï¼ŒåŒºåˆ«åœ¨äºŽå…¨å±€åŒ¹é…çš„æ—¶å€™ã€‚ 1234567891011121314const str = 'JOJO JOJO JOJO';// å…ˆæ¥çœ‹ä¸€ä¸‹éžå…¨å±€åŒ¹é…const pattern = /(J)OJO/;console.log(pattern.exec(str));// ["JOJO", "J", index: 0, input: "JOJO JOJO JOJO", groups: undefined]console.log(str.match(pattern));// ["JOJO", "J", index: 0, input: "JOJO JOJO JOJO", groups: undefined]// å†æ¥çœ‹ä¸€ä¸‹å…¨å±€åŒ¹é…const patternG = /(J)OJO/g;console.log(patternG.exec(str));// ["JOJO", "J", index: 0, input: "JOJO JOJO JOJO", groups: undefined]console.log(str.match(patternG));// ["JOJO", "JOJO", "JOJO"] åœ¨éžå…¨å±€åŒ¹é…æ—¶ï¼Œå¯ä»¥çœ‹å‡ºmatch()çš„ç»“æžœå’Œexec()å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯åœ¨å…¨å±€åŒ¹é…æ—¶å°±ä¸ä¸€æ ·äº†ï¼Œmatch()ä¼šä¸€æ¬¡æ€§æŠŠåŒ¹é…é¡¹éƒ½æŠ“å–å‡ºæ¥ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæŠ“å–åˆ†ç»„ä¸­çš„å­—ç¬¦ã€‚ match: éžå…¨å±€/gåŒ¹é…çš„æƒ…å†µä¸‹æ‰ä¼šè¿”å›žåˆ†ç»„ä¸­åŒ¹é…åˆ°çš„å†…å®¹, å…¨å±€åŒ¹é…åªèƒ½åŒ¹é…åˆ°æ‰€æœ‰åŒ¹é…åˆ°çš„å­—ç¬¦ã€‚exec: æ— è®ºæ˜¯å¦å…¨å±€åŒ¹é…éƒ½ä¼šè¿”å›žåˆ†ç»„ä¸­åŒ¹é…åˆ°çš„å†…å®¹, éƒ½åªä¼šè¿”å›žå½“å‰åŒ¹é…åˆ°çš„ä¸€ä¸ªå†…å®¹, è€Œä¸æ˜¯å…¨éƒ¨è¿”å›ž, ä½†æ˜¯åœ¨å…¨å±€åŒ¹é…çš„æ—¶å€™æ˜¯å¯ä»¥ç»§ç»­åŒ¹é…ï¼Œç›´åˆ°æ‰¾ä¸åˆ°ä¸ºæ­¢ã€‚ split()split()æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦å­—ç¬¦ä¸²å°†ä¸€ä¸ªStringå¯¹è±¡åˆ†å‰²æˆå­å­—ç¬¦ä¸²æ•°ç»„ï¼Œä»¥ä¸€ä¸ªæŒ‡å®šçš„åˆ†å‰²å­—ä¸²æ¥å†³å®šæ¯ä¸ªæ‹†åˆ†çš„ä½ç½®ã€‚æˆ‘ä»¬å¯ä»¥å¾€é‡Œé¢ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºåˆ†éš”å­—ç¬¦ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŽ»ä½œä¸ºåˆ†éš”å­—ç¬¦æ¥æ‹†åˆ†å­—ç¬¦ä¸²ã€‚ é‚£ä»€ä¹ˆåœºæ™¯ä¸‹æˆ‘ä»¬ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥ä½œä¸ºåˆ†éš”å­—ç¬¦æ¯”è¾ƒå¥½å‘¢ã€‚12345678const splitStr = ' Hi , Hi , Hi ';const splitPattern = /,/;console.log(splitStr.split(splitPattern));// [" Hi ", " Hi ", " Hi "]// è¿™æ ·ä¼šæœ‰å¾ˆå¤šç©ºæ ¼,è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨æ­£åˆ™äº†const splitPattern2 = /\s*,\s*/;console.log(splitStr.split(splitPattern2));// æ¶ˆé™¤ç©ºæ ¼ [" Hi", "Hi", "Hi "] æ­£åˆ™ç»ƒä¹ åˆ°æ­¤ä¸ºæ­¢ï¼Œæ­£åˆ™åº”è¯¥å·²ç»åœ¨ä½ è„‘æµ·é‡Œæœ‰äº†ä¸€ä¸ªå¤§ä½“çš„å½¢çŠ¶ï¼Œä¸‹é¢æ¥çœ‹å‡ ä¸ªå°ä¾‹å­ï¼Œçœ‹ä¸€ä¸‹æ­£åˆ™åœ¨æ—¥å¸¸å¼€å‘ä¸­çš„å¸¸è§ç”¨æ³•ã€‚ è¿žå­—ç¬¦è½¬è½¬é©¼å³°æˆ‘ä»¬ä¸€èˆ¬å†™cssçš„æ—¶å€™ï¼Œæ¯”å¦‚â€œbackground-colorâ€ï¼Œåˆ°äº†jsé‡Œå°±ä¼šå˜æˆç”¨â€œbackgroundColorâ€åŽ»èŽ·å–å…ƒç´ çš„èƒŒæ™¯é¢œè‰²å±žæ€§ï¼Œâ€œbackground-colorâ€çš„è¿™ç§ä¹¦å†™æ–¹å¼å«ä½œè¿žå­—ç¬¦å½¢ï¼Œè€Œâ€œbackgroundColorâ€è¿™ç§å°±å«ä½œé©¼å³°åž‹ï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸ªæ­£åˆ™ï¼ŒæŠŠè¿žå­—ç¬¦å½¢å¼è½¬æˆé©¼å³°å½¢å¼ã€‚ 12345const str = 'background-color'const pattern=/-([a-z])/i;str.replace(pattern,function($1, $2)&#123; return $2.toUpperCase();&#125;) // backgroundColor é‚®ç®±éªŒè¯æˆ‘ä»¬å…ˆæ¥åˆ†æžä¸€ä¸‹é‚®ç®±çš„å¸¸ç”¨æ ¼å¼ rachellssr@gmail.comrachellssr123@gmail.com.cnrachellssr_123@gmail.com.cnrachellssr_123.com@gmail.com.cn è¿™å‡ ç§éƒ½æ˜¯æœ‰å¯èƒ½çš„ã€‚ 12const email = '^%$#@asda.com'const pattern = /(?:\w+\.)*\w+@(?:\w+\.)+[a-z]*/i; (?:\w+.) â†’ xx.xx. éƒ½æ˜¯ç±»ä¼¼çš„ç»“æž„ï¼Œå¯ä»¥æŠŠä»–ä»¬å†™æˆä¸€ä¸ªåˆ†ç»„ã€‚è¿™æ ·çš„åˆ†ç»„å¯èƒ½æœ‰å¾ˆå¤šä¹Ÿå¯èƒ½ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥éœ€è¦ç”¨â€œâ€ \w+@ â†’ é‚®ç®±è‚¯å®šå­˜åœ¨ä¸€ä¸ªä¸å¸¦ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå¯èƒ½æ˜¯å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼Œå¹¶ä¸”ç”¨ä¸€ä¸ª@è¿žæŽ¥é‚®ç®±åŸŸå (?:\w+.)+ â†’ åœ¨é‚®ç®±çš„åŸŸåä¸­ xx.è¿™æ ·çš„æ ¼å¼è‡³å°‘æœ‰ä¸€ç»„ï¼Œæ‰€ä»¥ç”¨â€œ+â€ [a-z] â†’ æœ‰å¯èƒ½æ˜¯â€œ.com.cnâ€ç±»åž‹çš„ç»“å°¾ï¼Œæ‰€ä»¥æœ€åŽç”¨[a-z]ã€‚ å¥½äº†ï¼Œåˆ°è¿™é‡Œè¿™ç¯‡åšå®¢çš„å†…å®¹å°±ç®—å…¨éƒ¨ç»“æŸäº†ï¼Œå†™è¿™ç¯‡åšå®¢çš„åˆè¡·ä¹Ÿæ˜¯æƒ³ç»™è‡ªå·±åšä¸€ä¸ªæ€»ç»“ï¼Œå¹³æ—¶å·¥ä½œä¸ç”¨æ­£åˆ™çš„æ—¶å€™æ€»æ˜¯å®¹æ˜“å¿˜ï¼Œä½†æ˜¯åœ¨ä¸€äº›å¤§åž‹é¡¹ç›®é‡Œï¼Œæ­£åˆ™çœŸçš„æ˜¯éšå¤„å¯è§ï¼Œå¦‚æžœè¿™ç¯‡æ–‡ç« èƒ½å¯¹ä½ æœ‰ä¸€ç‚¹ç‚¹å¸®åŠ©é‚£çœŸæ˜¯å†å¥½ä¸è¿‡å•¦ ~ é—²èŠä¸€çœ¨çœ¼åŠå¹´æ²¡æœ‰æ›´æ–°åšå®¢äº†ï¼Œå› ä¸ºä¸€äº›ä¸ªäººå‘å±•åŽŸå› ï¼Œæˆ‘æ¥åˆ°äº†æ–°çš„åŸŽå¸‚ã€‚è¿™åŠå¹´å‘ç”Ÿäº†è®¸å¤šäº‹ï¼Œä¹Ÿéžå¸¸å¿™ï¼Œå¿™åˆ°è®©æˆ‘æ ¹æœ¬æ„Ÿè§‰ä¸åˆ°æ—¶é—´çš„æµé€ï¼Œåˆšæ¥åˆ°é™Œç”ŸåŸŽå¸‚çš„æ—¶å€™ï¼Œä¸åŒçš„åŸŽå¸‚èŠ‚å¥ã€çŽ¯å¢ƒçš„æ”¹å˜ã€ä¸ç†Ÿæ‚‰çš„é¡¹ç›®ç­‰ç­‰ï¼Œéƒ½è®©åˆšåˆšè·³å‡ºèˆ’é€‚åŒºçš„æˆ‘æ„Ÿåˆ°ç„¦è™‘ï¼Œé‚£æ—¶å€™è§‰å¾—æ¯ä¸ªäººéƒ½å¥½å¿™ç¢Œï¼Œè‡ªå·±å´æ ¼æ ¼ä¸å…¥ï¼Œæ‰€ä»¥é‚£æ—¶æ²¡æœ‰è°ƒæ•´å¥½è‡ªå·±çš„å¿ƒæ€ï¼Œæ›´æ²¡æœ‰åŠžæ³•é™ä¸‹å¿ƒæ¥åŽ»å†™ä¸€äº›ä¸œè¥¿ã€‚ ä¸è¿‡äº‹å®žè¯æ˜Žï¼Œäººçš„é€‚åº”èƒ½åŠ›æ˜¯å¾ˆå¼ºçš„ï¼ŒçŽ°åœ¨æˆ‘ä¹Ÿå˜æˆäº†è¿™ä¸ªå¿™ç¢ŒåŸŽå¸‚çš„ä¸€ä»½å­ï¼Œæ›¾ç»å¶å°”åäºŒç‚¹ä¸‹ç­å°±è§‰å¾—åŠ ç­å¾ˆç´¯äº†ï¼Œåˆ°æ–°åŸŽå¸‚åŽ995å˜æˆäº†å¸¸æ€ï¼Œå‡Œæ™¨ä¸‹ç­çš„æ¬¡æ•°ä¸€åªæ‰‹ä¹Ÿæ•°ä¸è¿‡æ¥ã€‚ä¸è¿‡æˆ‘ä¸€ç‚¹ä¹Ÿä¸åŽæ‚”æ¢äº†åŸŽå¸‚ï¼Œå› ä¸ºè‡ªå·±è¿™åŠå¹´æ—¶é—´ï¼ŒçœŸçš„æˆé•¿äº†å¾ˆå¤šï¼ŒæŠ€æœ¯ä¸Šä¹Ÿæ˜¯ï¼Œç”Ÿæ´»ä¸Šä¹Ÿæ˜¯ï¼Œæœ‰å¥è¯ä¸æ˜¯è¯´â€œä¸€åˆ‡éƒ½æ˜¯æœ€å¥½çš„å®‰æŽ’ã€‚â€å—ï¼Œå°±æ˜¯é‚£æ ·ï¼Œè™½ç„¶2020å¹´çš„å¼€å¹´ä¸å®Œç¾Žï¼Œä½†ä¹Ÿå¸Œæœ›æ¯ä¸ªçœ‹åˆ°è¿™æ®µè¯çš„äººï¼Œä¸è¦å¿˜è®°è‡ªå·±çš„åˆè¡·ï¼ŒåŠªåŠ›å¿«ä¹çš„ç”Ÿæ´»ã€‚ æœ€è¿‘æ²¡æœ‰çœ‹ä»€ä¹ˆå¥½çœ‹çš„åŠ¨æ¼«ï¼Œä¸€ä¸ªæ˜¯å› ä¸ºå¿™ï¼Œå†æœ‰å°±æ˜¯å› ä¸ºç–«æƒ…çš„åŽŸå› å¾ˆå¤šç•ªéƒ½æŽ¨è¿Ÿä¸Šçº¿äº†ï¼Œæ¯”å¦‚RE0ã€‚ä¸è¿‡ä¸€ä¸ªäººç”Ÿæ´»ä¹‹åŽæˆ‘å…»çŒ«å•¦ ~ æ”¾å®è´é•‡æ¥¼ã€‚]]></content>
      <tags>
        <tag>categories</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¦ä½ ä¸Šæ‰‹react-redux+ä»£ç ç¤ºä¾‹]]></title>
    <url>%2F2019%2F07%2F18%2Freact-redux2%2F</url>
    <content type="text"><![CDATA[æˆ‘ä¹‹å‰åœ¨å†™ã€Œä¸€æ­¥æ­¥å¸¦ä½ å…¥é—¨ReduxçŠ¶æ€ç®¡ç†ã€è¿™ç¯‡æ–‡ç« æ—¶æåˆ°è¿‡ï¼Œreact-reduxæ‰æ˜¯ä¸“é—¨ä¸ºReactæœåŠ¡çš„çŠ¶æ€ç®¡ç†æ’ä»¶ã€‚ å¦‚æžœä½ ä¹‹å‰æ²¡æœ‰è¯»è¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ åœ¨è¯»è¿‡è¿™ç¯‡æ–‡ç« åŽï¼Œå†æ¥å­¦ä¹ react-reduxã€‚å› ä¸ºå¦‚æžœè¦åšæ¯”å–»çš„è¯ï¼ŒReduxæ‰æ˜¯åŸºçŸ³ï¼Œè€Œreact-reduxå°±åƒä¸º Reduxé”¦ä¸Šæ·»èŠ±ä¸€æ ·çš„å­˜åœ¨ã€‚ ç®€å•æ¥è¯´ï¼Œreact-reduxå®žé™…ä¸Šå°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨reactä¹‹ä¸­æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨reduxã€‚ å®‰è£…react-reduxå¹¶ä¸æ˜¯ Redux å†…ç½®ï¼Œéœ€è¦å•ç‹¬å®‰è£…ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…reduxä»¥åŠreact-reduxã€‚ å®‰è£…redux npmå®‰è£… yarnå®‰è£… npm install â€”save redux yarn add redux å®‰è£…react-redux npmå®‰è£… yarnå®‰è£… npm install â€”save react-redux yarn add react-redux ä»£ç éƒ¨åˆ†æˆ‘æƒ³å®žçŽ°ä¸€ä¸ªtodoListåŠŸèƒ½ï¼Œå½“æˆ‘ç‚¹å‡»æäº¤æŒ‰é’®çš„æ—¶å€™ï¼Œåœ¨inputä¸‹é¢ä¼šå¢žåŠ æˆ‘åˆšåˆšè¾“å…¥çš„å†…å®¹ã€‚ ç›®å½• store&gt;index.js123456import &#123; createStore &#125; from 'redux';import reducer from './reducer';const store = createStore(reducer);export default store; store&gt;reducer.js12345678const defaultState = &#123; inputValue: 'Rachel', list: [] // liståˆ—è¡¨æ˜¾ç¤ºçš„å€¼&#125;export default (state = defaultState, action) =&gt; &#123; return state; &#125; actionCreators.jså’ŒactionTypes.jsæš‚æ—¶å…ˆä¸ç®¡ã€‚ src&gt;index.js1234567891011121314import React from 'react';import ReactDOM from 'react-dom';import TodoList from './TodoList';import &#123; Provider &#125; from 'react-redux';import store from './store';const App = ( &lt;Provider store=&#123;store&#125;&gt; &#123;/* 1.æŠŠTodoListå†™åœ¨Provideré‡Œ */&#125; &lt;TodoList /&gt; &lt;/Provider&gt;)// 2.æŠŠAppä½œä¸ºç»„ä»¶ä¼ ç»™ReactDOM.render(),å®žé™…ä¸Šæˆ‘ä»¬æ•´ä¸ªé¡µé¢è¦æ¸²æŸ“çš„æ˜¯ä¸€ä¸ªAPPç»„ä»¶ReactDOM.render(App, document.getElementById('root')); API-Provideræ­¤æ—¶å‡ºçŽ°äº†react-reduxçš„ç¬¬ä¸€ä¸ªæ ¸å¿ƒAPIâ€”â€”Providerï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒçš„å®˜æ–¹è§£é‡Šã€‚ å…ˆå¿½ç•¥è¿™é‡Œé¢æåˆ°çš„connectæ–¹æ³•ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹Providerçš„ä½œç”¨ã€‚ Provideré¡¾åæ€ä¹‰ï¼Œæä¾›è€…ã€‚ProvideråŽ»è¿žæŽ¥store, ä¹‹åŽProviderå†…æ‰€æœ‰çš„å­ç»„ä»¶éƒ½æœ‰èƒ½åŠ›èŽ·å–åˆ°storeé‡Œé¢çš„å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒProviderä½œä¸ºä¸€ä¸ªæä¾›è€…ï¼ŒæŠŠstoreçš„æ•°æ®æä¾›ç»™äº†æ‰€æœ‰å­ç»„ä»¶ã€‚ ç”¨æ³•å¦‚ä¸Šï¼ŒProviderä½œä¸ºä¸€ä¸ªåŒ…è£¹ç»„ä»¶ä½¿ç”¨ï¼ŒåŒ…è£¹åœ¨å…¶ä»–ç»„ä»¶çš„æœ€å¤–å±‚ã€‚ æ­¤æ—¶æˆ‘ä»¬çš„TodoListç»„ä»¶å·²ç»å¯ä»¥èŽ·å–storeé‡Œçš„å…¨éƒ¨å†…å®¹äº†ã€‚ src&gt;TodoList.js1234567891011121314151617181920212223242526272829303132import React, &#123; Component &#125; from 'react';import &#123; connect &#125; from 'react-redux';class TodoList extends Component &#123; render() &#123; return ( &lt;div&gt; &lt;div&gt; &lt;input type="text" value=&#123;this.props.inputValue&#125;/&gt; &lt;button&gt;æäº¤&lt;/button&gt; &lt;ul&gt; &lt;li&gt;Song&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt; ) &#125;&#125;const mapStateToProps = (state) =&gt; &#123; // å‚æ•°stateï¼ŒæŒ‡storeé‡Œçš„æ•°æ® return &#123; inputValue: state.inputValue, &#125;&#125;const mapDispatchToProps = (dispatch) =&gt; &#123; return &#123; &#125;&#125;export default connect(mapStateToProps, mapDispatchToProps)(TodoList); API-connectreact-reduxçš„ç¬¬äºŒä¸ªæ ¸å¿ƒAPIâ€”â€”connectï¼Œå®˜æ–¹è§£é‡Šå¦‚ä¸‹ã€‚ connectç¿»è¯‘è¿‡æ¥å°±æ˜¯è¿žæŽ¥ã€‚ä»ŽTodoList.jsé‡Œçš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œconnectæ˜¯è®©TodoListç»„ä»¶å’Œstoreåšè¿žæŽ¥ã€‚å…¶ä¸­ä¾é mapStateToPropsåšè¿™ä¸ªè¿žæŽ¥çš„æ˜ å°„ï¼ŒæŠŠstoreé‡Œçš„æ•°æ®æ˜ å°„ç»™è¿™ä¸ªç»„ä»¶ï¼Œå˜æˆç»„ä»¶çš„propsã€‚ æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œstoreé‡Œçš„inpuValueä¼šæ˜ å°„åˆ°ç»„ä»¶é‡Œçš„propsçš„inputValue, æ‰€ä»¥inputå–çš„æ˜¯valueå€¼ä¸ºthis.props.inputValueã€‚ å¦‚æžœæˆ‘ä»¬æƒ³å¯¹storeçš„æ•°æ®åšä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦é€šè¿‡mapDispatchToPropsè¿™ä¸ªå‡½æ•°ï¼ŒæŠŠstore.dispatchæ–¹æ³•æŒ‚è½½åˆ°propsä¸Šã€‚ å…‰çœ‹æ¦‚å¿µæˆ–è®¸ä¼šæœ‰ç‚¹è’™ï¼Œä½†æ­¥éª¤ä¸å¤šï¼Œä½ çŽ°åœ¨åªéœ€æŠŠmapStateToPropsç†è§£ä¸ºæ‰€éœ€çš„æ•°æ®ï¼ŒæŠŠmapDispatchToPropsç†è§£ä¸ºæˆ‘ä»¬è¦åšçš„åŠ¨ä½œï¼Œå¸¦ç€è¿™ä¸ªæ¦‚å¿µåŽ»å¾€ä¸‹çœ‹ä»£ç ï¼Œä¸çŸ¥ä¸è§‰é—´ä¸€å®šä¼šè±ç„¶å¼€æœ—ã€‚ æˆ‘ä»¬æƒ³åœ¨inputæ¡†è¾“å…¥å†…å®¹çš„æ—¶å€™ï¼Œè®©inputæ¡†çš„å€¼ä¸Žæˆ‘ä»¬è¾“å…¥çš„å†…å®¹ç›¸åŒã€‚é¦–å…ˆåœ¨inputä¸Šæ·»åŠ ä¸€ä¸ªonChangeäº‹ä»¶ï¼Œä¸Žæ­¤åŒæ—¶æå‡ºpropså¸¸é‡ï¼ˆè¿™ä¸€æ­¥å¯çœç•¥ï¼Œä¸è¿‡å› ä¸ºåŽé¢è¿˜ä¼šå¤šæ¬¡ä½¿ç”¨ï¼Œæˆ‘ä»¬åº”å½“é¿å…è¾“å†™é‡å¤çš„ä»£ç ï¼Œæ‰€ä»¥å»ºè®®æå‡ºï¼‰ã€‚ 1234567891011121314151617class TodoList extends Component &#123; render() &#123; const &#123; inputValue, changeInputValue &#125; = this.props; //æå–props return ( &lt;div&gt; &lt;div&gt; &#123;/* å› ä¸ºæˆ‘ä»¬å•ç‹¬æå–å‡ºäº†propsï¼Œæ‰€ä»¥å¯ä»¥ä¸å†ä½¿ç”¨this.props.inputValueï¼Œå˜ä¸ºç›´æŽ¥ä½¿ç”¨inputValueä¸ŽchangeInputValueâ†“â†“ */&#125; &lt;input type="text" value=&#123;inputValue&#125; onChange=&#123;changeInputValue&#125; /&gt; &lt;button&gt;æäº¤&lt;/button&gt; &lt;ul&gt; &lt;li&gt;Song&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt; ) &#125;&#125; å…¶æ¬¡åœ¨mapDispatchToPropsé‡Œæ·»åŠ changeInputValueæ–¹æ³•ã€‚12345678const mapDispatchToProps = (dispatch) =&gt; &#123; return &#123; changeInputValue(e) &#123; const value = e.target.value; console.log(value); &#125;, &#125;&#125; æ­¤æ—¶å½“æˆ‘ä»¬è¾“å…¥å†…å®¹çš„æ—¶å€™ï¼Œè™½ç„¶é¡µé¢ä¸Šä¸ä¼šæ¸²æŸ“ï¼Œä½†æˆ‘ä»¬å·²ç»å¯ä»¥æ‰“å°å‡ºinputå†…çš„å€¼äº†ï¼ˆè¿™ä¸€æ­¥å¯ä»¥è‡ªè¡Œæµ‹è¯•ä¸€ä¸‹ï¼‰ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬è¦åŽ»æ´¾å‘actionã€‚ actionTypes.js12// ç»Ÿä¸€å¸¸é‡ï¼Œå‡å°‘å› é‡å¤æ‹¼å†™æ‰€å¯èƒ½äº§ç”Ÿçš„bugexport const CHANGE_INPUT_VALUE = 'change_input_value'; actionCreators.js1234567// ç»Ÿä¸€action, ä¼˜ç‚¹: æé«˜ä»£ç å¯ç»´æŠ¤æ€§, å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•ä¹Ÿæ›´æ–¹ä¾¿import &#123; CHANGE_INPUT_VALUE &#125; from './actionTypes';export const getInputValue = (value) =&gt; (&#123; type: CHANGE_INPUT_VALUE, value&#125;); reducer.js1234567891011121314import &#123; CHANGE_INPUT_VALUE &#125; from './actionTypes';const defaultState = &#123; inputValue: 'Rachel', list: []&#125;export default (state = defaultState, action) =&gt; &#123; if (action.type === CHANGE_INPUT_VALUE) &#123; const newState = JSON.parse(JSON.stringify(state)); newState.inputValue = action.value; return newState; &#125; return state;&#125; æœ€åŽä¿®æ”¹TodoList.js12345678910111213// å¼•ç”¨actionCreatorsimport &#123; getInputValue &#125; from './store/actionCreators';// ä¿®æ”¹mapDispatchToPropsconst mapDispatchToProps = (dispatch) =&gt; &#123; return &#123; changeInputValue(e) &#123; const value = e.target.value; const action = getInputValue(value); dispatch(action); &#125;, &#125;&#125; æ­¤æ—¶æˆ‘ä»¬åœ¨inputé‡Œå·²ç»å¯ä»¥è‡ªç”±è¾“å…¥ï¼Œè¾“å…¥çš„å†…å®¹ä¹Ÿä¼šæ¸²æŸ“åœ¨é¡µé¢ä¸Šäº†ã€‚ä¸‹é¢å†æ¥åŠ ä¸Šæäº¤åŠŸèƒ½ï¼Œæäº¤çš„æ¯ä¸€é¡¹ä¼šå­˜å…¥storeï¼Œç„¶åŽå†ç”±mapStateToPropsæ˜ å°„ç»™propsï¼Œä»Žè€Œæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚ æ­¥éª¤åŒä¸Šï¼Œç›´æŽ¥è´´æœ€ç»ˆä»£ç ã€‚ actionTypes.js12export const CHANGE_INPUT_VALUE = 'change_input_value';export const ADD_ITEM = 'add_item'; actionCreators.js12345678910import &#123; CHANGE_INPUT_VALUE, ADD_ITEM &#125; from './actionTypes';export const getInputValue = (value) =&gt; (&#123; type: CHANGE_INPUT_VALUE, value&#125;);export const getAddItemAction = () =&gt; (&#123; type: ADD_ITEM&#125;); reducer.js1234567891011121314151617181920import &#123; CHANGE_INPUT_VALUE, ADD_ITEM&#125; from './actionTypes';const defaultState = &#123; inputValue: 'Rachel', list: []&#125;export default (state = defaultState, action) =&gt; &#123; if (action.type === CHANGE_INPUT_VALUE) &#123; const newState = JSON.parse(JSON.stringify(state)); newState.inputValue = action.value; return newState; &#125; if (action.type === ADD_ITEM) &#123; const newState = JSON.parse(JSON.stringify(state)); newState.list.push(newState.inputValue); newState.inputValue = ''; return newState; &#125; return state;&#125; TodoList.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import React, &#123; Component &#125; from 'react';import &#123; connect &#125; from 'react-redux';import &#123; getInputValue, getAddItemAction &#125; from './store/actionCreators';class TodoList extends Component &#123; render() &#123; const &#123; inputValue, changeInputValue, handleClick, list &#125; = this.props; return ( &lt;div&gt; &lt;div&gt; &lt;input type="text" value=&#123;inputValue&#125; onChange=&#123;changeInputValue&#125;/&gt; &lt;button onClick=&#123;handleClick&#125;&gt;æäº¤&lt;/button&gt; &lt;ul&gt; &#123; list.map((item, index) =&gt; &#123; return ( &lt;li key=&#123;item&#125;&gt;&#123;item&#125;&lt;/li&gt; ) &#125;) &#125; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt; ) &#125;&#125;const mapStateToProps = (state) =&gt; &#123; return &#123; inputValue: state.inputValue, list: state.list &#125;&#125;const mapDispatchToProps = (dispatch) =&gt; &#123; return &#123; changeInputValue(e) &#123; const value = e.target.value; const action = getInputValue(value); dispatch(action); &#125;, handleClick() &#123; const action = getAddItemAction(); dispatch(action); &#125;, &#125;&#125;export default connect(mapStateToProps, mapDispatchToProps)(TodoList); å…¶ä½™ä»£ç ä¸å˜ï¼Œå½“ç‚¹å‡»æäº¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šè¿‡mapDispatchToPropså…³è”äº†storeé‡Œçš„dispatchæ–¹æ³•ï¼Œå‘storeæ´¾å‘äº†ä¸€ä¸ªåä¸ºgetAddItemActionçš„actionï¼ˆè¿™ä¸ªactionæ”¾åœ¨actionCreatorsç®¡ç†ï¼‰ï¼Œå½“storeæŽ¥æ”¶åˆ°è¿™ä¸ªactionçš„æ—¶å€™ï¼Œstoreä¼šåŽ»reduceré‡Œæ‰¾è¿™ä¸ªå€¼ï¼Œä¹‹åŽstoreæ‹¿ç€ä»Žreducerä¸­å¤„ç†è¿”å›žçš„å€¼ï¼Œå†é€šè¿‡mapStateToPropsæ˜ å°„åˆ°ç»„ä»¶ä¸Šï¼Œä»¥æ­¤å®Œæˆäº†TodoListåŠŸèƒ½ã€‚ æ€»ç»“ç›¸æ¯”reduxï¼Œæˆ‘ä»¬ä¸éœ€è¦å†åœ¨æ–‡ä»¶å†…å†å¼•ç”¨store, connectä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åšè¿žæŽ¥ã€‚æ•°æ®ä¸€æ—¦å‘ç”Ÿæ”¹å˜, ç»„ä»¶ä¹Ÿä¼šè·Ÿç€å˜(å› ä¸ºconnectåšäº†è¿žæŽ¥), ä¹Ÿä¸å†éœ€è¦store.subscribe()å†åŽ»åšè®¢é˜…ã€‚ æŽ¨èé˜…è¯»1ã€yarnæž„å»ºreacté¡¹ç›®2ã€ä¸€æ­¥æ­¥å¸¦ä½ å…¥é—¨Reduxç®¡ç†æ•°æ® ç„¶åŽ~ è¯´ç‚¹é¢˜å¤–è¯ï¼Œæˆ‘åˆæ¥å®‰åˆ©åŠ¨ç”»å•¦~~hhhï¼Œä»Šå¤©å®‰åˆ©çš„æ˜¯ã€Œå¼ºé£Žå¹æ‹‚ã€ã€‚ è™½ç„¶å’Œä¸Šæ¬¡å®‰åˆ©çš„æŽ’çƒå°‘å¹´æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œå¯å¼ºé£Žå¹æ‹‚æ›´åƒæ˜¯ä¸€è‚¡æ¸…é£Žï¼Œæ…¢æ…¢çš„å¹è¿›äº†ä½ çš„å¿ƒé‡Œï¼Œèµ‹äºˆä½ å‹‡æ°”ä¸ŽåŠ›é‡ï¼Œè®©ä½ æ„Ÿåˆ°æœªæ¥å¯æœŸðŸ’šã€‚]]></content>
      <tags>
        <tag>categories</tag>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[yarnæž„å»ºreacté¡¹ç›®]]></title>
    <url>%2F2019%2F05%2F15%2FbuildReact%2F</url>
    <content type="text"><![CDATA[å‰è¨€æˆ‘ä¸ªäººæ¯”è¾ƒå–œå¥½ç”¨yarnå¼€å‘ï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œå¹¶ä¸”è¿˜æœ‰è®¸å¤šä¼˜åŠ¿ï¼Œè¿™è¾¹ä¸åšè¿‡å¤šä»‹ç»ã€‚ä½ å¦‚æžœä¹ æƒ¯ç›´æŽ¥ä½¿ç”¨npmï¼Œå¯è·³è¿‡è¿™æ­¥ï¼Œç›´æŽ¥åŽ»å®‰è£…reactå®˜æ–¹è„šæ‰‹æž¶Create-react-appã€‚ æ­å»ºreactå¼€å‘çŽ¯å¢ƒå®‰è£…yarn1npm install -g yarn å®‰è£…reactå®˜æ–¹è„šæ‰‹æž¶Create-react-app npmç›´æŽ¥å®‰è£… yarnå®‰è£… npm install -g create-react-app npm install create-react-app yarn -g åˆ›å»ºä¸€ä¸ªå«new-projectçš„é¡¹ç›®1create-react-app new-project â—ï¸æ³¨æ„é¡¹ç›®åä¸å¯åŒ…å«å¤§å†™å­—æ¯ è¿è¡Œé¡¹ç›® npmè¿è¡Œ yarnè¿è¡Œ npm start yarn start è¿è¡ŒåŽå¦‚ä¸‹å›¾ã€‚]]></content>
      <tags>
        <tag>categories</tag>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€æ­¥æ­¥å¸¦ä½ å…¥é—¨Reduxç®¡ç†æ•°æ®]]></title>
    <url>%2F2019%2F05%2F15%2Freact-redux%2F</url>
    <content type="text"><![CDATA[é—²èŠæœ€è¿‘å¿™é‡Œå·é—²å­¦ä¹ äº†reactã€‚ç”±äºŽä¹‹å‰ä¸€ç›´éƒ½æ˜¯ä½¿ç”¨vueåšé¡¹ç›®ï¼Œæ‰€ä»¥å­¦ä¹ reactçš„æ—¶å€™è§‰å¾—æ—¢ç†Ÿæ‚‰åˆé™Œç”Ÿã€‚ ç†Ÿæ‚‰æ˜¯å› ä¸ºå®ƒå’Œvueæ‹¥æœ‰è®¸å¤šç›¸ä¼¼çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬éƒ½æŽ¨å´‡ç»„ä»¶åŒ–ã€éƒ½æ‹¥æœ‰â€™propsâ€™çš„æ¦‚å¿µã€æ ¸å¿ƒéƒ½æ˜¯è§†å›¾å±‚æ¡†æž¶ç­‰ç­‰ã€‚è™½ç„¶reactä¸åƒvueæ‹¥æœ‰é‚£ä¹ˆå¤šä¸°å¯Œçš„APIï¼Œä½†æ˜¯åœ¨æˆ‘çœ‹æ¥ï¼Œæ­£å› ä¸ºreactæœ¬èº«æ²¡æœ‰è¿‡åº¦çš„å°è£…ï¼Œå†åŠ ä¸Šreactçš„ç¤¾åŒºéžå¸¸æˆç†Ÿä¸Žæ´»è·ƒï¼Œæ‰ä½¿å¾—reactçš„å¼€å‘çµæ´»å¤šå˜ï¼Œç›¸æ¯”èµ·æ¥ï¼Œæˆ‘è§‰å¾—reactæ›´é€‚åˆå¤§åž‹é¡¹ç›®çš„å¼€å‘ï¼Œreactçš„å‡½æ•°å¼ç¼–ç¨‹ä¹Ÿæ›´å®¹æ˜“å®žçŽ°å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ å°¤å¤§è‡ªå·±ä¹Ÿè¯´è¿‡vueä»Žä¸€å¼€å§‹çš„å®šä½å°±æ˜¯å°½å¯èƒ½çš„é™ä½Žå‰ç«¯å¼€å‘çš„é—¨æ§›ï¼Œè®©æ›´å¤šçš„äººèƒ½å¤Ÿæ›´å¿«åœ°ä¸Šæ‰‹å¼€å‘ã€‚æ‰€ä»¥å­¦ä¹ èµ·æ¥ï¼Œvueæ›´åŠ åœ†æ»‘ï¼Œè€Œreactç›¸å¯¹é™¡å³­ã€‚ä¸¤è€…åœ¨æˆ‘çœ‹æ¥éƒ½æ˜¯éžå¸¸ä¼˜ç§€çš„æ¡†æž¶ï¼Œæ²¡æœ‰é«˜ä½Žä¹‹åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„å¼€å‘æƒ…å†µé€‰æ‹©ä¸åŒçš„å¼€å‘å·¥å…·ã€‚ å‰è¨€ä»Šå¤©ä¸»è¦æ˜¯æƒ³å†™ä¸€ä¸‹å¦‚ä½•åœ¨reactä¸­ç®¡ç†æ•°æ®ã€‚æˆ‘ä¼šä»Žæ­å»ºreacté¡¹ç›®å¼€å§‹ï¼Œå¾ªåºæ¸è¿›ï¼Œå¦‚æžœä½ å¯¹è¿™å…¶ä¸­çš„æŸäº›è¿‡ç¨‹å·²ç»éžå¸¸äº†è§£ï¼Œå¯ä»¥åœ¨å³ä¾§çš„ç›®å½•ä¸­è·³è¿‡è¯¥ç« èŠ‚ã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œå¦‚æžœä½ è¿˜ä¸äº†è§£è¯¥å¦‚ä½•æ­å»ºreacté¡¹ç›®ï¼Œè¯·å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€Œyarnæž„å»ºreacté¡¹ç›®ã€ã€‚ ReduxRedux=Reducer+Fluxï¼ŒFluxæ˜¯FacebookæŽ¨å‡ºçš„æœ€åŽŸå§‹çš„è¾…åŠ©Reactçš„æ•°æ®å±‚æ¡†æž¶ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯é‚£ä¹ˆçš„å¥½ç”¨ï¼Œæ‰€ä»¥æœ‰äººæŠŠFluxåšäº†ä¸€ä¸ªå‡çº§ï¼Œå˜æˆäº†Reduxã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨reduxè¯·çœ‹ä¸‹é¢è¿™å¼ å›¾ å‡è®¾åº•éƒ¨ç»¿è‰²çš„ç»„ä»¶è¦å’Œæœ€é¡¶å±‚çš„ç»„ä»¶é€šä¿¡ï¼Œé‚£ä¹ˆç»¿è‰²çš„ç»„ä»¶éœ€è¦å±‚å±‚æŠŠæ¶ˆæ¯è½¬å‘ç»™çˆ¶çº§ç»„ä»¶ï¼Œç›´åˆ°ä¼ åˆ°æœ€é¡¶å±‚çš„ç»„ä»¶ï¼Œå¦‚æžœæˆ‘ä»¬é¡¹ç›®ä¸­çš„ç»„ä»¶éžå¸¸ä¹‹å¤šï¼Œç»„ä»¶ä¹‹é—´åˆç»å¸¸éœ€è¦å…±äº«ä¼ å€¼çš„è¯ï¼Œé‚£ä¹ˆä½¿ç”¨reactè¿™ç§çˆ¶å­é€šä¿¡çš„æ–¹å¼ï¼Œæ•´ä¸ªé¡¹ç›®çš„å¼€å‘å°±ä¼šå˜å¾—éžå¸¸å†—ä½™ï¼Œä¹Ÿä¸æ˜“ç»´æŠ¤ã€‚ å‰é¢è¯´è¿‡ï¼Œreactæ˜¯ä¸€ä¸ªè§†å›¾å±‚æ¡†æž¶ï¼ˆå¹¶ä¸æ˜¯ä»€ä¹ˆé—®é¢˜éƒ½ä¾é reactè§£å†³ï¼Œreactåªè§£å†³æ•°æ®å’Œé¡µé¢æ¸²æŸ“â€”â€”ä¹Ÿå°±æ˜¯æ­å»ºè§†å›¾, è‡³äºŽç»„ä»¶æ¸²æŸ“äº¤ç»™åˆ«çš„æ•°æ®å±‚æ¡†æž¶æ¥åšé¢å¤–çš„æ”¯æ’‘ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®å±‚æ¡†æž¶åŽ»ååŠ©reactå¸®åŠ©æ•°æ®ç®¡ç†ï¼Œç›®å‰ä¸»æµå’Œreactæ­é…çš„å°±æ˜¯reduxã€‚ reduxè¦æ±‚æˆ‘ä»¬æŠŠæ•°æ®éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªåä¸ºstoreçš„å…¬å…±å­˜å‚¨åŒºåŸŸï¼Œæˆ‘ä»¬æŠŠæ•°æ®éƒ½å­˜æ”¾åœ¨storeä¸­ã€‚å¦‚æžœæƒ³é€šè¿‡ç»¿è‰²çš„ç»„ä»¶æ”¹å˜æ•°æ®ä¼ ç»™å…¶ä»–ç»„ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æ“ä½œstoreå°±å¯ä»¥äº†ï¼ŒæŽ¥ç€å…¶ä»–ç°è‰²çš„ç»„ä»¶ä¼šè‡ªåŠ¨æ„ŸçŸ¥åˆ°å˜åŒ–ï¼Œç„¶åŽé‡æ–°åŽ»storeä¸­å–æ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬å–åˆ°çš„æ•°æ®ï¼Œå°±æ˜¯åˆšåˆšç»¿è‰²ç»„ä»¶æ‰€æ›´æ”¹çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œreduxé—´æŽ¥åœ°å¸®æˆ‘ä»¬å®žçŽ°äº†ç»„ä»¶é€šä¿¡çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬çš„ç»„ä»¶é€šä¿¡å˜å¾—éžå¸¸çš„è½»æ¾ã€‚ â—ï¸ä½†æ˜¯æˆ‘ä»¬è¦çŸ¥é“ï¼Œreduxä¸æ˜¯åªä¸ºreactæœåŠ¡çš„ï¼Œè€Œæ˜¯ä¸ºJavaScriptæœåŠ¡çš„çŠ¶æ€å®¹å™¨ï¼Œreact-reduxæ‰æ˜¯ä¸“é—¨ä¸ºreactæœåŠ¡çš„çŠ¶æ€ç®¡ç†æ’ä»¶ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦è®²è§£reduxã€‚ redux ä¸‰å¤§åŽŸåˆ™1.å•ä¸€æ•°æ®æºstoreæ˜¯å”¯ä¸€çš„ã€‚æ•´ä¸ªåº”ç”¨çš„æ•°æ®è¢«å‚¨å­˜åœ¨ä¸€æ£µobject tree(å¯¹è±¡æ ‘)ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºŽå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚ 2.stateæ˜¯åªè¯»çš„å”¯ä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ actionï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºŽæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚ 3.ä½¿ç”¨çº¯å‡½æ•°æ‰§è¡Œä¿®æ”¹ä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state tree ï¼Œä½ éœ€è¦ç¼–å†™ reducersã€‚reducerå¿…é¡»æ˜¯çº¯å‡½æ•°: çº¯å‡½æ•°æ˜¯æŒ‡ç»™å®šå›ºå®šçš„è¾“å…¥, å°±ä¸€å®šä¼šæœ‰å›ºå®šçš„è¾“å‡º, ä¸”ä¸ä¼šæœ‰ä»»ä½•å‰¯ä½œç”¨; ä¸€æ—¦ä¸€ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªsettimeoutæˆ–è€…ajaxæˆ–è€…new Dateç›¸å…³å†…å®¹çš„æ—¶å€™, å®ƒå°±ä¸æ˜¯ä¸€ä¸ªçº¯å‡½æ•°, æ‰€ä»¥reduceré‡Œä¸å¯ä»¥æœ‰å¼‚æ­¥çš„æ“ä½œã€‚â—ï¸å‰¯ä½œç”¨: ä¾‹å¦‚å¯¹å‚æ•°çš„ä¿®æ”¹å°±æ˜¯å‰¯ä½œç”¨, è¿™ä¸ªæ—¶å€™reducerä¹Ÿå°±ä¸æ˜¯ä¸€ä¸ªçº¯å‡½æ•°äº† Mutabilit(å¯å˜æ€§) &amp; Immutability(ä¸å˜æ€§)åœ¨å­¦ä¹ reduxå‰ï¼Œæˆ‘å¸Œæœ›ä½ å¯ä»¥äº†è§£Mutabilit(å¯å˜æ€§)å’ŒImmutability(ä¸å˜æ€§)è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚ é¦–å…ˆä»Žå­—é¢ä¸Šç†è§£ï¼Œã€Œå¯å˜ã€æ„å‘³ç€å¯ä»¥å‡ºçŽ°å˜åŒ–ï¼Œå¯ä»¥å˜åŒ–ï¼Œå°±æ„å‘³ç€å¯èƒ½ä¼šå‡ºçŽ°ä¸€äº›é—®é¢˜æˆ–æ˜¯bugã€‚ ã€Œä¸å¯å˜ã€å°±ä»£è¡¨æŸäº›æ•°æ®æ˜¯ä¸å¯ä¿®å˜çš„ï¼Œå¦‚æžœæƒ³è¦æ”¹å˜ä¸å¯å˜çš„æ•°æ®ï¼Œé‚£ä¹ˆåªèƒ½åŽ»å¤åˆ¶æ—§çš„æ•°æ®ï¼Œå†äº§ç”Ÿæ–°çš„æ•°æ®æ¥å–ä»£æ—§çš„æ•°æ®ï¼Œæˆ‘ä»¬æ°¸è¿œä¸è¦åŽ»ä¿®æ”¹æ—§çš„æ•°æ®ã€‚ æˆ‘è¿™é‡Œä¸åšè¿‡å¤šçš„èµ˜è¿°ï¼Œå¦‚æžœä½ å¯¹è¿™å—æœ‰å…´è¶£ï¼Œå¯ä»¥åŽ»è‡ªè¡ŒæŸ¥æ‰¾ä¸€äº›æ–‡ç« äº†è§£ï¼Œæœ¬æ–‡åªéœ€è¦ä½ äº†è§£è¿™ä¸ªæ¦‚å¿µã€‚ reduxçš„å·¥ä½œæµç¨‹reactComponentsï¼š æ¯ä¸€ä¸ªé¡µé¢ä¸Šçš„ç»„ä»¶ã€‚actionCreatorsï¼šç®¡ç†actionçš„åœ°æ–¹ã€‚actionï¼šåŠ¨ä½œï¼Œå®ƒæ˜¯ store æ•°æ®çš„å”¯ä¸€æ¥æºã€‚ä¸€èˆ¬æ¥è¯´ä½ ä¼šé€šè¿‡ store.dispatch() å°† action ä¼ åˆ° storeï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚storeï¼šå­˜å‚¨æ•°æ®çš„å…¬å…±åŒºåŸŸï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæŠŠactionå’Œreducersè”ç³»åˆ°ä¸€èµ·çš„å¯¹è±¡ã€‚reducersï¼šå¤„ç†ä¸åŒçš„actionç±»åž‹ï¼Œå‘Šè¯‰storeè¯¥ç»™ç»„ä»¶ä»€ä¹ˆæ ·çš„æ•°æ®ï¼Œç„¶åŽstoreå†æŠŠè¿™ä¸ªæ•°æ®ç»™åˆ°å¯¹åº”çš„ç»„ä»¶ã€‚ è¿™é‡Œä½ æˆ–è®¸ä¼šçœ‹çš„æœ‰ç‚¹è’™ï¼Œæˆ‘ä¸‹é¢ç”¨ä»£ç æ¥è§£é‡Šä¸€ä¸‹reduxçš„å·¥ä½œæµç¨‹ã€‚ å®‰è£…redux npmå®‰è£… yarnå®‰è£… npm install â€”save redux yarn add redux reduxä»£ç è®²è§£ æˆ‘æƒ³å®žçŽ°ä¸€ä¸ªtodoListåŠŸèƒ½ï¼Œå½“æˆ‘ç‚¹å‡»æäº¤æŒ‰é’®çš„æ—¶å€™ï¼Œåœ¨inputä¸‹é¢ä¼šå¢žåŠ æˆ‘åˆšåˆšè¾“å…¥çš„å†…å®¹ã€‚å…¶ä¸­ï¼Œinputå’Œbuttonæ˜¯çˆ¶ç»„ä»¶ï¼Œä¸‹é¢çš„ulæ˜¯å­ç»„ä»¶ã€‚æ•ˆæžœå¦‚ä¸‹ åŸºç¡€ç»“æž„-å–å€¼å…ˆåœ¨åˆšåˆšæ­å»ºå¥½çš„reacté¡¹ç›®ä¸­çš„srcæ–‡ä»¶ä¸‹å»ºç«‹ä¸€ä¸ªstoreæ–‡ä»¶å¤¹ï¼ˆä½ ä¹Ÿå¯ä»¥å»ºåœ¨ä»»ä½•çš„ç»„ä»¶æ–‡ä»¶å¤¹ä¸‹ï¼‰ï¼Œåœ¨storeé‡Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªindex.jså’Œreducer.jsã€‚ reducer.js12345678910// å®šä¹‰åˆå§‹æ•°æ®defaultStateï¼Œå¦‚æžœä¸ç»™stateè®¾ç½®ä¸€ä¸ªåˆå§‹æ•°æ®ï¼Œé‚£ä¹ˆæœ€åˆstateå°±æ˜¯ä¸€ä¸ªundefinedã€‚// è¿™é‡Œæˆ‘å·²ç»ä¸ºtodoListå†™å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²inputValueå’Œæ•°ç»„listã€‚const defaultState = &#123; inputValue: '', list: ['é»˜è®¤æ•°æ®1', 'é»˜è®¤æ•°æ®2']&#125;;export default (state = defaultState, action) =&gt; &#123; // stateæŒ‡çš„æ˜¯ä¸Šä¸€æ¬¡å­˜å‚¨çš„æ•°æ®, actionæ˜¯ç»„ä»¶ä¼ è¿‡æ¥çš„å†…å®¹ return state;&#125; index.js123456789// ä»Žreduxå¼•å…¥createStoreæ–¹æ³•import &#123; createStore &#125; from 'redux'; // ä»Žåˆšåˆšåˆ›å»ºçš„reducer.jså¼•å…¥reducerimport reducer from './reducer';// å®šä¹‰ä¸€ä¸ªåä¸ºstoreçš„reduxå­˜å‚¨åŒºï¼Œæˆ‘ä»¬æŠŠreducerä½œä¸ºå‚æ•°ä¼ å…¥createStoreæ–¹æ³•æ¥æž„é€ è¿™ä¸ªå­˜å‚¨åŒºï¼Œstoreé‡Œçš„æ•°æ®åªå¯ä»¥é€šè¿‡reduceræ¥ä¿®æ”¹ã€‚const store = createStore(reducer);// å¯¼å‡ºstoreexport default store; åˆ›å»ºå­ç»„ä»¶List.js1234567891011121314151617import React from 'react';const List = (props) =&gt; &#123; return ( &lt;div&gt; &lt;ul&gt; &#123; props.list.map((item, index) =&gt; &#123; return &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt; &#125;) &#125; &lt;/ul&gt; &lt;/div&gt; );&#125;export default List; â—ï¸æ­¤å¤„çš„Listç»„ä»¶æ˜¯ä¸€ä¸ªæ— çŠ¶æ€ç»„ä»¶ï¼Œæ²¡æœ‰ä»»ä½•çš„é€»è¾‘æ“ä½œï¼Œæ‰€æœ‰é€»è¾‘æ“ä½œäº¤ç”±çˆ¶ç»„ä»¶æ‰§è¡Œã€‚ æŽ¥ç€ä¿®æ”¹ä½ çš„App.js (æˆ‘è¿™é‡ŒæŠŠApp.jsä½œä¸ºçˆ¶ç»„ä»¶)1234567891011121314151617181920import React, &#123; Component &#125; from 'react'import store from './store'import List from './List'export default class App extends Component &#123; constructor(props) &#123; super(props); // ç”¨storeçš„getState()æ–¹æ³•å–å‡ºstoreçš„æ•°æ®ï¼Œå†èµ‹å€¼ç»™this.state this.state = store.getState(); &#125; render() &#123; return ( &lt;div&gt; &lt;input type="text"/&gt; &lt;button&gt;æäº¤&lt;/button&gt; &lt;List list=&#123;this.state.list&#125;&gt;&lt;/List&gt; &lt;/div&gt; ) &#125;&#125; æ­¤æ—¶è¿è¡Œå‡ºæ¥åº”è¯¥æ˜¯è¿™æ ·ç›®å½•ç»“æž„ ä¿®æ”¹storeæ­¤åˆ»æˆ‘ä»¬å·²ç»å¯ä»¥å–åˆ°storeé‡Œçš„æ•°æ®äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çŽ°åœ¨æƒ³åœ¨ç‚¹å‡»æäº¤çš„æ—¶å€™ï¼Œlisté‡Œæ–°å¢žä¸€æ¡æ•°æ®ï¼Œå¹¶ä¸”å®žæ—¶åœ°å“åº”å‡ºæ¥ï¼Œåº”è¯¥æ€Žä¹ˆåšå‘¢ã€‚ ä¿®æ”¹App.js1234567891011121314151617181920212223242526272829303132333435363738394041import React, &#123; Component &#125; from 'react'import store from './store';import List from './List'export default class App extends Component &#123; constructor(props) &#123; super(props); this.state = store.getState(); // ä¿®æ”¹äº‹ä»¶çš„thisæŒ‡å‘ï¼Œå¦åˆ™thisæŒ‡å‘undefined this.handleInputChange = this.handleInputChange.bind(this); this.handleClick = this.handleClick.bind(this); &#125; render() &#123; return ( &lt;div&gt; &lt;input type="text" onChange=&#123;this.handleInputChange&#125; value=&#123;this.state.inputValue&#125; /&gt; &lt;button onClick=&#123;this.handleClick&#125;&gt;æäº¤&lt;/button&gt; &lt;List list=&#123;this.state.list&#125;&gt;&lt;/List&gt; &lt;/div&gt; ) &#125; handleInputChange(e) &#123; // 1) åˆ›å»ºaction const action = &#123; type: 'change_input_value', value: e.target.value &#125; // 2) ä¼ ç»™store store.dispatch(action); // 3) storeå¦‚æžœæŽ¥æ”¶åˆ°äº†action, ä¼šè‡ªåŠ¨æŠŠä¹‹å‰çš„æ•°æ®å’Œactionä¼ ç»™reducer (è¿™æ­¥storeå¸®æˆ‘ä»¬åšäº†) &#125; handleClick() &#123; const action = &#123; type: 'add_todo_item', &#125; store.dispatch(action); &#125;&#125; ç„¶åŽä¿®æ”¹æˆ‘ä»¬çš„reducer123456789101112131415161718192021const defaultState = &#123; inputValue: '', list: ['é»˜è®¤æ•°æ®1', 'é»˜è®¤æ•°æ®2']&#125;;// 4) reduceræ‹¿åˆ°ä¹‹å‰çš„æ•°æ®å’Œå½“å‰æ“ä½œçš„ä¿¡æ¯åŽå¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åŽè¿”å›žæ–°çš„æ•°æ®ç»™storeexport default (state = defaultState, action) =&gt; &#123; const newState = JSON.parse(JSON.stringify(state)); //æ·±æ‹·è´ï¼Œå› ä¸ºreducerå¯ä»¥æŽ¥æ”¶state, ä½†ç»ä¸èƒ½ä¿®æ”¹state æ‰€ä»¥è¦æ‹·è´state switch (action.type) &#123; case 'change_input_value': newState.inputValue = action.value; return newState; //returnç»™äº†store case 'add_todo_item': newState.list.push(newState.inputValue); // æ·»åŠ æˆåŠŸåŽæ¸…ç©ºinputValue newState.inputValue = ''; return newState; default: break; &#125; return state;&#125; æ­¤æ—¶æˆ‘ä»¬ä¼šå‘çŽ°åœ¨inputæ¡†é‡Œè¾“å…¥æ•°æ®é¡µé¢æ˜¯æ²¡æœ‰ååº”çš„ï¼Œç‚¹å‡»æäº¤ï¼Œé¡µé¢ä¸Šä¹Ÿæ²¡æœ‰å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œåˆ«æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥æ‰“å°ä¸€ä¸‹storeï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å­¦reduxæ—¶ç»å¸¸å®¹æ˜“çŠ¯çš„é”™è¯¯ã€‚ æˆ‘ä»¬åœ¨handleClickæ–¹æ³•çš„æœ€åŽï¼Œç”¨store.getState()æ–¹æ³•æ¥æ‰“å°ä¸€ä¸‹storeçš„å€¼â—ï¸æ³¨æ„æ˜¯æœ€åŽï¼Œstore.dispatch(action)çš„åŽé¢1console.log(store.getState()); æˆ‘ä»¬å‘çŽ°storeé‡Œçš„æ•°æ®å·²ç»è¢«æ”¹å˜äº†ï¼Œlistå¢žåŠ äº†1æ¡æ•°æ®ï¼ŒinputValueä¹Ÿè¢«æ¸…ç©ºäº†ï¼Œè¿™è¯æ˜Žæˆ‘ä»¬ä¹‹å‰åœ¨reducerä¸­ç¼–å†™çš„ä»£ç éƒ½ç”Ÿæ•ˆäº†ï¼Œä½†æ˜¯éƒ½å¹¶æ²¡æœ‰æ¸²æŸ“åœ¨é¡µé¢ä¸Šã€‚çŽ°åœ¨é¡µé¢ä¸Šinputçš„valueå€¼æ˜¯ç©ºå€¼ï¼Œæ˜¯å› ä¸ºä¸€å¼€å§‹inputValueçš„å€¼å°±æ˜¯ç©ºï¼Œè€Œä¸æ˜¯æˆ‘ä»¬åŽæ¥æ¸…ç©ºçš„ã€‚è¿™ä¸€åˆ‡éƒ½å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨ç»„ä»¶ä¸­åŽ»ç›‘å¬æ›´æ–°storeé‡Œçš„æ•°æ®ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨é¡µé¢ä¸­ç›‘å¬storeï¼Œå½“storeå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®žæ—¶æ›´æ–°æˆ‘ä»¬çš„æ•°æ®ã€‚ ç›‘å¬storeApp.jsæœ€ç»ˆä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748import React, &#123; Component &#125; from 'react'import store from './store';import List from './List'export default class App extends Component &#123; constructor(props) &#123; super(props); this.state = store.getState(); this.handleInputChange = this.handleInputChange.bind(this); this.handleClick = this.handleClick.bind(this); // 5) ç›‘å¬storeçš„å˜åŒ– // è®¢é˜…store, åªè¦storeå‘ç”Ÿæ”¹å˜, subscribeé‡Œçš„å‡½æ•°å°±ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œ this.handleStoreChange = this.handleStoreChange.bind(this); store.subscribe(this.handleStoreChange); &#125; render() &#123; return ( &lt;div&gt; &lt;input type="text" onChange=&#123;this.handleInputChange&#125; value=&#123;this.state.inputValue&#125; /&gt; &lt;button onClick=&#123;this.handleClick&#125;&gt;æäº¤&lt;/button&gt; &lt;List list=&#123;this.state.list&#125;&gt;&lt;/List&gt; &lt;/div&gt; ) &#125; handleInputChange(e) &#123; const action = &#123; type: 'change_input_value', value: e.target.value &#125; store.dispatch(action); &#125; handleClick() &#123; const action = &#123; type: 'add_todo_item', &#125; store.dispatch(action); &#125; handleStoreChange() &#123; // 6) å½“æ„ŸçŸ¥åˆ°storeå˜åŒ–çš„æ—¶å€™, è°ƒç”¨store.getState()æ–¹æ³•ä»Žstoreä¸­é‡æ–°å–ä¸€æ¬¡æ•°æ®, ç„¶åŽè°ƒç”¨setStateæ›¿æ¢æŽ‰å½“å‰ç»„ä»¶ä¸­çš„æ•°æ®, è¿™æ ·å°±ä¼šåŒæ­¥æ•°æ®äº† this.setState(store.getState()); &#125;&#125; â—ï¸æˆ‘ä»¬ä¸Šé¢è¯´è¿‡ï¼Œä¸è¦ç›´æŽ¥æ›´æ”¹stateçš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡ä¿®æ”¹æ—¶éƒ½åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„stateï¼Œè¿”å›žçš„ä¹Ÿæ˜¯å…¨æ–°çš„stateã€‚ä¸è¿‡ï¼Œå¤§é‡é‡å¤çš„ä»£ç å°±æ˜¯é—®é¢˜çš„æºæ³‰ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œç†åº”åŽ»å‡å°‘å‡ºçŽ°bugçš„å¯èƒ½æ€§ã€‚æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬æ—¥å¸¸å¼€å‘æ—¶ï¼Œæˆ‘æŽ¨èä½¿ç”¨immutable.jsæˆ–ä¸€äº›å…¶ä»–çš„ç¬¬ä¸‰æ–¹åº“â€”â€”æˆ‘ä»¬åœ¨æœ€åˆå°±æŠŠstateç”Ÿæˆimmutableå¯¹è±¡, è¿™æ ·å¯ä»¥ç™¾åˆ†ç™¾ä¿è¯stateä¸ä¼šè¢«æ”¹å˜ã€‚ æ€»ç»“æ‹¿åˆšåˆšçš„ä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬é¦–å…ˆæŠŠinputçš„å€¼å’Œstoreä¸­çš„inputValueå…³è”åˆ°äº†ä¸€èµ·ï¼Œå¦‚æžœä½ æƒ³ä¿®æ”¹inputæ¡†çš„valueå€¼ï¼Œå°±å¿…é¡»é€šè¿‡ä¿®æ”¹storeä¸­çš„inputValueå®žçŽ°ã€‚æˆ‘ä»¬ç”¨onChangeäº‹ä»¶ç›‘å¬äº†inputï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹inputä¸­çš„å€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½åˆ›å»ºäº†ä¸€ä¸ªactionï¼Œå¹¶æŠŠè¿™ä¸ªactionæ´¾å‘ç»™äº†storeã€‚ storeæŽ¥æ”¶åˆ°äº†è¿™ä¸ªactionï¼Œä¼šè‡ªåŠ¨æŠŠè¿™ä¸ªactionä¼ ç»™reducerã€‚reduceræ‹¿åˆ°è¿™ä¸ªactionï¼Œå¼€å§‹å¯¹æ¯”actionçš„typeå€¼ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„æ•°æ®æ“ä½œï¼Œä¹‹åŽè¿”å›žäº†ä¸€ä¸ªæ–°çš„æ•°æ®ç»™storeã€‚æˆ‘ä»¬åœ¨ç»„ä»¶å†…ç›‘å¬äº†storeçš„å˜åŒ–ï¼Œæ‰€ä»¥å½“reduceræŠŠå€¼è¿”å›žç»™äº†storeï¼Œstoreæ›´æ–°äº†è‡ªå·±çš„æ•°æ®ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å°±ä¼šç›‘å¬åˆ°åˆšåˆšstoreçš„å˜åŒ–ï¼Œéšä¹‹æ›´æ¢ç»„ä»¶å†…storeçš„æ•°æ®ã€‚ inputè¾“å…¥æµç¨‹ï¼šAppâ†’storeâ†’reducerâ†’storeâ†’Appæ£€æµ‹åˆ°storeå‘ç”Ÿå˜åŒ–ï¼Œæ›´æ–°æ•°æ®ï¼Œæ¸²æŸ“é¡µé¢ ç‚¹å‡»æäº¤æµç¨‹ï¼šAppâ†’storeâ†’reducerâ†’storeâ†’App.jsæ£€æµ‹åˆ°storeå‘ç”Ÿå˜åŒ–ï¼Œæ›´æ–°æ•°æ®â†’çˆ¶ç»„ä»¶Appé‡æ–°æ¸²æŸ“è§¦å‘å­ç»„ä»¶Listæ›´æ–°æ¸²æŸ“ ä¼˜åŒ–å†™åˆ°è¿™é‡Œï¼Œå¦‚æžœä½ åªæƒ³äº†è§£è¯¥æ€Žä¹ˆä½¿ç”¨reduxï¼Œé‚£ä¹ˆè‡³æ­¤ä¹‹å‰çš„ä»£ç åº”è¯¥å·²ç»è¶³å¤Ÿè®©ä½ ä¸Šæ‰‹åŽ»ä½¿ç”¨reduxäº†ã€‚ä½†æ˜¯å…¶å®žä¸Šé¢çš„ä»£ç ä¸­è¿˜æœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæˆ‘æ²¡æœ‰ç›´æŽ¥æŠŠä¼˜åŒ–è¿‡åŽçš„ä»£ç å†™å‡ºæ¥æ˜¯æ€•ä¸æ˜“äºŽåˆå­¦è€…é˜…è¯»å­¦ä¹ ï¼Œå®¹æ˜“çœ‹æ™•ã€‚ æ¯”å¦‚è¯´æˆ‘ä»¬åº”è¯¥åˆ©ç”¨actionTypesç»Ÿä¸€å¸¸é‡, é¢„é˜²å› æ‹¼å†™å¼•å‘çš„bugï¼Œä»¥åŠå°†actionçš„åˆ›å»ºæ”¾åˆ°actionCreatorsä¸­ç»Ÿä¸€è¿›è¡Œç®¡ç†ã€‚è¿™æ ·åšçš„ä¼˜ç‚¹é™¤äº†æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ åœ¨å®žé™…å¼€å‘ä¸­ï¼Œreduxä¹Ÿåº”éµç…§ç»„ä»¶åŒ–å¼€å‘ï¼Œå»ºè®®æ¯ä¸ªç»„ä»¶éƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±çš„storeæ–‡ä»¶å¤¹ï¼Œsrcç›®å½•ä¸‹çš„storeåº”ä»…ä»…ä½œä¸ºå„ä¸ªç»„ä»¶å†…storeçš„é›†åˆã€‚ åœ¨å­ç»„ä»¶Listä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨æ•°ç»„çš„indexä½œä¸ºkeyå€¼å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚äº‹å®žä¸Šæˆ‘è®¤ä¸ºä¸åˆ°ä¸‡ä¸å¾—å·²çš„æƒ…å†µä¸è¦ä½¿ç”¨indexä½œä¸ºkeyå€¼ã€‚å› ä¸ºåˆ—è¡¨æ¯ä¸€é¡¹çš„é¡ºåºéƒ½å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼ˆæ¯”å¦‚è¯´æˆ‘ä»¬å¦‚æžœåˆ é™¤listä¸­çš„æŸä¸€é¡¹æ—¶ï¼Œlistçš„é¡ºåºå°±å‘ç”Ÿäº†å˜åŒ–ï¼Œlistä¸­æ¯ä¸€é¡¹çš„indexå€¼éƒ½å‘ç”Ÿäº†æ”¹å˜ï¼‰ï¼Œreactåˆæ˜¯é€šè¿‡diffç®—æ³•åŽ»æ¸²æŸ“é¡µé¢çš„ï¼Œdiffç®—æ³•é€šè¿‡keyå€¼åŽ»å¯¹æ¯”è™šæ‹Ÿdomï¼Œå¦‚æžœkeyå€¼å…¨éƒ¨å‘ç”Ÿæ”¹å˜ï¼Œé‚£è™šæ‹Ÿdomä¾¿ä¼šå…¨éƒ¨æ›´æ–°ï¼Œè¿™æ˜Žæ˜¾ä¼šé™ä½Žæˆ‘ä»¬çš„æ€§èƒ½ï¼Œæ‰€ä»¥è¯´ä½¿ç”¨æ•°ç»„çš„indexä½œä¸ºkeyå€¼æ˜¯ä¸‹ä¸‹ç­–ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥åŽ»çœ‹çœ‹è¿™ç¯‡æ–‡ç« æ·±åº¦è§£æžä½¿ç”¨ç´¢å¼•ä½œä¸º key çš„è´Ÿé¢å½±å“ã€‚ å› ä¸ºdiffç®—æ³•ï¼ˆè™šæ‹Ÿdomä»Žé¡¶å±‚ å±‚å±‚æ¯”å¯¹ï¼‰çš„åŽŸå› ï¼Œæ‰€ä»¥åœ¨çˆ¶ç»„ä»¶å†…åªè¦ä¸€æ”¹å˜inputValueçš„å€¼ï¼Œå­ç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“ï¼Œå³ä½¿æˆ‘ä»¬å¹¶æ²¡æœ‰ä¿®æ”¹listæ•°æ®ã€‚è¿™åŒæ ·ä¼šé™ä½Žæˆ‘ä»¬çš„æ€§èƒ½ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœä½ æ‹¥æœ‰éžå¸¸å¤šçš„å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶è¾“å…¥ä»»ä½•ä¸€ä¸ªå­—ç¬¦éƒ½ä¼šå¯¼è‡´æ‰€æœ‰å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¼šæ¶ˆè€—å¤šå°‘çš„æ€§èƒ½å‘¢ï¼Ÿä¸ºäº†è§£å†³è¿™ç§å¤šä½™æ€§èƒ½çš„æ¶ˆè€—ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨å­ç»„ä»¶å†…åˆ©ç”¨reactå†…ç½®çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°shouldComponentUpdateåŽ»é˜»æ­¢å­ç»„ä»¶è·Ÿéšçˆ¶ç»„ä»¶åŽ»æ‰§è¡Œæ— è°“çš„renderå‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…è™šæ‹Ÿdomçš„æ¯”å¯¹ï¼Œæå‡æ€§èƒ½ã€‚ æŽ¨èé˜…è¯»1ã€yarnæž„å»ºreacté¡¹ç›®2ã€å¸¦ä½ ä¸Šæ‰‹react-redux+ä»£ç ç¤ºä¾‹ è¿™ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±å…¨éƒ¨ç»“æŸäº†ï¼Œæœ¬æ¥æƒ³åœ¨ä¸€ç¯‡é‡ŒæŠŠreduxå’Œreact-reduxéƒ½å†™å‡ºæ¥ï¼Œä½†æ˜¯æ€•å¤ªé•¿äº†ï¼Œæ‰€ä»¥ä¸‹æ¬¡æ‰¾æ—¶é—´å†å†™react-reduxå§ã€‚ å¦‚æžœä½ å¯¹è¿™ç¯‡æ–‡ç« æœ‰ä»»ä½•ç–‘é—®æˆ–è¡¥å……ï¼Œéƒ½å¯ä»¥åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€è®¨è®ºã€‚ é¡ºä¾¿ä¸€ææœ€è¿‘çœ‹äº†æŽ’çƒå°‘å¹´çš„åŠ¨æ¼«ï¼Œè™½ç„¶æ¯”è¾ƒå†·é—¨ä½†æ˜¯çœŸçš„æ˜¯ä¸€éƒ¨ä¸å¯å¤šå¾—çš„å¥½ä½œå“ï¼Œæ— è®ºä½ å–œä¸å–œæ¬¢æŽ’çƒæˆ‘è§‰å¾—ä½ çœ‹äº†è¿™éƒ¨åŠ¨æ¼«åŽéƒ½ä¼šçˆ±ä¸Šå®ƒçš„ï¼Œå¼ºçƒˆå®‰åˆ©ä¸€æ³¢ã€‚ å¤§å®¶æ™šå®‰å•¦ã€‚]]></content>
      <tags>
        <tag>categories</tag>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitå¸¸è§„æ“ä½œã€åˆå§‹åŒ–/æäº¤ä»£ç /æ’¤é”€/åˆ é™¤/åˆå¹¶åˆ†æ”¯/å‚¨å­˜å˜æ›´ã€‘]]></title>
    <url>%2F2019%2F02%2F18%2FgitOrder%2F</url>
    <content type="text"><![CDATA[ç”±äºŽå…¬å¸ä¸€ç›´ç”¨çš„SVNå¯¹é¡¹ç›®è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œæ‰€ä»¥ä¸€ç›´ä¹Ÿæ²¡æ€Žä¹ˆæŽ¥è§¦è¿‡gitã€‚è™½ç„¶æˆ‘ä¹‹å‰æœ‰ä½¿ç”¨ç äº‘ç§æœ‰ä»“åº“ç®¡ç†ä»£ç ï¼Œä½†æ˜¯æˆ‘å¯¹gitçš„æ“ä½œè¿˜åœç•™åœ¨git add . git commit -mä¸Šã€‚ç›´åˆ°æœ€è¿‘å¬è¯´githubçš„ç§æœ‰ä»“åº“å…è´¹äº†ï¼Œæ‰€ä»¥æˆ‘åˆæŠ½æ—¶é—´çœ‹äº†ä¸‹gitçš„åŸºæœ¬æ“ä½œ(å…è´¹ä½¿æˆ‘è¿›æ­¥ï¼Œå“ˆå“ˆå“ˆ~~)ï¼Œä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„ç¬”è®°ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚ åŸºç¡€éƒ¨åˆ†åˆå§‹åŒ–gitgit init åˆå§‹åŒ– æ£€æŸ¥çŠ¶æ€git status æ£€æµ‹æ–‡ä»¶çŠ¶æ€(æœ‰æ²¡æœ‰è¢«è¿½è¸ªUntracked) æäº¤åˆ°ç‰ˆæœ¬åº“çš„æ–‡ä»¶ä¸ä¼šæ˜¾ç¤ºåœ¨git statusé‡Œ GITå››ç§çŠ¶æ€untracked æœªè¢«è¿½è¸ªmodified è¡¨ç¤ºå·¥ä½œåŒºä¿®æ”¹äº†æŸä¸ªæ–‡ä»¶ä½†æ˜¯æ²¡æœ‰æ·»åŠ åˆ°æš‚å­˜åŒºstaged è¡¨ç¤ºæŠŠå·¥ä½œåŒºä¿®æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°äº†æš‚å­˜åŒºä½†æ˜¯æ²¡æœ‰æ¯”è¾ƒåˆ°ç‰ˆæœ¬åº“Commited è¡¨ç¤ºæ•°æ®è¢«å®‰å…¨çš„å­˜å‚¨åœ¨æœ¬åœ°åº“ä¸­ GITä¸‰å±‚ç»“æž„working directory å·¥ä½œåŒºstaging index æš‚å­˜åŒºgit directory(Repository) ç‰ˆæœ¬åº“ æäº¤ä»£ç git add fileName è¿½è¸ª (ä»Žå·¥ä½œåŒºæ·»åŠ åˆ°æš‚å­˜åŒº)git add . è¿½è¸ªå…¨éƒ¨æœ¬åœ°æ–‡ä»¶åˆ°æš‚å­˜åŒºgit commit -m â€˜æè¿°â€™ æäº¤åˆ°ç‰ˆæœ¬åº“ å‘Šè¯‰gitä½¿ç”¨è€…çš„èº«ä»½git config â€”global user.name yourNamegit config â€”global user.email yourEmail å…¶ä»–git config â€”list æŸ¥çœ‹gité…ç½®æƒ…å†µgit log æŸ¥çœ‹æäº¤ä¿¡æ¯(æäº¤äºº/é‚®ç®±)git help å‘½ä»¤å (ä¾‹git help add):å°†å¼¹å‡ºæƒ³è¦æŸ¥æ‰¾çš„å‘½ä»¤çš„æ–‡æ¡£ æ’¤é”€éƒ¨åˆ†git add . + git commit -m â€˜msg == git commit -am â€˜msgâ€™ ä¾‹å¦‚: git commit -m â€˜versions 1.0â€™ æäº¤åˆ°ç‰ˆæœ¬åº“è¿™æ—¶å€™ä¸èƒ½ä½¿ç”¨ â€˜versions 1.0â€™ å†æ¬¡æäº¤äº† å¦‚æžœè¿˜æƒ³ç”¨è¿™ä¸ªåå­—çš„è¯ ä½¿ç”¨â†“â†“git commitâ€”amend æ’¤é”€ä¸Šä¸€æ¬¡çš„æäº¤,å¹¶å°†æš‚å­˜åŒºçš„æ–‡ä»¶é‡æ–°æäº¤ ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤æ”¹å˜ç‰ˆæœ¬æè¿°(ä¸æ”¹å˜æš‚å­˜åŒºå†…å®¹çš„æƒ…å†µä¸‹) git checkout â€” fileName ç¼–è¾‘å™¨çš„æ–‡ä»¶æ¢å¤æˆäº†ä¿®æ”¹å‰çš„æ ·å­(æœ€åŽä¸€æ¬¡æäº¤)git checkout â€” . æ’¤é”€æ¢å¤å…¨éƒ¨æ–‡ä»¶ git reset HEAD fileName æ’¤é”€æäº¤åˆ°æš‚å­˜åŒº ï¼ˆè¿™çš„HEADä¸ºå¤´æŒ‡é’ˆï¼‰æ­¤å¤„HEADä¹Ÿå¯ä»¥æ¢ä¸ºç‰ˆæœ¬å·(å°†ç›¸åº”ç‰ˆæœ¬é‡Œçš„æ–‡ä»¶æ‹‰å›žåˆ°æš‚å­˜åŒº)è¿™ä¸€æ­¥ä¸ä¼šå½±å“å·¥ä½œåŒºâ†‘â†‘,æƒ³å·¥ä½œåŒºæ¢å¤ éœ€è¦ä½¿ç”¨git checkout â€” fileNameUnstaged changes after reset(å°†æ”¹å˜æ’¤é”€æš‚å­˜); å¯ä»¥é€šè¿‡git log æŸ¥çœ‹å„ç§ç‰ˆæœ¬çš„ç‰ˆæœ¬å· ç„¶åŽé€šè¿‡ç‰ˆæœ¬å·æ¢å¤åˆ°æŸä¸ªç‰ˆæœ¬(è¿™ä¹Ÿä¼šæ”¹å˜HEADçš„æŒ‡å‘)git reset ç‰ˆæœ¬å·(commitåŽé¢çš„) æ–‡ä»¶å;å†ç”¨git checkout â€” fileName æ‹‰å›žæ¥ åˆ é™¤éƒ¨åˆ†git rm fileName:æ­¤æ­¥æ“ä½œä¼šæŠŠå·¥ä½œåŒºçš„æ–‡ä»¶è¿žåŒæš‚å­˜åŒºçš„æ–‡ä»¶ä¸€èµ·è¢«åˆ é™¤ å½“å·¥ä½œåŒºçš„æ–‡ä»¶æˆ–è€…æš‚å­˜åŒºçš„æ–‡ä»¶è¢«ä¿®æ”¹åŽ,æƒ³è¿›è¡Œgit rm æ“ä½œ,gitä¼šç¦æ­¢æˆ‘ä»¬åˆ é™¤,èµ·åˆ°äº†ä¸€ä¸ªé˜²æ­¢è¯¯åˆ é™¤çš„ä½œç”¨ã€‚å¦‚æžœæƒ³è¦ä¿ç•™å·¥ä½œåŒºçš„æ–‡ä»¶ é‚£ä¹ˆå°±è¦ç”¨git rm â€”cached æ–‡ä»¶å æ¥ä»…ä»…åˆ é™¤æš‚å­˜åŒºçš„æ–‡ä»¶git rm â€” cached fileName åœ¨ä¸å°å¿ƒå°†ä¸éœ€è¦è¿½è¸ªçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºåŽ,æƒ³åˆ é™¤æš‚å­˜åŒºçš„æ–‡ä»¶ä½†æ˜¯ä¸æƒ³åˆ é™¤å·¥ä½œåŒºçš„æ–‡ä»¶å¾ˆæœ‰ç”¨git rm -f fileName åŒæ—¶åˆ é™¤å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ–‡ä»¶mv fileName newFileName æœ¬åœ°(å·¥ä½œåŒº)é‡å‘½åmv fileName newFileName å·¥ä½œåŒºå’Œæš‚å­˜åŒºéƒ½é‡å‘½å gitæŒ‡é’ˆæ¦‚å¿µGitæŒ‡é’ˆå½“æäº¤ä¸€ä¸ªç‰ˆæœ¬çš„æ—¶å€™,å°±ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬å·(V1),è¿™æ—¶å€™æœ‰ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘è¿™ä¸ªç‰ˆæœ¬,ä¸€ä¸ªæ˜¯master(å½“å‰åˆ†æ”¯æŒ‡é’ˆ),ä¸€ä¸ªæ˜¯HEAD(æŒ‡å‘å½“å‰åˆ†æ”¯çš„æœ€åŽä¸€ä¸ªç‰ˆæœ¬)å½“æäº¤äº†ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬(V2),masteræŒ‡é’ˆå’ŒHEADæŒ‡é’ˆéƒ½æŒ‡å‘äº†æœ€æ–°ä¸€æ¬¡çš„æäº¤(V2),V2æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘V1ã€‚è¿™çš„æŒ‡é’ˆæ˜¯æŒ‡ï¼ˆæ–‡ä»¶ä¸­æœ‰ä¸€å—åœ°æ–¹ä¿å­˜ç€å…¶ä»–æ–‡ä»¶çš„åœ°å€ï¼‰ï¼Œè°ƒç”¨V2çš„æ—¶å€™å¯ä»¥ç›´æŽ¥é€šè¿‡V2æ‰¾åˆ°V1çš„åœ°å€ï¼Œä»Žè€Œè°ƒç”¨V1ï¼Œä»¥è¾¾åˆ°æ–¹ä¾¿çš„è®¿é—®V1çš„ç›®çš„ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚å¦‚æžœåœ¨V2ç‰ˆæœ¬ä¸Šåˆ›å»ºäº†ä¸€ä¸ªåˆ†æ”¯ï¼ˆD1ï¼‰çš„æ—¶å€™ï¼Œmasteråˆ†æ”¯æŒ‡é’ˆä¾æ—§ä¼šæŒ‡å‘V2ï¼Œæ–°çš„D1åˆ†æ”¯æŒ‡é’ˆä¼šæŒ‡å‘æ–°çš„D1åˆ†æ”¯,å½“åˆ‡æ¢åˆ°D1åˆ†æ”¯çš„æ—¶å€™,headæŒ‡é’ˆä¼šåˆ‡æ¢åˆ°D1ä¸Š,æ­¤æ—¶çš„D1è¿˜æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘V2ã€‚ä¿®æ”¹D1åˆ†æ”¯çš„æ—¶å€™,D1å’ŒheadæŒ‡é’ˆä¹Ÿä¼šä»¥æ­¤ç±»æŽ¨åˆ°D2ã€‚å½“ä»ŽD2åˆå¹¶åˆ†æ”¯åˆ°V2çš„æ—¶å€™ï¼Œä¼šå½¢æˆV3åˆ†æ”¯ï¼ŒV3åˆ†æ”¯æ—¢æŒ‡å‘V2åˆ†æ”¯ï¼ŒåˆæŒ‡å‘D2åˆ†æ”¯ã€‚æ­¤æ—¶HEADå’ŒmasteræŒ‡é’ˆæŒ‡å‘V3åˆ†æ”¯ã€‚ åˆ†æ”¯éƒ¨åˆ†git branch æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯git branch -a æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯git branch branchName åˆ›å»ºæ–°åˆ†æ”¯git checkout branchName åˆ‡æ¢åˆ†æ”¯git branch -d branchName åˆ é™¤åˆ†æ”¯ (æ­¤æ“ä½œå¿…é¡»ä¿è¯å½“å‰çš„åˆ†æ”¯éžæƒ³è¦åˆ é™¤çš„é‚£ä¸ªåˆ†æ”¯)git branch -m branchName newBranchName ä¿®æ”¹åˆ†æ”¯ågit checkout -b branchName åˆ›å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ†æ”¯ åˆå¹¶åˆ†æ”¯é¦–å…ˆåˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ï¼ˆmasterï¼‰git merge branchName åˆå¹¶åˆ†æ”¯è¿™æ—¶å€™å¦‚æžœbranchå’Œmasteråœ¨ç›¸åŒä½ç½®æœ‰ä¸åŒçš„ä¿®æ”¹,ä¹Ÿå°±æ˜¯å‘çŽ°äº†å†²çªçš„æ—¶å€™,gitä¼šæŠ›å‡ºä¸€ä¸ªè®©æˆ‘ä»¬æ¥æ‰‹åŠ¨è§£å†³å†²çªçš„é”™è¯¯â†“â†“ã€‚automatic merge failed:fix conflicts and then commit result.(è‡ªåŠ¨åˆå¹¶å¤±è´¥:ä¿®å¤å†²çªï¼Œç„¶åŽæäº¤ç»“æžœã€‚)&lt;&lt;&gt;&gt;branchName æ˜¯branchNameåˆ†æ”¯çš„å†…å®¹ç„¶åŽé‡æ–°git commit -am â€˜msgâ€™ æäº¤åˆ°æš‚å­˜åŒºåŠç‰ˆæœ¬åº“; git diff æ¯”è¾ƒå·®å¼‚(é»˜è®¤æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºæ–‡ä»¶çš„å·®å¼‚) å¦‚æžœæ²¡æœ‰å·®å¼‚æ˜¯ä¸ä¼šæœ‰ä»»ä½•å±•ç¤ºçš„git diff â€”staged æ¯”è¾ƒæš‚å­˜åŒºä¸Žç‰ˆæœ¬åº“ä¹‹é—´çš„å·®å¼‚git diff è¿˜å¯ä»¥æ¯”è¾ƒåŒä¸€ä¸ªåˆ†æ”¯ä¸­ä¸¤ä¸ªä¸åŒçš„ç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚(åœ¨ç‰ˆæœ¬å›žé€€æ—¶éžå¸¸æœ‰ç”¨)ç‰ˆæœ¬hashå€¼ æœ€å°‘é€‰æ‹©4ä¸ª gité»˜è®¤é€‰æ‹©7ä¸ª å»ºè®®å°½é‡é€‰æ‹©8-10ä¸ª è¿™æ ·æ‰èƒ½ä¿è¯å”¯ä¸€æ€§git diff branchName è¿˜å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚ å‚¨å­˜å˜æ›´éƒ¨åˆ†æ¯”å¦‚åœ¨branchåˆ†æ”¯ä¸Šè¿›è¡Œä¿®æ”¹åŽ,åˆ‡æ¢åˆ°masteråˆ†æ”¯,ä¼šæŠ¥ä¸€ä¸ªplease commit your changes or stash them before you switch branches;(è¯·åœ¨åˆ‡æ¢åˆ†æ”¯ä¹‹å‰æäº¤æ›´æ”¹æˆ–å°†å…¶éšè—)çš„é”™è¯¯,æˆ‘ä»¬ä½¿ç”¨git stash æš‚å­˜å·¥ä½œåŒºçš„ä¿®æ”¹,ç„¶åŽgitä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åˆ‡æ¢åˆ°ä¿®æ”¹å‰çš„çŠ¶æ€è¿™æ—¶åˆ‡æ¢åˆ†æ”¯å°±ä¸ä¼šæŠ¥é”™äº†,å› ä¸ºgitåœ¨è¿›è¡Œåˆ†æ”¯åˆ‡æ¢çš„æ—¶å€™,ä¸»è¦æ”¹å˜çš„æ˜¯ç‰ˆæœ¬åº“,å½“å·¥ä½œåŒºæœ‰æ”¹å˜çš„æ—¶å€™,ä¼šç›´æŽ¥å°†å·¥ä½œåŒºçš„æ”¹å˜è¦†ç›–åˆ°å¦å¤–ä¸€ä¸ªåˆ†æ”¯ä¸Š,ä»Žè€Œå½±å“å¦å¤–ä¸€ä¸ªåˆ†æ”¯ã€‚å¦‚æžœæˆ‘ä»¬ä½¿ç”¨git stashè¿›è¡Œå°å­˜,gitå°±ä¼šè‡ªåŠ¨å°†å·¥ä½œåŒºçš„æ”¹å˜æ’¤é”€æŽ‰,å›žåˆ°ä¿®æ”¹å‰çš„çŠ¶æ€(ä¸Šä¸€æ¬¡æäº¤åŽçš„çŠ¶æ€)ã€‚git stash list æŸ¥çœ‹å½“å‰ä¿å­˜äº†å“ªäº›æœ¬åœ°æ–‡ä»¶git stash apply stash@{0} è¿”å›žä¹‹å‰ç”¨git stashå°å­˜çš„æ”¹å˜stash@{0} é‡Œé¢çš„0æ ¹æ®æäº¤git stashçš„æ¬¡æ•°ä»¥æ­¤ç±»æŽ¨git stash pop stash@{0} æ‹‰å›žåˆ°æš‚å­˜åŒºå’Œæœ¬åœ°æ­¤æ—¶å†æ‰§è¡Œ git stash list æŸ¥çœ‹å°å­˜çš„æ–‡ä»¶æ—¶ stash@{0}ä¸è§äº†ä¹Ÿå°±æ˜¯è¯´ git stash pop stash@{0} æ˜¯åœ¨git stash apply stash@{0}çš„åŸºç¡€ä¸Š,å¢žåŠ äº†ä¸€ä¸ªåˆ é™¤å‘½ä»¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿”å›žçš„åŒæ—¶ï¼Œåˆ é™¤git stashä¸­çš„è¿™ä¸ªæ–‡ä»¶çš„å‘½ä»¤ã€‚git stash drop stash@{0} åˆ é™¤å°å­˜çš„ä¿®æ”¹ã€‚ç»¼ä¸Š git stash pop stash@{0} = git stash apply stash@{0} + git stash drop stash@{0} ä½¿ç”¨è¿œç¨‹ä»“åº“ç®¡ç†ä»£ç (github/ç äº‘)git push è¿œç¨‹ä»“åº“åœ°å€ (åˆ†æ”¯:å¯ä¸å¡«) :æŽ¨é€åˆ°è¿œç¨‹ä»“åº“git pullå¦‚æžœä½¿ç”¨sshåœ°å€åœ¨ç®¡ç†å‘˜è´¦æˆ·ä½¿ç”¨ ssh-keygen ç”Ÿæˆå¯†é’¥ æ–‡æ¡£åŽç¼€ä¸ºFileçš„ä¸ºç§é’¥ åŽç¼€ä¸ºPUB(publicçš„ç¼©å†™) Fileä¸ºå…¬é’¥ç„¶åŽç‚¹å‡»githubâ†’settingâ†’SSHâ†’New SSH keyâ†’è¾“å…¥æ ‡é¢˜/æ·»åŠ å…¬é’¥;æ­¤æ—¶å°±å¯ä»¥ç”¨SSHåœ°å€æ‹‰å–äº† æŽ¨ä»£ç åˆ°è¿œç¨‹ä»“åº“:æ–¹æ³•1: git push git@github.com:ä»“åº“åç§°(name/xxx.com.git); æ–¹æ³•2: git push ä»“åº“åœ°å€(https://github.com/name/xxx.com.git) æ–¹æ³•3: git remote add å–ä¸€ä¸ªä»“åº“å(é€šå¸¸ä½¿ç”¨origin) git@github.com:ä»“åº“åç§°(name/xxx.com.git); git remote -v æŸ¥çœ‹æ·»åŠ çš„è¿œç¨‹ä»“åº“ç„¶åŽä½¿ç”¨ git push origin master æŽ¨é€åˆ°è¿œç¨‹ä»“åº“ git pull ä»“åº“å åˆ†æ”¯å(master) æ‹‰å–åˆ°æœ¬åœ° è®©gitä¸è¿½è¸ªæŒ‡å®šæ–‡ä»¶å¦‚æžœæœ‰ä¸€äº›æ–‡ä»¶ä¸æƒ³è®©gitå¯¹å®ƒè¿½è¸ªtouch .gitignore : åœ¨é¡¹ç›®ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ª .gitignoreæ–‡ä»¶vim .gitignore ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ç„¶åŽæŠŠæƒ³å¿½ç•¥çš„æ–‡ä»¶æ·»åŠ åˆ°cmdå‘½ä»¤è¡Œæˆ–è€…å¯ä»¥ index.* :å¿½ç•¥æ‰€æœ‰ä»¥index.ä¸ºå¼€å¤´çš„æ–‡ä»¶(æ”¯æŒglobè§„åˆ™)ä¹Ÿå¯ä»¥åœ¨é‡Œé¢åŠ ä¸Š.gitignore è®©ä»–å¿½ç•¥.gitignoreæ–‡ä»¶globè§„åˆ™: (&#42;å·)åŒ¹é…é›¶æˆ–å¤šä¸ªä»»æ„å­—ç¬¦ [abc]åŒ¹é…ä»»ä½•ä¸€ä¸ªåˆ—åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦ (?å·)åªåŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ [0-9]/[a-z]åŒ¹é…èŒƒå›´ å·²ç»é•¿ä¼ åˆ°æš‚å­˜åŒº/ç‰ˆæœ¬åº“çš„æƒ³å¿½ç•¥çš„æ–‡ä»¶,å¯ä»¥:git rm index.html â€”cached åˆ é™¤æš‚å­˜åŒºçš„æ–‡ä»¶ä»»ä½•å†æäº¤ git commit -m â€˜msg æäº¤â†‘çš„æ“ä½œ:è¿™æ—¶,æäº¤çš„è¿˜æ˜¯æš‚å­˜åŒºçš„æ–‡ä»¶,æœ¬åœ°ä»ç„¶æ˜¯æ”¹å˜è¿™ä¸ªindex.html,è¿™ä¸ªæ”¹å˜å¹¶æ²¡æœ‰æäº¤åˆ°æš‚å­˜åŒº,æ›´æ²¡æœ‰åˆ°ç‰ˆæœ¬åº“åªæœ‰å°†æš‚å­˜åŒºé‡Œç›¸åº”æ–‡ä»¶åˆ é™¤åŽ,å¿½ç•¥æ‰ç”Ÿæ•ˆ ~]]></content>
      <tags>
        <tag>notes</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ŒN1è¯­æ³•ã€ã‹ãŸãŒãŸã€ã‹ãŸã‚ã‚‰ã€ãŒã¦ã‚‰çš„åŒºåˆ«]]></title>
    <url>%2F2018%2F12%2F28%2FN1-ktwr-ktgt-gtr%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä»Žä»Šå¤©å¼€å§‹ï¼Œæˆ‘ä¼šé™†ç»­æ•´ç†N1ä¸ŽN2æ˜“æ··æ·†çš„è¯­æ³•ï¼Œä»¥ä¾¿æ—¥å¸¸å¤ä¹ è®°å¿†ã€‚è¯´åˆ°æ˜“æ··æ·†çš„è¯­æ³•ï¼Œæˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯N1è¯­æ³•çš„ã€Œã‹ãŸãŒãŸã€ã‹ãŸã‚ã‚‰ã€ãŒã¦ã‚‰ã€è¿™ä¸‰å¤§å£®æ±‰ã€‚ä¸å¤¸å¼ çš„è¯´ï¼Œæœ‰äº›å·²ç»é€šè¿‡N1çš„å°ä¼™ä¼´å¯èƒ½éƒ½ä¸å¤ªèƒ½åˆ†æ¸…è¿™ä¸‰è€…ï¼Œå¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹å®ƒä»¬ä¸‰è€…çš„æŽ¥ç»­æ–¹æ³•ã€‚ æŽ¥ç»­æ–¹æ³• ã‹ãŸãŒãŸ ã‹ãŸã‚ã‚‰ ãŒã¦ã‚‰ åè¯ï¼ˆã‚µå˜è¯å¹²ï¼‰ åè¯+ã® åè¯ï¼ˆã‚µå˜è¯å¹²ï¼‰ åŠ¨è¯åŽŸå½¢ åŠ¨è¯ã¾ã™å½¢ ç”¨æ³•åŠé€ å¥1ã€A ã‹ãŸãŒãŸ Bæ—¥æ–‡è§£é‡Šï¼šAã®ã¤ã„ã§ã«Bã‚’ã™ã‚‹ã€‚Aã‚’ã‹ã­ã¦Bã‚’ã™ã‚‹ã€‚ 1ã€ä¹¦é¢ç”¨è¯­2ã€è¶ç€åšAçš„æœºä¼šé¡ºä¾¿åšBï¼Œå¤šç”¨äºŽä¿¡ä»¶å’Œæ­£å¼åœºåˆã€‚ä¾‹ï¼šã€ŒãŠç¤¼ã‚’è¨€ã†ã€ãŠè¦‹èˆžã„ã€ã”å ±å‘Šã€ã”æŒ¨æ‹¶ã€ç­‰ã€‚é€ å¥ï¼šå…ˆæ—¥ã®ãŠç¤¼ã‹ãŸãŒãŸã€ãŠè¦‹èˆžã„ã«è¡Œãã€‚ 2ã€A ã‹ãŸã‚ã‚‰ Bæ—¥æ–‡è§£é‡Šï¼šAã¨åŒæ™‚ã«/ã®åˆé–“ã«bã‚’ã™ã‚‹ã€‚ 1ã€ä¸€è¾¹åšAçš„åŒæ—¶ï¼Œé¡ºä¾¿åšBï¼ŒAä¸ºæœ¬è´¨ã€‚2ã€å¿…é¡»æ˜¯é•¿æœŸçš„äº‹ã€‚é€ å¥ï¼šå½¼ã¯å‹‰å¼·ã®ã‹ãŸã‚ã‚‰ã€ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã‚‹ã€‚ 3ã€A ãŒã¦ã‚‰ Bæ—¥æ–‡è§£é‡Šï¼šAã—ãªãŒã‚‰/ã®ã¤ã„ã§ã«Bã‚’ã™ã‚‹ã€‚ 1ã€ä¸Žã‹ãŸãŒãŸç›¸ä¼¼ï¼Œè¾ƒå£è¯­2ã€è¶ç€åšAé¡ºä¾¿åšBï¼ˆAã€Bæœ‰ä¸»æ¬¡é¡ºåºï¼Œæ˜¯çŸ­æœŸçš„äº‹ï¼‰ã€‚é€ å¥ï¼šå¤•æ¶¼ã¿ãŒã¦ã‚‰ã€è›ã‚’è¦‹ã«è¡Œã£ãŸã€‚ æ—¥æœ¬äººçœ¼ä¸­çš„è¯­æ³•è¯´èµ·æ¥æŒºæœ‰è¶£çš„ï¼Œä¹‹å‰ç¢°å·§ç»™ä¸€ä¸ªæ—¥æœ¬çš„æœ‹å‹çœ‹è¿‡è¿™ä¸‰ä¸ªè¯­æ³•ï¼Œä»–å´å’Œæˆ‘è¯´ä»Žæ¥æ²¡çœ‹åˆ°è¿‡ã‹ãŸãŒãŸè¿™ä¸ªç”¨æ³•ï¼Œç”šè‡³è¿žå®ƒçš„æ„æ€éƒ½ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚ ä»ŽèŠå¤©æˆªå›¾å¯ä»¥çœ‹å‡ºï¼Œæ—¥å¸¸ä¸­ä»–ä»¬è¿žã‹ãŸã‚ã‚‰å’ŒãŒã¦ã‚‰ä¹Ÿä¸æ€Žä¹ˆç”¨ï¼Œä½†æ˜¯æˆ‘ä¹Ÿå¬è¿‡å…¶ä»–çš„æ—¥æœ¬æœ‹å‹è¯´è¿‡å¾¡ç¤¼æ–¹ã€…ã€ŒãŠã‚Œã„ã‹ãŸãŒãŸã€è¿™ç§ç”¨æ³•ã€‚æ‰€ä»¥åˆ°åº•è¦åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è¿™ä¸‰ä¸ªè¯­æ³•ï¼Œè¿˜æ˜¯æ ¹æ®å®žé™…æƒ…å†µè‡ªå·±è€ƒé‡å§ã€‚ ä»¥ä¸Šã§ã™ã€‚]]></content>
      <tags>
        <tag>notes</tag>
        <tag>N1</tag>
        <tag>æ—¥è¯­</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[èŠä¸€èŠæ·±æ‹·è´ã€æµ…æ‹·è´çš„åŒºåˆ«ã€Vuexè¸©å‘è®°å½•ã€‘]]></title>
    <url>%2F2018%2F12%2F24%2FdepthClone%2F</url>
    <content type="text"><![CDATA[vuexè¸©å‘è®°å½•å‰ä¸€é˜µå­åœ¨ä½¿ç”¨Vuexçš„æ—¶å€™ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªæŠ¥é”™ã€‚ Do not mutate vuex store state outside mutation handlers. ç›´è¯‘è¿‡æ¥å°±æ˜¯ä¸è¦åœ¨çªå˜å¤„ç†ç¨‹åºä¹‹å¤–æ”¹å˜vuexå­˜å‚¨çŠ¶æ€ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ—¢ç„¶ä½¿ç”¨äº†vuexï¼Œé‚£ä¹ˆæƒ³è¦æ›´æ”¹vuexä¸­storeçš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯æäº¤mutationï¼Œå› ä¸ºvuexä¸å…è®¸ç›´æŽ¥ä¿®æ”¹storeçš„å†…å®¹ï¼Œæ‰€ä»¥æ‰ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚æˆ‘åœ¨å·²çŸ¥è¿™ç‚¹çš„æƒ…å†µä¸‹ï¼Œå…ˆslice()äº†vuexé‡Œçš„æ•°æ®ï¼Œå†è¿›è¡Œä½¿ç”¨ï¼Œå¯è¿˜æ˜¯æŠ¥äº†ç›¸åŒçš„é”™è¯¯ã€‚åŽæ¥æŸ¥äº†ä¸‹èµ„æ–™ï¼Œæ‰å‘çŽ°æ˜¯æ·±æµ…æ‹·è´çš„é—®é¢˜ï¼Œä¸‹é¢å°±æ¥æµ…è°ˆä¸€ä¸‹æ·±æµ…æ‹·è´çš„åŒºåˆ«ï¼Œä»¥åŠæ€»ç»“å‡ ç§ä¸åŒçš„æ·±æµ…æ‹·è´æ–¹æ³•ã€‚ æ·±æµ…æ‹·è´ä»‹ç»åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼ˆä¾‹å¦‚Javaã€JavaScriptã€C++ï¼‰ï¼Œä¸åŒçš„æ•°æ®ç±»åž‹ï¼Œå¯¹åº”ç€ä¸åŒçš„å†…å­˜å­˜å‚¨æ–¹å¼ï¼ŒåŸºæœ¬æ•°æ®ç±»åž‹é€šå¸¸ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼Œè€Œå¼•ç”¨ç±»åž‹ä»…ä»…æ˜¯åœ¨æ ˆå†…å­˜ä¸­ä¿å­˜äº†ä¸€ä¸ªæŒ‡å‘å †å†…å­˜çš„åœ°å€ï¼Œé€šè¿‡åœ¨æ ˆå†…å­˜ä¸­ä¿å­˜çš„åœ°å€ï¼ŒåŽ»è®¿é—®åˆ°ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å€¼ã€‚æˆ‘ä»¬æ‰€è¯´çš„æµ…æ‹·è´ï¼Œæ­£æ˜¯æ‹·è´äº†æ ˆå†…å­˜ä¸­çš„å¼•ç”¨ç±»åž‹æ•°æ®çš„æŒ‡é’ˆï¼Œè€Œæ·±æ‹·è´ï¼Œåˆ™æ˜¯åœ¨æ‹·è´æ•°æ®å†…å®¹çš„åŒæ—¶ï¼Œç”Ÿæˆæ–°çš„æŒ‡é’ˆï¼Œåœ¨å †å†…å­˜ä¸­å¼€è¾Ÿè‡ªå·±çš„ç©ºé—´ã€‚æˆ‘ç”¨å¤§ç™½è¯æ¥è§£é‡Šä¸€ä¸‹ï¼Œæ‰€è°“çš„æµ…æ‹·è´ï¼Œæ¯”æ–¹è¯´æˆ‘ä»¬æœ‰bè¿™æ ·ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬ç”¨aå¤åˆ¶äº†bï¼Œå½“æˆ‘ä»¬æ”¹å˜bçš„æ—¶å€™è§‚å¯Ÿaä¼šä¸ä¼šéšä¹‹å˜åŒ–ï¼Œå¦‚æžœaä¹Ÿå˜äº†ï¼Œé‚£å°±æ˜¯æµ…æ‹·è´ï¼ˆå› ä¸ºåªå¤åˆ¶äº†æ ˆå†…å­˜ä¸­çš„æŒ‡é’ˆï¼Œå®ƒä»¬æŒ‡å‘çš„è¿˜æ˜¯ç›¸åŒçš„å †å†…å­˜ç©ºé—´ï¼‰ï¼Œå¦‚æžœaæ²¡å˜ï¼Œé‚£è¯æ˜Žaå’Œbåœ¨å †å†…å­˜ä¸­åˆ†åˆ«å ç”¨äº†ä¸åŒçš„ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯æ·±æ‹·è´äº†ã€‚ æµ…æ‹·è´1234//æˆ‘åœ¨æ­¤å¤„å®šä¹‰äº†ä¸€ä¸ªå˜é‡aVuexDataï¼ŒaVuexDataæ˜¯ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå¯¹è±¡çš„æ•°ç»„ã€‚let aVuexData=[&#123;name:'Jack',age:18&#125;,&#123;name:'Tom',age:20&#125;,&#123;name:'David',age:15&#125;];let arr=aVuexData;console.log(arr==aVuexData);//true,è¯æ˜Žarrä¸ŽaVuexDataçš„æŒ‡é’ˆç›¸åŒï¼Œå®ƒä»¬æŒ‡å‘å †å†…å­˜ä¸­ç›¸åŒçš„æ•°æ®ã€‚ ç´§æŽ¥ç€æˆ‘ä»¬ä¿®æ”¹arrã€‚12arr[0].name='Hank';console.log(aVuexData[0].name=='Hank');//true aVuexData[0].name==â€™Hankâ€™ä¸ºtrueï¼Œè¯æ˜ŽaVuexData[0]çš„nameå€¼ç”±åŽŸå…ˆçš„Jackå˜æˆäº†Hankï¼Œä½†æˆ‘ä»¬æ²¡æœ‰å¯¹aVuexDataåšä»»ä½•æ“ä½œï¼ŒaVuexDataæ˜¯éšç€arræ”¹å˜è€Œæ”¹å˜äº†ï¼Œè¿™æ˜¯æ˜¾è€Œæ˜“è§çš„æµ…æ‹·è´ã€‚ slice()æ‹·è´æˆ‘ä»¬çŸ¥é“slice()æ–¹æ³•å¯ä»Žå·²æœ‰çš„æ•°ç»„ä¸­è¿”å›žé€‰å®šçš„å…ƒç´ ï¼Œå®ƒçš„è¿”å›žå€¼æ˜¯ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚è¿™æ ·çœ‹æ¥ï¼Œslice()ä¼¼ä¹Žå¯ä»¥å¸®æˆ‘ä»¬è¾¾åˆ°æ·±æ‹·è´çš„ç›®çš„ï¼Œä½†å®ƒå¹¶ä¸å¯é ï¼Œè¿™ä¹Ÿæ­£æ˜¯æˆ‘åœ¨vuexé‡ŒæŠ¥é”™çš„åŽŸå› ï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚æŽ¥ç€ä½¿ç”¨ä¸Šé¢çš„aVuexDataã€‚123let arrNew=aVuexData.slice();console.log(arrNew==aVuexData);//falseï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤å¤„çš„arrNewä¸ŽaVuexDataæŒ‡å‘äº†ä¸åŒçš„æŒ‡é’ˆåœ°å€ï¼Œå³ä½¿æ•°æ®ç›¸åŒï¼Œå®ƒä»¬ä¹Ÿå„è‡ªåœ¨å †å†…å­˜ä¸­æ‹¥æœ‰ç€è‡ªå·±çš„ä¸€å¸­ä¹‹åœ°ã€‚console.log(arrNew[0]==aVuexData[0]);//true æ³¨æ„ï¼Œè¿™æ—¶å€™æ‰“å°arrNew[0]ä¸ŽaVuexData[0]æ˜¯å¦ç›¸ç­‰ï¼Œè¿”å›žçš„ç»“æžœæ˜¯trueï¼Œè¯æ˜Žå®ƒä»¬çš„æŒ‡é’ˆè¿˜æ˜¯æŒ‡å‘åŒä¸€ä¸ªå †å†…å­˜åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è™½ç„¶æ·±æ‹·è´äº†å¤–å±‚çš„æ•°ç»„ï¼Œä½†å¹¶æ²¡æœ‰å¯¹æ•°ç»„ä¸­çš„å¼•ç”¨ç±»åž‹æ•°æ®è¿›è¡Œæ·±æ‹·è´â€”â€”å®ƒä¾æ—§æ˜¯ä»…ä»…æ‹·è´äº†æŒ‡é’ˆåœ°å€ï¼Œä¾æ—§æ˜¯ä¸€ä¸ªæµ…æ‹·è´ã€‚slice()å¹¶æ²¡æœ‰è®©å†…å±‚çš„å¼•ç”¨ç±»åž‹æ•°æ®å¼€è¾Ÿæ–°çš„å †å†…å­˜ç©ºé—´ï¼Œè¿™ä¹Ÿæ­£æ˜¯vuexæŠ¥é”™çš„åŽŸå› ï¼Œæˆ‘ä»¬åœ¨æ”¹å˜å†…å±‚æ•°æ®çš„æ—¶å€™ï¼Œå…¶å®žè¿˜æ˜¯ç›´æŽ¥ä¿®æ”¹äº†åœ¨vuexçš„storeé‡Œçš„æ•°æ®ï¼Œæ‰€ä»¥æ‰ä¼šæŠ¥é”™ã€‚ concat()æ‹·è´1let arrNew = [].concat(aVuexData); concat()æ–¹æ³•ä¸ä¼šæ”¹å˜çŽ°æœ‰çš„æ•°ç»„ï¼Œè€Œä»…ä»…ä¼šè¿”å›žè¢«è¿žæŽ¥æ•°ç»„çš„ä¸€ä¸ªå‰¯æœ¬ã€‚åœ¨æ‹·è´å¼•ç”¨ç±»åž‹çš„æ•°æ®æ—¶ï¼Œconcat()æ–¹æ³•çš„æ•ˆæžœä¸Žslice()æ–¹æ³•å®Œå…¨ç›¸åŒã€‚slice()ä¸Žconcat()éƒ½å¯ä»¥è¿›è¡Œå¼•ç”¨ç±»åž‹å†…æ•°æ®ä¸ºåŸºæœ¬ç±»åž‹æ•°æ®çš„æ·±æ‹·è´ï¼Œä½†æˆ‘è®¤ä¸ºè¿™æ ·åšå¤ªè¿‡å†’é™©ï¼Œå› ä¸ºä¸€æ—¦å†…å®¹é‡Œè¢«åŠ ä¸Šäº†ä¸€ä¸ªå¼•ç”¨ç±»åž‹çš„å€¼ï¼Œé‚£ä¹ˆå®ƒå°±ä¸å†æ˜¯ä¸€ä¸ªæ·±æ‹·è´äº†ï¼Œæ‰€ä»¥ä¸ºäº†ä»¥é˜²ä¸‡ä¸€ï¼Œæˆ‘è¿˜æ˜¯æŠŠè¿™ä¸¤ä¸ªæ–¹æ³•å½’åœ¨äº†æµ…æ‹·è´é‡Œã€‚ æ·±æ‹·è´é‚£ä¹ˆï¼Œç©¶ç«Ÿæ€Žæ ·æ‰èƒ½ä¸‡æ— ä¸€å¤±çš„è¿›è¡Œæ·±æ‹·è´å‘¢ï¼Ÿ é€’å½’æ–¹æ³•æˆ‘è¿™è¾¹è‡ªå·±å°è£…äº†ä¸€ä¸ªå‡½æ•°1234567891011121314151617181920212223242526let DeepClone = (value) =&gt; &#123; let type = typeof value; //å› ä¸ºæ•°ç»„è¦ç”¨åˆ°push å¯¹è±¡è¦ç”¨Object.keys æ‰€ä»¥å¾—æ˜¯ä¸ç”¨çš„ç±»åž‹ è¿™é‡Œå…ˆå®šä¹‰undefined åœ¨åŽé¢å®šä¹‰ç±»åž‹ let newone = undefined; if (type === 'string' || type === 'number' || type === 'boolean') &#123; //åŸºç¡€ç±»åž‹ newone = value; //åŸºç¡€ç±»åž‹ç›´æŽ¥ç­‰äºŽå°±å¥½äº† &#125; else if (type === 'object') &#123; //å †ç±»åž‹ if (value === null) &#123; newone = null; &#125; else if (Object.prototype.toString.call(value).slice(8, -1) === 'Object') &#123; //å¯¹è±¡è¦å…ˆå°†newoneæ”¹ä¸ºå¯¹è±¡ç±»åž‹ newone = &#123;&#125;; for (let key of Object.keys(value)) &#123; newone[key] = DeepClone(value[key]); //é€’å½’ç›´åˆ°å€¼ä¸ºåŸºæœ¬ç±»åž‹ &#125; &#125; else if (Object.prototype.toString.call(value).slice(8, -1) === 'Array') &#123; newone = []; //å¯¹è±¡è¦å…ˆå°†newoneæ”¹ä¸ºæ•°ç»„ç±»åž‹ for (let i = 0; i &lt; value.length; i++) &#123; newone.push(DeepClone(value[i])) //ä¸Žå¯¹è±¡åŒç† &#125; //ä¸ç”¨foreachæ˜¯å¦‚æžœæœ‰undefinedä¼šæœ‰bug &#125; &#125; return newone &#125; //æµ‹è¯• let arrDeepClone = DeepClone(aVuexData); console.log(arrDeepClone[0]==aVuexData[0]);//false æ­¤æ—¶ï¼Œå®ƒä»¬çš„å†…å±‚æ•°æ®ä¹Ÿå·²ç»å¼€è¾Ÿäº†æ–°çš„å †å†…å­˜ç©ºé—´ï¼Œæ˜¯ä¸€ä¸ªå®Œå®Œå…¨å…¨çš„æ·±æ‹·è´äº†ã€‚ åˆ©ç”¨JSONå¯¹è±¡çš„stringifyå’ŒparseJSON.stringify()æ–¹æ³•ç”¨äºŽå°† JavaScript å€¼è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ã€‚JSON.parse()æ–¹æ³•ç”¨äºŽå°†ä¸€ä¸ª JSON å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡ã€‚12345let jsonDeepClone = (value) =&gt; &#123; return JSON.parse(JSON.stringify(value));&#125;let arrJsonDeepClone = jsonDeepClone(aVuexData);console.log(arrJsonDeepClone[0] == aVuexData[0]); //falseï¼ŒåŒæ ·å®žçŽ°äº†æ·±æ‹·è´ æ‰€æœ‰çš„æ‰“å°ç»“æžœä¸€è§ˆ é—²èŠç»ˆäºŽèµ¶åœ¨åœ£è¯žèŠ‚å‰æŠŠè¿™ç¯‡æ–‡ç« æ•´ç†å‡ºæ¥äº†ï¼Œéžå¸¸çš„å¼€å¿ƒ ~ å› ä¸ºæœ€è¿‘åˆšåˆšæŠŠåšå®¢æ­å‡ºæ¥ï¼Œè¿˜å¤„åœ¨ä¸€ä¸ªæ€»ç»“æ•´ç†çš„é˜¶æ®µï¼Œæ‰€ä»¥æ¯å†™ä¸€ç¯‡æ–°çš„æ–‡ç« ï¼Œæ„Ÿè§‰éƒ½æ˜¯å¯¹è¿‡åŽ»è‡ªå·±çš„è‚¯å®šï¼Œä¹Ÿå¸Œæœ›æˆ‘è¿‡åŽ»è¿™ä¸€æ®µæ—¶é—´çš„è¸©å‘ç»éªŒå¯ä»¥å¸®åŠ©åˆ°æ›´å¤šäººè§£å†³å·¥ä½œä¸Žå­¦ä¹ ä¸Šçš„é—®é¢˜ã€‚å¦‚æžœä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹ä¸ªèµžé¼“åŠ±ä¸€ä¸‹æˆ‘ï¼Œè¿™æ ·æˆ‘ä¼šåŠ å¤§é©¬åŠ›ç»§ç»­åŠªåŠ›å¤šå‡ºäº›å¹²è´§çš„ï¼Œå˜»å˜»ã€‚å¦‚æžœä½ å¯¹æœ¬æ–‡æœ‰ä»»ä½•çš„ç–‘é—®æˆ–è¡¥å……ï¼Œéƒ½æ¬¢è¿Žåœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€è®¨è®ºï¼Œæœ€åŽç¥å¤§å®¶å¹³å®‰å¤œã€åœ£è¯žèŠ‚å¿«ä¹ï¼Œè®°å¾—åƒè‹¹æžœå“¦ ~ðŸŽðŸŽæ„Ÿè°¢è§‚çœ‹ã€‚ 2020å¹´4æœˆ7æ—¥æ›´æ–°åˆ©ç”¨JSONå¯¹è±¡çš„stringifyå’Œparseæ–¹æ³•ä¹Ÿä¸æ˜¯ä¸‡æ— ä¸€å¤±çš„ã€‚ ä¼šå¿½ç•¥ undefinedä¼šå¿½ç•¥ symbolä¸èƒ½åºåˆ—åŒ–å‡½æ•° 12345678const obj = &#123; a: undefined, b: 'hi', c: function() &#123;&#125;, d: Symbol('syl'),&#125;jsonDeepClone(obj)// &#123;b: "hi"&#125; ä¸èƒ½è§£å†³å¾ªçŽ¯å¼•ç”¨çš„å¯¹è±¡ 123456789let circularObj = &#123; a: '', b: &#123; c: '', &#125;,&#125;circularObj.a = circularObj.b;circularObj.b.c = circularObj.a;jsonDeepClone(circularObj); å¾ªçŽ¯å¼•ç”¨ä¼šæŠ¥é”™ã€‚ MessageChannelå¦‚æžœä½ æƒ³æ‹·è´çš„å¯¹è±¡å«æœ‰undefinedæˆ–å¾ªçŽ¯å¼•ç”¨ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬å‡½æ•°å’ŒSymbolå¯¹è±¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨MessageChannel()æ¥è¿›è¡Œæ·±æ‹·è´ã€‚ MessageChannel()æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªæ¶ˆæ¯é€šé“ï¼Œå¹¶é€šè¿‡å®ƒçš„ä¸¤ä¸ªMessagePortå±žæ€§å‘é€æ•°æ®ã€‚å¹¶ä¸”MessageChannel()æ–¹æ³•å­˜åœ¨ä¸¤ä¸ªå±žæ€§ï¼ˆport1ã€port2ï¼‰ï¼Œåˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªé€šé“ç«¯å£ï¼Œè¿™ä¸¤ä¸ªé€šé“éƒ½å¯ä»¥é€šè¿‡postMessage()å‘å¯¹æ–¹å‘é€æ•°æ®ã€‚ æ¥çœ‹ä¸€ä¸ªå°ä¾‹å­ã€‚123456789101112const channel = new MessageChannel();const &#123; port1, port2 &#125; = channel;port1.onmessage = function (msg) &#123; console.log(msg) console.log(`port1æŽ¥æ”¶äº†ï¼š$&#123;msg.data&#125;`)&#125;port2.onmessage = function (msg) &#123; console.log(`port2æŽ¥æ”¶äº†ï¼š$&#123;msg.data&#125;`)&#125;// å‘é€æ¶ˆæ¯port1.postMessage('port1å‘é€çš„æ¶ˆæ¯')port2.postMessage('port2å‘é€çš„æ¶ˆæ¯') port2æŽ¥æ”¶äº†ï¼šport1å‘é€çš„æ¶ˆæ¯port1æŽ¥æ”¶äº†ï¼šport2å‘é€çš„æ¶ˆæ¯ è¿™æ—¶å€™ä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼ŒMessageChannelä¸Žæ·±æ‹·è´æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Œå…¶å®žï¼ŒpostMessageé‡Œä¼ é€’çš„æ•°æ®ï¼Œå®žé™…ä¸Šæ˜¯ç»è¿‡æ·±æ‹·è´çš„ï¼Œå®ƒä¸åŒäºŽJsonå¯¹è±¡ï¼Œå¯¹undefinedå’Œå¾ªçŽ¯å¼•ç”¨éƒ½æ˜¯å‹å¥½çš„ã€‚ 1234567891011121314151617181920212223242526272829function structuralClone(obj) &#123; return new Promise(resolve =&gt; &#123; const &#123; port1, port2 &#125; = new MessageChannel(); port2.onmessage = ev =&gt; resolve(ev.data); port1.postMessage(obj); &#125;)&#125;// å¾ªçŽ¯å¼•ç”¨structuralClone(circularObj).then((deep) =&gt; &#123; // ä¸è¦å¿˜è®°MessageChannelæ˜¯å¼‚æ­¥çš„ let copyObj = deep; console.log(copyObj, circularObj); console.log(copyObj == circularObj); // false&#125;);// undefinedä¸Žå†…ç½®å¯¹è±¡ï¼Œä½¿ç”¨åˆšåˆšçš„ä¾‹å­const obj = &#123; a: undefined, b: 'hi', c: function() &#123;&#125;, d: Symbol('syl'), e: &#123; f: 'wow' &#125;,&#125;structuralClone(obj).then((deep) =&gt; &#123; let copyObj = deep; console.log(copyObj, obj); console.log(copyObj == obj); // false&#125;); æ¥çœ‹ä¸€ä¸‹æ‰§è¡Œç»“æžœã€‚ æŠ¥é”™äº†ï¼Œä¸Šé¢æè¿‡ï¼Œè¿™ç§æ·±æ‹·è´æ–¹å¼ä¸é€‚åˆåŒ…å«å‡½æ•°çš„å¯¹è±¡å’ŒSymbol()ã€‚ æˆ‘ä»¬åŽ»æŽ‰å®ƒä»¬è¯•ä¸€ä¸‹ã€‚12345678910111213const obj = &#123; a: undefined, b: 'hi', c: &#123; d: 'wow' &#125;,&#125;structuralClone(obj).then((deep) =&gt; &#123; let copyObj = deep; console.log(copyObj, obj); console.log(copyObj == obj); // false console.log(copyObj.c == obj.c); // false å†…ç½®å¯¹è±¡åŒæ ·è¢«æ‹·è´äº†&#125;); å½“ç„¶ï¼Œæœ€ä¿é™©çš„è¿˜æ˜¯ä½¿ç”¨lodashçš„æ·±æ‹·è´(cloneDeep)ï¼Œæœ‰å…´è¶£çš„å¯ä»¥åŽ»çœ‹çœ‹ã€‚]]></content>
      <tags>
        <tag>categories</tag>
        <tag>vue</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨ç½‘æ˜“äº‘ç”Ÿæˆä½ è‡ªå·±çš„éŸ³ä¹å¤–é“¾ã€æå–lrcæ­Œè¯æ–‡ä»¶ã€ä¸“è¾‘å›¾ç‰‡ã€‚]]></title>
    <url>%2F2018%2F12%2F12%2FmusicLinks%2F</url>
    <content type="text"><![CDATA[åœ¨ä½¿ç”¨å„ç§HTML5éŸ³ä¹æ’­æ”¾å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å€ŸåŠ©ä¸€äº›éŸ³ä¹ç½‘ç«™å¯»æ‰¾éŸ³ä¹å¤–é“¾ï¼Œæˆ–è€…æ˜¯è‡ªå·±ç”¨äº‘æœåŠ¡å™¨ç”ŸæˆéŸ³ä¹å¤–é“¾ï¼Œä½†æ˜¯éŸ³ä¹å¤–é“¾ç½‘ç«™çš„æ­Œæ›²æ•°é‡å®žåœ¨æœ‰é™ï¼Œè‡ªå·±ç”Ÿæˆåˆæµªè´¹æ—¶é—´æˆæœ¬ã€‚å‰ä¸€é˜µå­æˆ‘åœ¨æ­å»ºåšå®¢çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯aplayeræ’­æ”¾å™¨ï¼Œé¡ºä¾¿è‡ªå·±ç ”ç©¶äº†ä¸‹æ€Žä¹ˆç”¨ç½‘æ˜“äº‘ç”ŸæˆéŸ³ä¹å¤–é“¾ï¼Œéžå¸¸å®žç”¨ä¸”ä¾¿æ·å¿«é€Ÿã€‚æœ¬ç¯‡æ–‡ç« å°±æ¥æ€»ç»“ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹ç½‘ç«™ç”Ÿæˆä½ è‡ªå·±çš„éŸ³ä¹å¤–é“¾ã€æå–ä¸“è¾‘å›¾ç‰‡ä»¥åŠlrcæ­Œè¯æ–‡ä»¶ã€‚æœ‰å…³äºŽaplayerçš„ä½¿ç”¨ï¼Œæˆ‘åœ¨ä¹‹åŽä¼šå•ç‹¬å†™ä¸€ç¯‡æ–‡ç« æ¥è®²ã€‚æˆ‘åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œé¿å…ä½¿ç”¨äº†ä¸€äº›ä¸“æœ‰è¯æ±‡ï¼Œæ— è®ºä½ ä¼šä¸ä¼šä½¿ç”¨å¼€å‘è€…å·¥å…·ï¼Œéƒ½å¯ä»¥è½»ä¾¿çš„ä¸Šæ‰‹ï¼Œå½“ç„¶å¼€å‘å¤§ä½¬è¯·æ— è§†ã€‚ æå–éŸ³ä¹å¤–é“¾é¦–å…ˆï¼Œæ‰“å¼€ç½‘æ˜“äº‘éŸ³ä¹çš„å®˜ç½‘ï¼Œæœç´¢ä½ æƒ³è¦çš„éŸ³ä¹ã€‚ è¸©å‘è®°å½•åœ¨è¯´æ­£ç¡®æå–å¤–é“¾æ–¹å¼ä¹‹å‰ï¼Œæˆ‘å…ˆæ¥ä»‹ç»ä¸€ä¸‹æˆ‘å½“æ—¶è¸©çš„å‘ï¼ŒçœŸæ˜¯ä¸€æŠŠè¡€æ³ªï¼Œå¦‚æžœå¯¹è¿™éƒ¨åˆ†æ²¡å…´è¶£çš„æœ‹å‹å¯ä»¥ç›´æŽ¥è·³åˆ°ç”Ÿæˆå¤–é“¾éƒ¨åˆ†ã€‚å½“æ—¶æˆ‘èŽ·å–éŸ³ä¹å¤–é“¾çš„æ–¹å¼æ˜¯åœ¨éŸ³ä¹ç•Œé¢ç‚¹å‡»å·¦ä¾§çš„â€œç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç„¶åŽåœ¨ç‚¹å¼€çš„é¡µé¢é‡Œå•å‡»é¼ æ ‡å³é”®æ‰“å¼€æ£€æŸ¥ï¼Œç„¶åŽåœ¨æœ€ä¸Šé¢ä¸€æ å¯»æ‰¾Networkï¼Œæ‰¾åˆ°å®ƒä¸‹é¢çš„Mediaï¼ˆå¦‚æžœæ˜¯ç©ºçš„åˆ™é‡æ–°åˆ·æ–°é¡µé¢ï¼‰ï¼Œå³é”®ç‚¹å‡»ä¸‹é¢çš„Copyï¼Œé€‰æ‹©Copy link addressï¼Œè¿™æ ·æˆ‘å°±å¾—åˆ°äº†è¿™é¦–æ­Œçš„éŸ³ä¹å¤–é“¾ï¼Œä¸è¿‡ï¼Œåœ¨åŽç»­ä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘å‘çŽ°ï¼Œè¿™æ ·èŽ·å–çš„éŸ³ä¹å¤–é“¾ä¼šåœ¨ä¸€æ®µæ—¶é—´åŽå¤±æ•ˆï¼Œå¯¼è‡´æˆ‘ç½‘é¡µçš„æ­Œæ—¶å¥½æ—¶åï¼Œæœ€åˆæˆ‘è¿˜æ€€ç–‘è‡ªå·±å¤åˆ¶é”™äº†å€¼ï¼Œåœ¨æˆ‘é‡å¤æµ‹è¯•å‡ æ¬¡ä¹‹åŽï¼Œè¯æ˜Žè¿™æ ·èŽ·å–çš„å¤–é“¾ç¡®å®žä¼šä¸å®šæœŸåˆ·æ–°ã€‚æ‰€ä»¥å³ä¾¿è¿™ç§æ–¹å¼æ–¹ä¾¿å¿«æ·ï¼Œå¯å®ƒå´å¹¶ä¸å¯é ã€‚å½“æ—¶ä½¿ç”¨çš„æ–¹æ³•å¦‚ä¸‹â†“ã€‚ä¸è¿‡å¥½åœ¨ï¼Œæˆ‘ä¹‹åŽæ‰¾åˆ°äº†æ›´ç®€æ˜“çš„åŠžæ³•ï¼Œå°±æ˜¯ç›´æŽ¥å¤åˆ¶ç½‘ç«™çš„ç½‘å€ã€‚ ç”Ÿæˆå¤–é“¾é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥å¤åˆ¶ä¸€ä¸‹æ­Œæ›²çš„ç½‘å€ã€‚ç„¶åŽï¼Œé‡ç‚¹æ¥äº†ï¼ éŸ³ä¹ç½‘å€ï¼šhttps://music.163.com/#/song?id=557583012 ä¿®æ”¹åŽçš„ç½‘å€ï¼šhttps://music.163.com/song/media/outer/url?id=557583012.mp3 ä¿®æ”¹åŽçš„ç½‘å€ä¹Ÿå°±æ˜¯ä½ æ‰€éœ€è¦çš„éŸ³ä¹å¤–é“¾ï¼Œè¿‡ç¨‹å°±æ˜¯åˆ é™¤å‰é¢çš„#å·ï¼Œåœ¨songåŽé¢åŠ ä¸Š/media/outer/urlï¼Œæœ€åŽåœ¨ç»“å°¾å¤„åŠ ä¸Š.mp3å°±å¤§åŠŸå‘Šæˆå•¦ï¼Œæ²¡é”™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œä½ å°±æ‹¥æœ‰äº†ä¸éœ€è¦ä»»ä½•äº‘æœåŠ¡å™¨çš„éŸ³ä¹å¤–é“¾ã€‚é¡ºä¾¿åœ¨è¿™é‡Œå¼ºæŽ¨ä¸€ä¸‹æ–­çœ‰çš„è¿™é¦–Patientï¼Œå®žåœ¨æ˜¯å¤ªå¥½å¬äº†ï¼PS:è¿™æ ·åšå¯ä»¥æŠŠç½‘æ˜“äº‘ä¸å…è®¸ä½ ç”ŸæˆéŸ³ä¹å¤–é“¾çš„ç‰ˆæƒéŸ³ä¹çš„éŸ³ä¹å¤–é“¾ç”Ÿæˆå‡ºæ¥ï¼Œä¸è¿‡æˆ‘å¹¶ä¸æŽ¨èä½ è¿™ä¹ˆåšï¼Œå› ä¸ºæˆ‘è§‰å¾—ç‰ˆæƒæ„è¯†è¿˜æ˜¯éœ€è¦é å¤§å®¶ä¸€èµ·æ™®åŠå¼€æ¥ï¼Œæ‰€ä»¥å¸Œæœ›å¤§å®¶åœ¨åšéŸ³ä¹å¤–é“¾çš„æ—¶å€™å°½é‡é€‰ç”¨é‚£äº›å¯ä»¥ç”Ÿæˆå¤–é“¾çš„éŸ³ä¹ã€‚ä¾‹å¦‚ä¸Šé¢è¿™é¦–Patientå°±æ˜¯ä¸€é¦–ç‰ˆæƒéŸ³ä¹ï¼Œæˆ‘åœ¨è¿™é‡Œåªæ˜¯æ¼”ç¤ºä¸€ä¸‹ç”Ÿäº§å¤–é“¾çš„æ–¹æ³•ï¼Œè™½ç„¶æˆ‘å¾ˆæƒ³æŠŠè¿™é¦–æ­Œæ”¾åˆ°åšå®¢é‡Œç»™ä½ ä»¬å¬ï¼Œä½†æ˜¯ä¸ºäº†ç‰ˆæƒï¼Œè¿˜æ˜¯å»ºè®®å¤§å®¶è‡ªå·±åŽ»ç½‘æ˜“äº‘éŸ³ä¹å¬å§ ~ æå–lrcæ­Œè¯æ–‡ä»¶é¦–å…ˆï¼Œè¿˜æ˜¯åœ¨ç½‘æ˜“äº‘éŸ³ä¹çš„å®˜ç½‘æœç´¢ä½ æƒ³è¦çš„éŸ³ä¹ï¼Œç„¶åŽç‚¹å¼€Networkï¼Œæ­¤æ—¶æ³¨æ„ä¸‹é¢ä¸€è¡Œçš„é€‰é¡¹å¿…é¡»åœ¨Allä¸Šï¼Œå¦‚æžœåˆšåˆšé€‰æ‹©äº†Mediaè¦è®°å¾—åˆ‡æ¢å›žæ¥ï¼Œç„¶åŽåœ¨æœç´¢æ¡†è¾“å…¥lyricï¼ˆå¦‚æžœæ²¡æœ‰å±•ç¤ºF5åˆ·æ–°é¡µé¢ï¼‰ï¼ŒæŠŠæ˜¾ç¤ºå‡ºçš„é‚£ä¸ªæ–‡ä»¶å³é”®copyâ†’copy responseï¼Œå¦‚ä¸‹å›¾ã€‚ä¸‹ä¸€æ­¥ä»Žæœ€ä¸Šæ–¹çš„Networkåˆ‡æ¢åˆ°Consoleã€‚ ç„¶åŽè¾“å…¥a=åœ¨æ­¤å¤„ç²˜è´´ä½ åˆšåˆšå¤åˆ¶çš„å†…å®¹ï¼Œå¹¶å›žè½¦ï¼Œå±•ç¤ºå¦‚ä¸‹å›¾ã€‚ ç´§æŽ¥ç€è¾“å…¥a.lrc.lyricï¼Œå›žè½¦ï¼Œä¸‹é¢å°±æ˜¯ä½ è¦æå–çš„lrcæ­Œè¯æ–‡ä»¶å•¦ã€‚ å¦‚æžœè¾“å…¥a.tlyric.lyricï¼Œé‚£ä¹ˆå°±æ˜¯æ­Œè¯çš„ç¿»è¯‘ç‰ˆæœ¬ã€‚ æå–ä¸“è¾‘å›¾ç‰‡è¿˜æ˜¯ç‚¹å¼€Networkï¼Œé€‰å–ä¸‹é¢ä¸€è¡Œçš„imgï¼ŒCopyâž¡ï¸Copy link addressèŽ·å–å›¾ç‰‡å¤–é“¾ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥åŒå‡»å›¾ç‰‡ï¼Œä½¿æµè§ˆå™¨åœ¨æ–°çš„ç½‘é¡µä¸­å±•ç¤ºè¿™å¼ å›¾ç‰‡ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥å³é”®ä¿å­˜å®ƒï¼Œä½ç½®å¦‚ä¸‹â†“ã€‚ åˆ°æ­¤ï¼Œä½ å·²ç»æ‹¥æœ‰äº†lrcæ­Œè¯æ–‡ä»¶ã€ä¸“è¾‘å°é¢ã€ä»¥åŠæœ€é‡è¦çš„éŸ³ä¹å¤–é“¾ï¼Œä½ å¯ä»¥éšæ„åŽ»ç”Ÿæˆä½ å–œæ¬¢çš„æ­Œå•äº†ï¼Œå¦‚æžœå¯¹ä»¥ä¸Šçš„å†…å®¹æœ‰ä»»ä½•ç–‘é—®æˆ–è¡¥å……ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºåŒºç•™è¨€ç»™æˆ‘ã€‚æ„Ÿè°¢è§‚çœ‹ã€‚éž èº¬ ~]]></content>
      <tags>
        <tag>categories</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue+vue-i18næ­å»ºå›½é™…åŒ–ç½‘ç«™ã€å…¼å®¹Element-UIã€åŠ¨æ€åˆ‡æ¢cssã€‘]]></title>
    <url>%2F2018%2F12%2F08%2FvueI18n%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å› ä¸ºé›¾éœ¾å¾ˆåŽ‰å®³ï¼Œæ‰€ä»¥å‘çƒ§äº†åœ¨å®¶å…»ç—…ï¼Œæƒ³ç€éš¾å¾—æœ‰ç©ºï¼Œæ­£å¥½è¶æœºæ•´ç†ä¸€ä¸‹ä»¥å‰åœ¨é¡¹ç›®ä¸­é‡åˆ°è¿‡çš„é—®é¢˜åŠéœ€æ±‚ã€‚ä»Šå¤©æƒ³æ¥å†™ä¸€ä¸‹ä¹‹å‰ä¸ºé¡¹ç›®æ­å»ºçš„å›½é™…åŒ–ï¼ˆi18nï¼‰åŠŸèƒ½ï¼Œç”±äºŽä¹‹å‰é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨çš„Vue+Element-UIï¼Œæ‰€ä»¥æœ¬æ–‡ç« ä¸­åˆ†åˆ«æœ‰vue-i18nå’Œå…¼å®¹element-uiçš„vue-i18nä¸¤ç§å†™æ³•ï¼Œå¤§å®¶å¯ä»¥æŒ‰éœ€å‚è€ƒã€‚ å‰è¨€æœ¬æ–‡æ˜¯åŸºäºŽvueè¿›è¡Œå®žçŽ°çš„å›½é™…åŒ–åŠŸèƒ½ï¼Œæˆ‘å‡è®¾ä½ å¯¹vueå·²ç»æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œå¹¶ä¸”å·²ç»æ‹¥æœ‰äº†å±žäºŽä½ è‡ªå·±çš„vueé¡¹ç›®çŽ¯å¢ƒï¼Œè¿™é‡Œä¸åšè¿‡å¤šé˜è¿°ï¼Œå¦‚æžœå¯¹è¿™ä¸€æ­¥æœ‰ç–‘é—®çš„è¯ï¼Œè¯·å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼Œè¿›è¡Œé¡¹ç›®æ­å»ºã€‚å¦‚æžœä½ åªæ˜¯æ€¥éœ€ä¸€ä¸ªå·²ç»æ­å»ºå¥½çš„i18næ¨¡ç‰ˆï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥åŽ»æˆ‘çš„githubä»“åº“ä¸‹è½½æˆ‘å·²ç»å†™å¥½çš„é¡¹ç›®æ¨¡ç‰ˆã€‚ vue-i18nå®‰è£…vue-i18n1npm install vue-i18n é…ç½®æ–‡ä»¶å¦‚ä¸‹å›¾åˆ›å»ºi18næ–‡ä»¶å¤¹ï¼Œåœ¨i18næ–‡ä»¶å¤¹é‡Œåˆ†åˆ«åˆ›å»ºi18n.jsã€langsæ–‡ä»¶å¤¹ï¼Œåœ¨langsæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä½ çš„è¯­è¨€æ–‡ä»¶ï¼ˆcn.js/en.js/ja.jsï¼‰å’Œindex.jsæ–‡ä»¶ã€‚è¯­è¨€åŒ…åˆ†åˆ«ä¸ºä¸­æ–‡/è‹±æ–‡/æ—¥è¯­ï¼Œå¤§å®¶åœ¨é¡¹ç›®ä¸­é€‰æ‹©åˆ›å»ºè‡ªå·±éœ€è¦çš„è¯­è¨€åŒ…å³å¯ã€‚ i18n.js1234567891011import Vue from 'vue'import VueI18n from 'vue-i18n'import messages from './langs'Vue.use(VueI18n)//ä»ŽlocalStorageä¸­æ‹¿åˆ°ç”¨æˆ·çš„è¯­è¨€é€‰æ‹©ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œé‚£é»˜è®¤ä¸­æ–‡ã€‚const i18n = new VueI18n(&#123; locale: localStorage.lang || 'cn', messages,&#125;)export default i18n index.js12345678import en from './en'import cn from './cn'import ja from './ja'export default &#123; en, cn, ja,&#125; cn.js1234567const cn = &#123; message: &#123; 'hello': 'ä½ å¥½', &#125;&#125;export default cn en.js1234567const en = &#123; message: &#123; 'hello': 'hello', &#125;&#125;export default en ja.js1234567const ja = &#123; message: &#123; 'hello': 'ã“ã‚“ã«ã¡ã¯', &#125;&#125;export default ja ðŸŒŸ åœ¨é…ç½®è¯­è¨€åŒ…çš„æ—¶å€™ï¼Œkeyå€¼ä¸€å®šè¦ä¿æŒç»Ÿä¸€ï¼Œå› ä¸ºi18næ˜¯é€šè¿‡ä½ çš„keyå€¼æ¥åˆ‡æ¢è¯­è¨€çš„ï¼Œå¦‚æžœkeyå€¼æœ‰è¯¯ï¼Œå°±ä¸èƒ½æ­£ç¡®çš„åˆ‡æ¢è¯­è¨€åŒ…ï¼Œè¿™ä¸€ç‚¹åƒä¸‡è¦æ³¨æ„ã€‚ main.js12345678import i18n from './i18n/i18n'new Vue(&#123; el: '#app', i18n, //åŠ ä¸Ši18n components: &#123; App &#125;, template: '&lt;App/&gt;'&#125;) åˆ°æ­¤æˆ‘ä»¬çš„i18nå·²ç»å…¨éƒ¨é…ç½®ç»“æŸäº†ï¼Œä¸‹é¢æˆ‘ä»¬åŽ»é¡µé¢ä¸­è¿›è¡Œä½¿ç”¨ã€‚ é…ç½®é¡µé¢HTMLéƒ¨åˆ†1234&lt;p&gt;&#123;&#123;$t(â€˜message.helloâ€™)&#125;&#125;&lt;/p&gt;//æ­¤æ—¶åº”è¯¥æ˜¯ä¸­æ–‡&lt;button @click="switchLang('en')"&gt;è‹±è¯­&lt;/button&gt;&lt;button @click="switchLang('cn')"&gt;ä¸­æ–‡&lt;/button&gt;&lt;button @click="switchLang('ja')"&gt;æ—¥è¯­&lt;/button&gt; Jséƒ¨åˆ†1234567methods:&#123; switchLang(lang) &#123; this.$i18n.locale = lang //æŠŠè¯­è¨€ä¿å­˜åœ¨localStorageä¸­ localStorage.setItem('lang',lang); &#125; &#125;, åˆ°æ­¤ï¼Œè¿è¡Œnpm run devå°±å¯ä»¥çœ‹åˆ°å¯ä»¥è¿›è¡Œè¯­è¨€åˆ‡æ¢çš„é¡¹ç›®äº†ã€‚ æ ¹æ®è¯­è¨€åˆ‡æ¢cssåˆ°æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®žçŽ°äº†åŸºæœ¬çš„å›½é™…åŒ–åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨åˆ‡æ¢è¯­è¨€çš„æ—¶å€™ä¸å¾—ä¸é¢ä¸´çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å› ä¸ºè¯­è¨€çš„ä¸åŒï¼Œå³ä½¿æ˜¯åŒä¸€å¥è¯ï¼Œæ–‡å­—æ ·å¼çš„é•¿åº¦ä¹Ÿä¼šä¸åŒã€‚æ‰€ä»¥è¿™æ—¶å€™ç‰¹åˆ«å®¹æ˜“äº§ç”Ÿä¸€äº›é¡µé¢æ ·å¼ä¸Šçš„ç»“æž„é”™ä½ï¼Œä¸ºæ­¤æˆ‘ä»¬å°±éœ€è¦æ ¹æ®ä¸åŒè¯­è¨€æ¥åˆ‡æ¢é¡¹ç›®çš„cssã€‚æˆ‘è¿™è¾¹æä¾›çš„æ€è·¯æ˜¯åœ¨æœ€ä¸Šå±‚htmlçš„divä¸Šæ·»åŠ ä¸€ä¸ªå¯ä»¥åŠ¨æ€åˆ‡æ¢classçš„å˜é‡ï¼Œä»¥æ”¹å˜é¡¹ç›®çš„çˆ¶çº§çš„classåç§°ï¼Œå®žçŽ°åˆ‡æ¢è¯­è¨€çš„åŒæ—¶åˆ‡æ¢cssæ ·å¼ã€‚ HTMLéƒ¨åˆ†1234&lt;template&gt; &lt;div :class="langCss"&gt; &lt;/div&gt;&lt;/template&gt; Jséƒ¨åˆ†åœ¨dataä¸­å®šä¹‰ä¿å­˜classçš„å˜é‡123456data () &#123; return &#123; langCss:window.localStorage.getItem('lang')||'cn', //å…ˆåŽ»å–localStorageé‡Œä¿å­˜çš„è¯­è¨€ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±é»˜è®¤ä¸­æ–‡ //è¿™ä¹ˆåšçš„æ„ä¹‰æ˜¯ä¸ºäº†ç”¨æˆ·åœ¨åˆ·æ–°é¡µé¢çš„æ—¶å€™æ ·å¼ä¸ä¸¢å¤±ã€‚ &#125; ç´§æŽ¥ç€åœ¨æˆ‘ä»¬çš„switchlLangå‡½æ•°åŽæ·»åŠ æ–°çš„ä¸€è¡Œï¼Œä»¥ä¾¿åœ¨åˆ‡æ¢è¯­è¨€çš„åŒæ—¶åˆ‡æ¢classã€‚12345switchLang(lang) &#123; this.$i18n.locale = lang localStorage.setItem('lang',lang); this.langCss=lang;//æ–°æ·»åŠ çš„ï¼Œä»¥ä¾¿åˆ‡æ¢çˆ¶çº§class &#125; Csséƒ¨åˆ†åœ¨styleæ ‡ç­¾ä¸­ä¸­è®¾ç½®ä½ æƒ³è¦çš„æ ·å¼ï¼Œæˆ‘è¿™è¾¹ä»¥æ”¹å˜æ–‡å­—é¢œè‰²ä¸ºä¾‹ã€‚123456789.en button &#123; color: steelblue;&#125;.cn button &#123; color: #666;&#125;.ja button &#123; color: seagreen;&#125; åˆ°æ­¤vue-i18nçš„å†…å®¹å°±å…¨éƒ¨ç»“æŸäº†ï¼Œç”±äºŽçŽ°åœ¨å¾ˆå¤šäººåœ¨ä½¿ç”¨vueçš„åŒæ—¶ä¼šæ­é…Element-UIä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨çŽ°åœ¨çš„åŸºç¡€ä¸Šä¼˜åŒ–ä¸€ä¸‹æˆ‘ä»¬çš„é¡¹ç›®ï¼Œä»¥ä¾¿å¯ä»¥å…¼å®¹Element-UIã€‚ å…¼å®¹Element-UIçš„i18nå‚è€ƒç½‘å€Elementç»„ä»¶æ–‡æ¡£Elementå®˜ç½‘-i18n å®‰è£…Elementç›¸å…³ä¾èµ–npm i element-ui -s ä¿®æ”¹é…ç½®main.js123456789101112//å¼•å…¥element-uiimport ElementUI from 'element-ui';import 'element-ui/lib/theme-chalk/index.css';Vue.use(ElementUI);new Vue(&#123; store:store, i18n, ElementUI,//æ·»åŠ element-ui el: '#app', components: &#123; App &#125;, template: '&lt;App/&gt;',&#125;) i18n.js1234567891011121314import Vue from 'vue';import locale from 'element-ui/lib/locale';import VueI18n from 'vue-i18n';import messages from './langs';Vue.use(VueI18n);//ä»ŽlocalStorageä¸­æ‹¿åˆ°ç”¨æˆ·çš„è¯­è¨€é€‰æ‹©ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œé‚£é»˜è®¤ä¸­æ–‡ã€‚const i18n = new VueI18n(&#123; locale: localStorage.lang || 'cn', messages,&#125;)locale.i18n((key, value) =&gt; i18n.t(key, value)) //ä¸ºäº†å®žçŽ°elementæ’ä»¶çš„å¤šè¯­è¨€åˆ‡æ¢export default i18n ä¿®æ”¹è¯­è¨€åŒ…123456789101112131415161718192021222324252627282930313233343536// en.jsimport enLocale from 'element-ui/lib/locale/lang/en'const en = &#123; message: &#123; 'hello': 'hello', &#125;, ...enLocale&#125;export default en;// **********åˆ†å‰²çº¿**********// cn.jsimport zhLocale from 'element-ui/lib/locale/lang/zh-CN'const cn = &#123; message: &#123; hello: 'ä½ å¥½ï¼Œä¸–ç•Œ', &#125;, ...zhLocale&#125;export default cn;// **********åˆ†å‰²çº¿**********// ja.jsimport jaLocale from 'element-ui/lib/locale/lang/ja'const ja = &#123; message: &#123; hello: 'ã“ã‚“ã«ã¡ã¯ã€ä¸–ç•Œ', &#125;, ...jaLocale&#125;export default ja; å¦‚æžœconsoleé‡Œæœ‰å¦‚â¬‡ï¸è­¦å‘Šï¼Œè¯æ˜Žçš„ä½ è¯­è¨€åŒ…æ²¡æœ‰é…ç½®æ­£ç¡®ï¼Œè¿”å›žä¸Šä¸€æ­¥ä¿®æ”¹è¯­è¨€åŒ…æŸ¥çœ‹ã€‚ é…ç½®é¡µé¢å¼•ç”¨ç»„ä»¶è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥ä¸€ä¸ªElement-UIçš„ç»„ä»¶è¿›è¡Œå¼€å‘äº†ï¼Œè¿™é‡Œä»¥dialogç»„ä»¶ä¸ºä¾‹æ¼”ç¤ºä¸€ä¸‹åŸºäºŽElement-UIçš„æ–‡å­—å›½é™…åŒ–æ–¹æ¡ˆã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åŽ»Elementç»„ä»¶æ–‡æ¡£åŽ»å¼•ç”¨ä¸€äº›åˆ«çš„ç»„ä»¶ï¼Œè¿™å…¨çœ‹ä½ è‡ªå·±çš„é¡¹ç›®éœ€è¦ã€‚ æˆ‘å¼•ç”¨çš„æ˜¯ç¬¬ä¸€ä¸ªdialogç»„ä»¶ã€åŸºæœ¬ç”¨æ³•ã€‘ï¼Œå¼•ç”¨æˆåŠŸåŽï¼Œé¡µé¢å¦‚ä¸‹å›¾ï¼Œè¿™é‡Œä¸å¯¹ç»„ä»¶å¼•ç”¨åšè¿‡å¤šé˜è¿°ã€‚æ­¤æ—¶åˆ‡æ¢è¯­è¨€åŽï¼Œæˆ‘ä»¬å‘çŽ°æš´éœ²åœ¨å¤–å±‚æˆ‘ä»¬å¯ä¿®æ”¹çš„è¯­è¨€æ–‡å­—å¹¶ä¸ä¼šæœ‰å˜åŒ–ï¼Œä½†æ˜¯ä½ ç‚¹å‡»å³ä¸Šè§’çš„å…³é—­ç¬¦å·åŽï¼Œä¼šå‘çŽ°é‡Œé¢å†…ç½®çš„è¯­è¨€å·²ç»æ”¹å˜äº†ã€‚ Jsè°ƒç”¨ä¸‹é¢éœ€è¦æˆ‘ä»¬æ¥æ‰‹åŠ¨é…ç½®ä¸€ä¸‹æœªåˆ‡æ¢æ–‡å­—çš„è¯­è¨€åŒ…ï¼Œé…ç½®æ–¹æ³•åŒä¸Šæ–‡çš„é…ç½®é¡µé¢ï¼Œè¿™é‡Œæˆ‘é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œåœ¨jsé‡Œè°ƒç”¨å›½é™…åŒ–ç›´æŽ¥ç”¨this.$t(â€˜message.xxxâ€™)å³å¯ï¼Œå¦‚ä¸‹ã€‚1234567handleClose(done) &#123; this.$confirm(this.$t('message.confirm'))//jså†…éƒ¨åˆ‡æ¢ .then(_ =&gt; &#123; done(); &#125;) .catch(_ =&gt; &#123;&#125;); &#125; githubåœ°å€åˆ°æ­¤ï¼Œå›½é™…åŒ–å†…å®¹å…¨éƒ¨ç»“æŸï¼Œæˆ‘æŠŠæ‰€æœ‰ä»£ç éƒ½æ”¾åˆ°äº†æˆ‘çš„githubä»“åº“ä¸Šï¼Œé‡Œé¢æä¾›äº†vue-i18nä»¥åŠå…¼å®¹Element-UIçš„ä¸¤ç§å›½é™…åŒ–ç‰ˆæœ¬ã€‚å‡å¦‚ä¸Šæ–‡ä¸­è¿˜æœ‰å“ªé‡Œä¸æ˜Žç™½çš„ï¼Œå¯ä»¥ç›´æŽ¥ä¸‹è½½ä¸‹æ¥å‚è€ƒã€‚å¦‚æžœæœ‰ä»»ä½•ç–‘é—®æˆ–è¡¥å……ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€è®¨è®ºã€‚æ„Ÿè°¢è§‚çœ‹éž èº¬ ï½ž]]></content>
      <tags>
        <tag>categories</tag>
        <tag>vue</tag>
        <tag>i18n</tag>
        <tag>element-ui</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨vue-cliä»Ž0æ­å»ºVueå¼€å‘çŽ¯å¢ƒ]]></title>
    <url>%2F2018%2F12%2F08%2FBuildProjectsVue%2F</url>
    <content type="text"><![CDATA[åœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œæœ‰ä¸‰ç§æ–¹å¼å¯ä»¥åˆ›å»ºvueé¡¹ç›®ï¼Œåˆ†åˆ«æ˜¯æœ¬åœ°å¼•ç”¨ã€ä½¿ç”¨CDNå¼•å…¥vue.jsã€ä½¿ç”¨vue-cliæ­å»ºé¡¹ç›®ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»ä½¿ç”¨vue-cliæ­å»ºé¡¹ç›®ã€‚ å‡†å¤‡å·¥ä½œå®‰è£…nodeè¯·ç¡®ä¿ä½ çš„ç”µè„‘ä¸Šå®‰è£…äº†node.jsï¼Œä»¥ä¾¿äºŽç”¨npmåŒ…ç®¡ç†å®‰è£…çŽ¯å¢ƒã€‚å¦‚æžœè¿˜æ²¡æœ‰å®‰è£…ï¼Œè¯·åŽ»nodeå®˜ç½‘ä¸‹è½½å®‰è£…ã€‚ å¦‚æžœå®‰è£…å®Œæˆ,æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼ˆWindows-&gt;è¿è¡Œ-&gt;cmdã€macOS-&gt;command+space-&gt;è¾“å…¥â€œç»ˆç«¯â€ï¼‰ï¼Œä½¿ç”¨1node -v æ£€æŸ¥ä½ çš„nodeç‰ˆæœ¬ï¼Œå‡ºçŽ°ç‰ˆæœ¬å·ä¸ºå·²å®‰è£…ï¼Œå¦‚ä¸‹å›¾ã€‚ å…¨å±€å®‰è£…vue-cli1npm install -g vue-cli å¦‚æžœæŠ¥é”™è¯æ˜Žä½ æ²¡æœ‰å®‰è£…çš„æƒé™ï¼Œæ‰§è¡Œ1sudo npm install -g vue-cli ç„¶åŽè¾“å…¥ä½ çš„ç®¡ç†å‘˜å¯†ç ï¼Œå®‰è£…æˆåŠŸã€‚ æ­å»ºé¡¹ç›®1vue init webpack project-nameï¼ˆä½ çš„é¡¹ç›®åï¼‰ é…ç½®è¯´æ˜Ž123456789Project name é¡¹ç›®åç§°Project description é¡¹ç›®æè¿°Author ä½œè€…Vue build æ‰“åŒ…æ–¹å¼ï¼ˆå¯ç›´æŽ¥å›žè½¦ï¼‰Install vue-router? æ˜¯å¦éœ€è¦å®‰è£…routerï¼Œé€‰yï¼ˆä¸€èˆ¬é¡¹ç›®ä¸­è‚¯å®šä¼šç”¨åˆ°ï¼‰ã€‚Use ESLint to lint your code? æ˜¯å¦éœ€è¦jsè¯­æ³•æ£€æµ‹ï¼ˆå¯ç›´æŽ¥å›žè½¦ï¼‰Set up unit tests æ˜¯å¦å®‰è£…å•å…ƒæµ‹è¯•å·¥å…·ï¼ˆå¯ç›´æŽ¥å›žè½¦ï¼‰Setup e2e tests with Nightwatch? æ˜¯å¦éœ€è¦ç«¯åˆ°ç«¯æµ‹è¯•å·¥å…·ï¼ˆå¯ç›´æŽ¥å›žè½¦ï¼‰Should we run `npm install` for you after the project has been created? æ˜¯å¦åœ¨é¡¹ç›®æ‰§è¡Œå®ŒæˆåŽä¸ºæ‚¨è¿è¡Œnpm installï¼ˆå®‰è£…ä¾èµ–ï¼Œé€‰yï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åŽç»­è‡ªå·±æ‰‹åŠ¨å®‰è£…ä¾èµ–â¬‡ï¸ï¼‰ æ‰‹åŠ¨å®‰è£…ä¾èµ–12cd ä½ çš„vueé¡¹ç›®npm run install è¿è¡Œé¡¹ç›®1npm run dev å‡ºçŽ°ï¸â¬‡ï¸è¡¨ç¤ºå·²è¿è¡ŒæˆåŠŸï¼Œå¯ä»¥é€šè¿‡http://localhost:8080æŸ¥çœ‹ä½ çš„é¡¹ç›®äº†ã€‚12DONE Compiled successfully in 2511ms 01:20:53I Your application is running here: http://localhost:8080 ç¤ºä¾‹æ•ˆæžœ]]></content>
      <tags>
        <tag>categories</tag>
        <tag>vue</tag>
      </tags>
  </entry>
</search>
